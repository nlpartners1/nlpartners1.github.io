function EngagementUiModel(){this.title="",this.notesToPartner="",this.id="",this.estimatedValue="",this.targetClosingDate="",this.externalReferenceId="",this.consentToContactOnBehalfOfCustomer=null,this.consentToContactSpecificPartners=null,this.customerProfile=new CustomerProfileApiV2Model}function EngagementApiV2Model(){this.title="",this.notesToPartner="",this.id="",this.estimatedValue="",this.targetClosingDate="",this.externalReferenceId="",this.consentToContactOnBehalfOfCustomer=null,this.consentToContactSpecificPartners=null,this.customerProfile=new CustomerProfileApiV2Model,this.partnerSearchCriteria=new SearchRequestAPIModel,this.referral=[]}function EngagementApiV1Model(){this.notesToPartner="",this.id="",this.estimatedValue="",this.targetClosingDate="",this.externalReferenceId="",this.customerProfile=new CustomerProfileApiV1Model,this.partnerSearchCriteria=new SearchRequestV1Model,this.selectedPartners=[]}function CustomerProfileApiV2Model(){this.name="",this.size="",this.address=new AddressApiModel,this.contact=new ContactV2ApiModel}function CustomerProfileApiV1Model(){this.name="",this.size="",this.address=new AddressApiModel,this.contact=new ContactV1ApiModel}function AddressApiModel(){this.addressLine1="",this.addressLine2="",this.city="",this.state="",this.country="",this.postalCode=""}function ContactV2ApiModel(){this.firstName="",this.lastName="",this.phoneNumber="",this.email=""}function ContactV1ApiModel(){this.firstName="",this.lastName="",this.phone="",this.email=""}function SearchRequestV1Model(){this.keyword="",this.products=[],this.serviceTypes=[],this.industryFocus=""}function MarketingProfileModel(e,t,n,r,a,o,s,i){this.partnerName=e,this.partnerId=t,this.locationId=n,this.location=r,this.logo=a,this.competency=o,this.hasEndorsements=s,this.linkedInOrganizationProfile=i}function EventData(e,t,n,r,a,o,s){this.clientControlId=e,this.searchTrackingId=t,this.partnerId=n,this.locationId=r,this.partnerName=a,this.additionalDataJson=o,this.engagementId=s}function SearchRequestAPIModel(){this.keyword="",this.product=[],this.serviceType=[],this.industryFocus="",this.partnerTags=[],this.seatCount="null",this.countryCode=null,this.longitude=null,this.latitude=null,this.geoRadius=null,this.customFilters={}}function SearchRequestUXModel(){this.displayTags={},this.keyword=null,this.locationName=null,this.geoRadius=null,this.latitude=null,this.longitude=null,this.selectedCountryCode={countryCode:""},this.organizationSize=null,this.showCountryCodeFilter=!0,this.customFilters={},this.debugFlags={}}function SuggestionCategory(e,t,n,r){this.categoryName=e,this.numberResults=t,this.preLabel=n,this.postLabel=r}function SuggestionEventData(e,t,n,r,a,o){this.clientControlId=e,this.originalKeyword=t,this.clickedSuggestionKey=n,this.clickedSuggestionValue=r,this.clickedSuggestionCategory=a,this.additionalDataJson=o}function SuggestionResult(e,t,n,r,a){this.value=e,this.category=t,this.key=n,this.originalKeyword=r,this.cleanValue=a}function SuggestionsInput(e,t){this.suggestionsCategories=e,this.defaultSuggestionCategory=t}function UXTagModel(e,t,n){this.key=e,this.displayValue=t,this.category=n}function ReviewModel(){this.id="",this.submittedDateTime="",this.marketInfo=new MarketInfo,this.partnerInfo=new PartnerInfo,this.customerInfo=new CustomerInfo,this.ratings=[],this.review=new Review}function MarketInfo(){this.locale="",this.market=""}function PartnerInfo(){this.id="",this.name=""}function CustomerInfo(){this.linkedInId=""}function Rating(){this.id="",this.text="",this.value=""}function Review(){this.title="",this.text=""}var bingGlobalCallback=function(){};!function(){"use strict";function e(e,t,n,r,a,o,s){e.interceptors.push("httpInterceptorSvc"),e.defaults.useXDomain=!0,n.debugInfoEnabled(a.isDebugInfoEnabled),t.caseInsensitiveMatch=!0;var i="/"+a.websiteRoot+"/"+s.debugInfo.buildId;t.when("/search",{templateUrl:i+"/app/Search/NewSearch.html"}).when("/partnerdetails/:partner/:locationId",{templateUrl:i+"/app/Partner/partnerDetails.html"}).when("/review/:partnerId/:engagementId",{templateUrl:i+"/app/review/review.html"}).when("/requestforinformation",{templateUrl:i+"/app/Engagements/NewRequestForInformationPage.html"}).when("/engagements",{templateUrl:i+"/app/Engagements/EngagementListPage.html",requireADLogin:!0}).when("/myengagements",{templateUrl:i+"/app/Engagements/EngagementListPage.html"}).when("/engagements/create",{redirectTo:"/search",requireADLogin:!0}).when("/engagements/:engagementId",{templateUrl:i+"/app/Engagements/EngagementDetailsPage.html",requireADLogin:!0}).when("/engagements/my/:engagementId",{templateUrl:i+"/app/Personalization/PersonalizationEngagementDetails.html"}).when("/linkedincallback",{templateUrl:i+"/app/Personalization/PersonalizationRedirectPage.html"}).when("/debug",{templateUrl:i+"/app/common/templates/debugPage.html"}).otherwise("/search");var l=(a.partnerDirectoryUrl,{});l.partnerDirectoryEndpoint=a.aadSettings.ClientId,l["/api/membergroups"]=a.aadSettings.ClientId;for(var c=[],u=0;u<a.adalJsAnonymousEndPoints.length;u++){var g=a.adalJsAnonymousEndPoints[u];c.push(g)}c.push("/"+a.websiteRoot+"/"),c.push(a.partnerApiEndpoint),c.push("api/engagements/cache"),c.push("api/sessioncontext"),c.push("api/linkedin/signin"),c.push("api/linkedin/signout"),c.push("api/linkedin/token"),o.init({tenant:a.aadSettings.TenantId,instance:a.aadSettings.Instance,clientId:a.aadSettings.ClientId,anonymousEndpoints:c,endpoints:l},e),r.html5Mode({enabled:!0,requireBase:!0,rewriteLinks:!1}).hashPrefix("!")}function t(e){angular.element(document).ready(function(){e.init()})}angular.modules=["app","ngRoute","ngResource","ngSanitize","ngCsv","AdalAngular","meControl","common","app.settings","app.sessionContext","app.resourceContext","app.countryInformation","app.userInfo","ngclipboard"],angular.module(angular.modules[0],angular.modules.slice(1)).config(e).filter("urlEncode",["$window",function(e){return e.encodeURIComponent}]).run(t),e.$inject=["$httpProvider","$routeProvider","$compileProvider","$locationProvider","settings","adalAuthenticationServiceProvider","sessionContext"],t.$inject=["meControlService"]}(),function(){angular.module("common",[])}(),function(){"use strict";function e(e,t,n,r){var a=e.partnerApiEndpoint+"/v1/",o=e.partnerFinderApiEndpoint+"/v1/",s=o+"ratingsandreviews",i=e.PartnerAnalyticsApiEndpoint+"/v1/",l="/"+e.websiteRoot+"/"+r.debugInfo.buildId,c="/"+e.websiteRoot,u=e.engagementsApiEndpoint+"/v2",g=e.partnerDirectoryUrl+"/api/engagements/cache",d="/api/sessioncontext",m=e.partnerApiEndpoint+"/internal/v0/",p=u+"/customerpreferences",f="/api/linkedin/signin",h="/api/linkedin/token";return{PartnerApiPathRoot:a,PartnerFinderapiPathRoot:o,partnerFinderReviewApiPath:s,PartnerAnalyticsApiPathRoot:i,EngagementsApiEndpoint:u,PersonalizationEndpoint:p,PartnerCenterEngagementUrl:e.partnerCenterEngagementUrl,PartnerDirectoryCacheUrl:g,ReferralManagementApiPathRoot:m,SessionStorageUri:c+d,LinkedInSignInUri:c+f,LinkedInTokenUri:c+h,CutomerFacingBaseUrl:e.cutomerFacingBaseUrl,PartnerApiKey:e.partnerApiSubscriptionKey,AppPathRoot:"app",Routes:function(){return{ModalTemplate:l+"/app/common/templates/modal.html",PostalCodeInputTemplate:l+"/app/common/templates/postal-code-Input.html",CountrySelectionTemplate:l+"/app/common/templates/country-selector.html",ProgressTemplate:l+"/app/common/templates/progress-circle.html",StateSelectorTemplate:l+"/app/common/templates/state-selector.html",DatePickerTemplate:l+"/app/common/templates/date-picker.html",AlertTemplate:l+"/app/common/templates/alert.html",AlertStackTemplate:l+"/app/common/templates/alert-stack.html",AlertBand:l+"/app/common/templates/alert-band.html",Debug:"debug",Unauthorized:"unauthorized",Redirect:"redirect",Search:"/search",newExperience:"/53372425-03a8-4e1e-93eb-32f4c8d2ef03",PartnerDetails:"partnerdetails/:partner/:locationId",PersonalizationEngagementDetails:"/engagements/my/:engagementId",RequestForInformation:"/requestforinformation",SuggestionTemplate:l+"/app/common/templates/suggestions.html",PagingTemplate:l+"/app/common/templates/paging.html",SearchBarTemplate:l+"/app/common/templates/search-bar.html",PartnerNoLogo:l+"/Images/partner_no_logo.gif",SilverBadgeImage:l+"/Images/silverBadge.jpg",GoldBadgeImage:l+"/Images/goldBadge.jpg",EngagementArchived:l+"/Images/Engagement_Achieved.svg",EngagementEngaged:l+"/Images/Provider_Engaged.svg",EngagementWaiting:l+"/Images/Waiting_for_Response.svg",LinkedinBadgeImage:l+"/Images/In-2C-21px-R.png",LinkedinSignInImage:l+"/Images/Sign-In-Small---Default.png",HomePageImageFull:l+"/Images/OFC16_Conference_002-BLUE_Landing_page.jpg",PartnerDetailsPageTopImage:l+"/Images/pdptopimage.jpg",ConnectWithPartnersImage:l+"/Images/HomePageConnectImage.jpg",SaveTimeandMoneyImage:l+"/Images/HomePageSaveTimeImage.jpg",AccelerateBusinessImage:l+"/Images/HomePageAccelerateImage.jpg",RequestForInformationTopImage:l+"/Images/rfitopimage.jpg",HeroImage:l+"/Images/OFC16_Conference_002-BLUE_Landing_page-1920.jpg",CreateEngagement:"/engagements/create",EngagementList:"/engagements",EngagementDetails:"/engagements/:engagementId",PublishingList:"businessprofiles/list",CreateListingTaggingExperience:"businessprofiles/:country",EditListingtaggingExperience:"businessprofiles/:country/:listingId",ReferralsExitInterviewModal:l+"/app/referrals/ReferralsExitInterviewModal.html",ReferralsQueueTemplate:l+"/app/referrals/ReferralsQueuePartialPage.html",ReferralsDetails:"manage/request/:referralrequestid",ReferralsManagement:"manage",ReferralsWon:"manage/won/:referralrequestid"}}(),GenerateAppTokenRoot:"apptoken/get",SuggestionsConstants:function(){if(e.suggestionsSettings)return{CategorySearchProduct:"Search_Products",CategorySearchPartnerTag:"Search_PartnerTags",CategorySearchIndustryFocus:"Search_IndustryFocus",CategorySearchServiceType:"Search_ServiceType",CategoryDefaultSuggestion:"Default_Suggestion",SearchSuggestionsText:"@search.text",Category:"category",Key:"key",ProductLabel:"localizedResources.Suggestions_ProductLabel",PartnerTagLabel:"localizedResources.Suggestions_PartnerTagLabel",IndustryFocusLabel:"localizedResources.Suggestions_IndustryFocusLabel",ServiceTypeLabel:"localizedResources.Suggestions_ServiceTypeLabel",DefaultPreLabel:"localizedResources.Suggestions_DefaultPreLabel",DefaultPostLabel:"localizedResources.Suggestions_DefaultPostLabel",ProdDataIndexName:e.suggestionsSettings.PpeProdSuggestionsIndexName,DefaultIndexName:e.suggestionsSettings.SuggestionsIndexName,Endpoint:e.suggestionsSettings.SuggestionsEndPoint,IndexKey:e.suggestionsSettings.SuggestionsIndexKey}}(),ContentPrefix:l,RoutePrefix:c,InstrumentationConstants:t(),GetBingMapsDetails:function(){return{Url:"https://dev.virtualearth.net/REST/v1/Locations?",Key:"AnbwFIOcJPbOc-pNYJOEiX3GfFjXmMg_EPZ3r8s6vuRQMhFR72gRE5FA8VqnLKPD"}}(),DomainDataKeys:function(){return{OrganizationSize:"OrganizationSize",IndustryFocus:"IndustryFocus",Products:"Products",ServiceType:"ServiceType"}}(),RankingContext:function(){return{DefaultRankingContext:"Microsoft"}}(),CountryInformation:n,AppAuthenticatedEndpoints:function(){return[o,u,g,d,h,f]}(),Regex:function(){return{PhoneRegex:"^((\\()?[+]?(d|\\-|\\(|\\)|\\.|\\s)*(\\d|\\-|\\(|\\)|\\.|\\s)+(\\d|\\-|\\(|\\)|\\.)*)$",EmailRegex:"^(?!^[.])([-'a-zA-Z0-9_]+\\.)*[-'a-zA-Z0-9_]+@(?!\\.+)([-a-zA-Z0-9]+\\.)+[a-zA-Z]{2,}$",SpecialCharacters:/[!@#$%^&*.,\/\\\[\]\{\}~`_\-\(\)\<\>\?=\+]/g}}(),TagLabels:function(){return{ProductLabel:"localizedResources.Tags_ProductLabel",PartnerTagLabel:"localizedResources.Tags_PartnerTagLabel",IndustryFocusLabel:"localizedResources.Tags_IndustryFocusLabel",ServiceTypeLabel:"localizedResources.Tags_ServiceTypeLabel"}}(),TagCategories:function(){return{Product:"Search_Products",PartnerTag:"Search_PartnerTags",IndustryFocus:"Search_IndustryFocus",ServiceType:"Search_ServiceType",Default:"Default"}}(),SearchTrackingIdKeyforCache:"searchTrackingIdKey",SearchCacheId:"partnerFinderSearchKeywords",SearchResultIdForCache:"searchResults",PartnersListKeyInSearchResult:"partnersList",NextLinkKeyInSearchResult:"nextLink",KeyCodes:function(){return{RETURNKEY:13,UPARROW:38,DOWNARROW:40}}(),CompetencyLevel:function(){return{None:"None",Gold:"Gold",Silver:"Silver"}}(),ExternalLinks:function(){return{CreateMarketingProfile:"https://go.microsoft.com/fwlink/?linkid=838397",AutoEndorsementHelpLink:"https://go.microsoft.com/fwlink/?linkid=847631",LinkedInProfilePageLink:"https://business.linkedin.com/marketing-solutions/company-pages"}}(),LinkedInAuthorizationEndpointFormat:"https://www.linkedin.com/oauth/v2/authorization?response_type=code&scope=r_basicprofile%20r_emailaddress&client_id={0}&redirect_uri={1}&state={2}",LinkedInSignInUriSegment:c+"/linkedincallback",LinkedInSignOutUriSegment:c+"/api/linkedin/signout",Flights:function(){return{LinkedInFlight:"PartnerFinderLinkedInFlight"}}(),ReferralStatus:function(){return{None:"none",New:"new",Acknowledged:"acknowledged",Skipped:"skipped",Missed:"missed",Accepted:"accepted",Declined:"declined",Expired:"expired",Won:"won",Lost:"lost"}}(),EngagementStatuses:function(){return{None:"none",New:"new",Acknowledged:"acknowledged",Skipped:"skipped",Missed:"missed",Accepted:"accepted",Declined:"declined",Expired:"expired",Won:"won",Lost:"lost"}}(),Personas:function(){return{LinkedInUser:"LinkedInUser",AgentUser:"AgentUser",None:"None"}}(),RatingKeys:function(){return{EaseRating:1,ResponsivenesRating:2,ExpertiseRating:3,QualityRating:4,ValueRating:5,ReuseRating:6,RecommendRating:7}}(),MetricNames:function(){return{SuccessfulLinkedInSignIn:"SuccessfulLinkedInSignIn",FailedLinkedInSignIn:"FailedLinkedInSignIn",SuccessfulPersonalizationGet:"SuccessfulPersonalizationGet",FailedPersonalizationGet:"FailedPersonalizationGet",SuccessfulPersonalizationEngagementGet:"SuccessfulPersonalizationEngagementGet",FailedPersonalizationEngagementGet:"FailedPersonalizationEngagementGet",SuccessfulPersonalizationEngagementDelete:"SuccessfulPersonalizationEngagementDelete",FailedPersonalizationEngagementDelete:"FailedPersonalizationEngagementDelete",SuccessfulLinkedInRFIPopulation:"SuccessfulLinkedInRFIPopulation",FailedLinkedInRFIPopulation:"FailedLinkedInRFIPopulation",SuccessfulLinkedInRFICreate:"SuccessfulLinkedInRFICreate",FailedLinkedInRFICreate:"FailedLinkedInRFICreate",SuccessfulPersonalizationUpdate:"SuccessfulPersonalizationUpdate",FailedPersonalizationUpdate:"FailedPersonalizationUpdate"}}()}}angular.module("app").constant("ConstantsData",e)}(),function(){function e(){return{TraceTypes:function(){return{Information:"Information",Warning:"Warning",Error:"Error"}}(),TraceTags:function(){return{Exception:"Exception",Referrer:"Referrer",IncomingRoute:"IncomingRoute",HttpRequest:"HttpRequest",HttpResponse:"HttpResponse"}}(),ClientEvents:function(){return{SuggestionsClicked:"SuggestionsClicked",PartnerDetailsPageBackButton:"PartnerDetailsPageBackButton",PartnerDetailsPageContactButton:"PartnerDetailsPageContactButton",PartnerDetailsPageWebsiteLink:"PartnerDetailsPageWebsiteLink",PartnerDetailsPageDeepLink:"PartnerDetailsPageDeepLink",LandingPageSearchButtonClicked:"LandingPageSearchButtonClicked",RequestForInformationPageSubmit:"RequestForInformationPageSubmit",RequestForInformationPageCancel:"RequestForInformationPageCancel",SearchPageContactPartnerButtonClicked:"SearchPageContactPartnerButtonClicked",SearchPagePartnerDetailsLink:"SearchPagePartnerDetailsLink",SearchPageLinkedInUrlClicked:"SearchPageLinkedInUrlClicked",PartnerDetailsPageLinkedInUrlClicked:"PartnerDetailsPageLinkedInUrlClicked",SearchPageContactPartnerContextMenuItemClicked:"SearchPageContactPartnerContextMenuItemClicked",ReviewPageLanded:"ReviewPageLanded",ReviewPageSubmit:"ReviewPageSubmit"}}(),ClientControlIds:function(){return{SuggestionsClicked:"Suggestions_Clicked",PartnerDetailsPageBackButton:"Partner_Details_Page_Back_Button",PartnerDetailsPageContactButton:"Partner_Details_Page_Contact_Button",PartnerDetailsPageWebsiteLink:"Partner_Details_Page_Website_Link",PartnerDetailsPageDeepLink:"Partner_Details_Page_Deep_Link",LandingPageSearchButtonClicked:"SearchPage_SearchButton_Clicked",RequestForInformationPageSubmit:"Request_For_Information_Page_Submit",RequestForInformationPageCancel:"Request_For_Information_Page_Cancel",SearchPageContactPartnerButtonClicked:"SearchPage_ContactPartnerButton_Clicked",SearchPagePartnerDetailsLink:"SearchPage_PartnerDetails_Link",SearchPageLinkedInUrlClicked:"SearchPage_LinkedIn_Url_Clicked",PartnerDetailsPageLinkedInUrlClicked:"PartnerDetailsPage_LinkedIn_Url_Clicked",SearchPageContactPartnerContextMenuItemClicked:"SearchPage_ContactPartnerContextMenuItem_Clicked"}}()}}angular.module("app").constant("InstrumentationConstants",e)}(),function(){function e(e,t,n,r,a){return e(t,n,r,a)}angular.module("app").factory("Constants",e),e.$inject=["ConstantsData","settings","InstrumentationConstants","countryInformation","sessionContext"]}(),function(){function e(e,t){function n(e,t){return-1!==e.indexOf(t,e.length-t.length)}function r(e,t){for(;e[e.length-1]===t;)e=e.substr(0,e.length-1);return e}function a(e){return!e||!e.trim()}function o(e){e.splice(0,e.length)}function s(e,t){return e.indexOf(t)>=0}function l(e,t){var n="";return t=t||", ",$.each(e,function(e,r){a(r)||(n+=r+t)}),n.slice(0,n.length-t.length)}function c(e){return void 0===e||null===e}function u(){var e=[];for(e[14]="4",e[8]=e[13]=e[18]=e[23]="-",e[19]="x",i=0;i<36;i++){var t=Math.floor(16*Math.random());e[i]?"x"===e[i]&&(e[i]=63&t,e[i]=8|e[i],e[i]=e[i].toString(16)):e[i]=t.toString(16)}return customGuid=e.join(""),customGuid}function g(e){var t="";if(e){t="?";var n=Object.keys(e).sort();for(i=0;i<n.length;++i){var a=n[i],o=e[a];c(o)||("object"==typeof o&&(o=JSON.stringify(o)),t+=a+"="+encodeURIComponent(o)+"&")}t=r(t,"&"),t=r(t,"?")}return t}function d(){return{"X-XSRF-Token":angular.element('input[name="__RequestVerificationToken"]').attr("value")}}function m(e){var t=angular.element(document.getElementById(e));return t?t.text():""}function p(e,t){t||(t=new Date);var n=e.getTime();return(t.getTime()-n)/864e5}function f(){return window.location.pathname+window.location.search}function h(e){if(e&&13===e.which||13===e.keyCode)return!0}function v(e,t){return t?"0001-01-01T00:00:00"===t?"":(currentDate=new Date(t),currentDate.toLocaleDateString(e)):t}function S(){var n=u();return(t.get(e.SearchCacheId)||t(e.SearchCacheId)).put(e.SearchTrackingIdKeyforCache,n),n}return{String:{endsWith:n,trimTrailing:r,isNullOrWhitespace:a},DateTime:{dateTimeGetDaysDelta:p,convertDateToLocaleFormat:v},Array:{clear:o,contains:s,toDelimitedString:l},isNullOrUndefined:c,generateGuid:u,buildQueryString:g,getXsrfHeader:d,getTextByElementId:m,getCurrentPageFullRelativeUrl:f,isEnterKey:h,createSearchTrackingIdInCache:S}}angular.module("common").factory("Helpers",e),e.$inject=["Constants","$cacheFactory"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c){n.showProgressRing(!0,!0);var u=this;if(u.reportGenerationTimestamp=new Date,e.referrer){var g=e.referrer.indexOf("?");u.referrer=g>0?e.referrer.substring(0,g):e.referrer}!function(){u.tracingDataAvailable=u.referrer&&"/"===u.referrer[0],u.tracingDataAvailable&&(u.traceTypes=c.InstrumentationConstants.TraceTypes,u.traceTags=c.InstrumentationConstants.TraceTags,u.traces=o.getTraces(),angular.forEach(u.traces,function(e){if(e.tags){var t=e.tags.toLocaleLowerCase();if("httprequest"===t||"httpresponse"===t){var n=angular.fromJson(e.entry);n.correlationId&&(e.correlationId=n.correlationId)}else e.correlationId="NA"}}),u.prevPageSnapshot=o.getPreviousPageSnapshot()||{},u.trustedPageSource=t.trustAsHtml(u.prevPageSnapshot.source))}(),function(){u.buildId=r.getBuildId(),u.sessionId=r.getSessionId(),u.correlationId=r.getCorrelationId(),u.tenantId=r.getTenantId(),u.aadPartnerType=r.getAadPartnerType(),u.accountRoles=l.Array.toDelimitedString(r.getAccountRoles()),u.roles=l.Array.toDelimitedString([r.getAgentRoleName(),r.getAdministratorRoleName()]),u.locale=r.getLocale(),u.timezoneOffset=u.reportGenerationTimestamp.getTimezoneOffset(),u.claims=r.getActiveClaims(),u.flights=r.getFlights()}(),function(){u.navigatorProperties=[];for(var e in i.navigator){var t=i.navigator[e];t&&"object"!=typeof t&&"function"!=typeof t&&(e=e.charAt(0).toUpperCase()+e.substr(1),u.navigatorProperties.push({id:e,value:t}))}u.navigatorProperties.push({id:"StorageSupported",value:a.storageSupported})}(),setTimeout(function(){n.showProgressRing(!1),e.$digest()},0),u.generateFile=function(){var e=u.reportGenerationTimestamp,t="Spock_"+(e.getMonth()+1)+"-"+e.getDate()+"-"+e.getFullYear()+"_"+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()+".txt";s.saveAsTextFile(t,o.captureMarkup())},u.goBack=function(){i.history.back()}}angular.module("app").controller("debugPageController",e),e.$inject=["$rootScope","$sce","pageSvc","sessionContextSvc","localStorageSvc","tracingSvc","fileGenerationSvc","$window","Helpers","Constants"]}(),function(){function e(e,t,n,r,a,o){function s(){var e=a.redirectTarget();return!(!e||c)&&(a.redirectTarget(null),t.url(e),!0)}function i(){u?c?l(u):t.url(u):c?t.url(o.Routes.Unauthorized):t.url(o.Routes.NotFound)}function l(t){t&&"/"!=t[0]&&(t="/"+t),e.location.href=o.RoutePrefix+t}var c=r.authenticate,u=r.redirect;n(function(){t.replace(),s()||i()})}angular.module("app").controller("RedirectPageController",e),e.$inject=["$window","$location","$timeout","$routeParams","localStorageSvc","Constants"]}(),function(){function e(e){var t=this;t.header=e.get("localizedResources.UnauthorizedUserAccess_PageTitle"),t.message=e.get("localizedResources.UnauthorizedUserAccess_Title")}angular.module("app").controller("unauthorizedPageController",e),e.$inject=["resxSvc"]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.AlertBand,controller:t,controllerAs:"vm",bindToController:!0,link:n,scope:{title:"=",description:"=",onClosed:"=",actionlink:"=",actionlinkdescription:"="}}}function t(){}function n(e,t,n){n.onClosed&&t.children(0).children(0).on("closed.bs.alert",function(){e.vm.onClosed()})}angular.module("common").controller("alertBandController",t).directive("alertBand",e),e.$inject=["Constants"]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.AlertStackTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{}}}function t(e,t){var n=this,r=e.AlertTypes;n.trustAsHtml=t.trustAsHtml,n.getAlerts=e.getAlerts,n.getAlertCssClasses=function(e){var t="alert-info";switch(e.type){case r.Warning:t="alert-warning";break;case r.Error:t="alert-danger"}return e.showIcon?[t,"with-icon"]:t},n.getAlertIconCssClass=function(e){var t="win-icon-Info";switch(e.type){case r.Warning:case r.Error:t="win-icon-Warning"}return t},n.dismiss=function(t){e.removeAlert(t.id)}}angular.module("common").controller("alertStackController",t).directive("alertStack",e),e.$inject=["Constants"],t.$inject=["alertStackSvc","$sce"]}(),function(){function e(e){return{restrict:"E",transclude:!0,templateUrl:e.Routes.AlertTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{show:"="}}}function t(){}angular.module("common").controller("alertController",t).directive("alert",e),e.$inject=["Constants"],t.$inject=[]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.CountrySelectionTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{model:"=",callback:"=",valid:"=",isDisabled:"=",countryCodes:"=",tooltipLabel:"=",tooltipText:"=",isCountryRequired:"="}}}function t(e,t,n){var r=this;if(r.countryRequired=t.get("localizedResources.Validation_CountryRequired"),r.selectedItem={key:r.model},r.countryList=[],e.$watch("vm.model",function(){var e=!1;$.each(r.countryList,function(t,n){if(n.key===r.model)return r.selectedItem=n,e=!0,!1}),e||(r.selectedItem=null)}),r.onChange=function(e){e&&(r.model=e.key),r.callback&&r.callback(e)},r.countryCodes&&r.countryCodes.length>0){var a=[];$.each(r.countryCodes,function(e,t){a.push({key:t,value:n.getCountryName(t)})})}else var a=n.getCountryList();if(a&&a.length>0){var o=Object.keys(a).map(function(e){return[e,a[e]]});o.sort(function(e,t){return e[1].value<t[1].value?-1:e[1].value>t[1].value?1:0}),angular.forEach(o,function(e){r.countryList.push({key:e[1].key,value:e[1].value})})}}angular.module("common").controller("countrySelectorController",t).directive("countrySelector",e),e.$inject=["Constants"],t.$inject=["$scope","resxSvc","countryInformationSvc"]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.DatePickerTemplate,controller:t,controllerAs:"vm",bindToController:!0,link:n,scope:{date:"=?",datePickerLabel:"=",isDateRequired:"=",datePickerMinDate:"="}}}function t(e){var t=this,n=e.get;t.defaultDate=n("localizedResources.RFI_Page_DefaultDateFormat")}function n(e,t,n){t.find(".month-calendar input").datepicker({showOtherMonths:!0,minDate:e.vm.datePickerMinDate,dateFormat:"mm/dd/yy",beforeShow:function(){angular.element("#ui-datepicker-div").addClass("month-calendar-widget")}})}angular.module("common").controller("datePickerController",t).directive("datePicker",e),e.$inject=["Constants"],t.$inject=["resxSvc"]}(),function(){function e(e){var t=/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/\d{4}$/;return{restrict:"A",require:"ngModel",scope:{minDate:"=",dateRegex:"="},link:function(n,r,a,o){o.$parsers.unshift(function(r){n.dateRegex&&(t=n.dateRegex);var a=new Date(r),s=!0;return e.String.isNullOrWhitespace(r)||(s=n.minDate?t.test(r)&&a>=n.minDate.setHours(0,0,0,0):t.test(r)),o.$setValidity("date",s),r})}}}angular.module("common").directive("dateValidator",e),e.$inject=["Helpers"]}(),function(){function e(e){return{restrict:"A",scope:{fileReader:"=",maxFileSize:"="},link:function(t,n,r){n.bind("change",function(n){var a=new FileReader;if(a.onload=function(e){t.$apply(function(){t.fileReader=e.target.result})},r.accept&&$.inArray(n.target.files[0].type,r.accept.split(","))<0)alert(e.get("localizedResources.FileUpload_Type_Invalid").replace("{0}",n.target.files[0]).replace("{1}",r.accept));else{if(!t.maxFileSize)throw"Max file size is missing. Please include a value for the max-file-size attribute.";var o=(n.target.files[0].size/1048576).toFixed(2);o>t.maxFileSize?alert(e.get("localizedResources.FileUpload_Size_Error").replace("{0}",t.maxFileSize).replace("{1}",o)):a.readAsDataURL(n.target.files[0])}})}}}angular.module("common").directive("fileReader",e),e.$inject=["resxSvc"]}(),function(){function e(){var e=/^[\-\+]?\d+$/,t={sbyte:{min:-128,max:127},byte:{min:0,max:255},short:{min:-32768,max:32767},ushort:{min:0,max:65535},int:{min:-2147483648,max:2147483647},uint:{min:0,max:4294967295},long:{min:-0x8000000000000000,max:0x8000000000000000},ulong:{min:0,max:0x10000000000000000}};return{restrict:"A",require:"ngModel",link:function(n,r,a,o){o.$validators.integer=function(n,r){if(o.$isEmpty(n))return!0;if("-"===r||"+"===r)return n=0,!0;if(e.test(r)){if(a.integerValidator){if(t[a.integerValidator]){var s=t[a.integerValidator],i=parseInt(r);return i>=s.min&&i<=s.max}throw"Directive integer-validator does not recognize '"+a.integerValidator+"' as a valid integer type."}return!0}return!1}}}}angular.module("common").directive("integerValidator",e),e.$inject=[]}(),function(){function e(e){function n(e,t){e.vm.element=t,e.$watch("vm.getConfiguration()",function(){e.vm.getConfiguration()?(e.vm.getConfiguration().items&&e.vm.getConfiguration().items.length>0&&(e.vm.selectedItemId=e.vm.getConfiguration().items[0].id),$("#modal").modal("show"),t.find("#leftButton").focus()):($("#modal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove())})}return{restrict:"E",templateUrl:e.Routes.ModalTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{},link:n}}function t(e){function t(t){e.dispose(),t&&t(n.selectedItemId)}var n=this;n.selectedItemId=null,n.getConfiguration=e.getConfiguration,n.hasLeftButton=function(){var e=n.getConfiguration();return e.primaryButtonText&&e.secondaryButtonText},n.getLeftButtonText=function(){if(n.hasLeftButton()){return n.getConfiguration().primaryButtonText}},n.getRightButtonText=function(){var e=n.getConfiguration();return n.hasLeftButton()?e.secondaryButtonText:e.primaryButtonText||e.secondaryButtonText},n.executeLeftButtonClick=function(){if(n.hasLeftButton()){t(n.getConfiguration().primaryButtonCallback)}},n.executeRightButtonClick=function(){var e=n.getConfiguration(),r=e.secondaryButtonCallback;n.hasLeftButton()||(r=e.primaryButtonText?e.primaryButtonCallback:e.secondaryButtonText?e.secondaryButtonCallback:null),t(r)},n.tabKeyOnRightButtonClick=function(e){e.ctrlKey||e.altKey||!(e&&9===e.which||9===e.keyCode)||(n.element.find("#leftButton").focus(),e.preventDefault())},n.tabShiftKeyOnRightButtonClick=function(e){e.shiftKey&&(e&&9===e.which||9===e.keyCode)&&(n.element.find("#rightButton").focus(),e.preventDefault())}}angular.module("common").controller("modalController",t).directive("modal",e),e.$inject=["Constants"],t.$inject=["modalSvc"]}(),function(){function e(e){var t=/^\s*(\d{0,15}|(\d{1,15}(\.\d{0,2})))$\s*/,n=/^\s*(\d{0,15}|(\d{1,15}(\.\d{0,3})))$\s*/,r=/^\s*(\d{0,15}|(\d{1,15}(\.\d{0,4})))$\s*/;return{restrict:"A",require:"ngModel",scope:{precision:"="},link:function(a,o,s,i){i.$parsers.unshift(function(s){function l(){if(i.$valid&&i.$modelValue){var e=parseFloat(i.$modelValue).toFixed(a.precision);i.$viewValue=e,i.$commitViewValue(),i.$render()}}var c;c=4===a.precision?r:3===a.precision?n:t;var u=!0;return e.String.isNullOrWhitespace(s)||(u=c.test(s)),i.$setValidity("moneyAmount",u),o.bind("blur",l),s})}}}angular.module("common").directive("moneyAmountValidator",e),e.$inject=["Helpers"]}(),function(){function e(e){return{restrict:"E",transclude:!0,templateUrl:e.Routes.PagingTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{fetchFirstPageItems:"=",fetchPreviousPageItems:"=",fetchNextPageItems:"=",fetchLastPageItems:"=",resetId:"="}}}function t(e,t,n){function r(e){if(o.isFetchingItems=!0,!e||"function"!=typeof e)throw a(),"The triggered callback function was not provided for directive 'paging'.";e().then(function(e){e?(s=!0,o.isOnFirstPage=e.isOnFirstPage,o.isOnLastPage=e.isOnLastPage):a()}).catch(function(){a()}).finally(function(){o.isFetchingItems=!1})}function a(){s=!1,o.isOnFirstPage=null,o.isOnLastPage=null}var o=this,s=!1;o.firstLabel=n.get("localizedResources.ListPaging_First"),o.lastLabel=n.get("localizedResources.ListPaging_Last"),o.previousLabel=n.get("localizedResources.ListPaging_Previous"),o.nextLabel=n.get("localizedResources.ListPaging_Next"),o.hideAll=function(){return!s},o.hidePaging=function(){return o.isOnFirstPage&&o.isOnLastPage||!o.showFirstAndLastButtons()&&!o.showPreviousAndNextButtons()&&!o.showFirstAndNextButtons()},o.showFirstAndLastButtons=function(){return o.fetchLastPageItems},o.showPreviousAndNextButtons=function(){return o.fetchPreviousPageItems&&o.fetchNextPageItems},o.showFirstAndNextButtons=function(){return o.fetchFirstPageItems&&o.fetchNextPageItems},o.onFirstClicked=function(){r(o.fetchFirstPageItems)},o.onLastClicked=function(){r(o.fetchLastPageItems)},o.onPreviousClicked=function(){r(o.fetchPreviousPageItems)},o.onNextClicked=function(){r(o.fetchNextPageItems)},e.$watchGroup(["vm.resetId"],o.onFirstClicked),o.getFirstPageLinkTabIndex=function(){if(o.isOnFirstPage)return-1},o.getLastPageLinkTabIndex=function(){if(o.isOnLastPage)return-1}}angular.module("common").controller("pagingController",t).directive("paging",e),e.$inject=["Constants"],t.$inject=["$scope","$q","resxSvc"]}(),function(){function e(e,t){return{restrict:"A",require:"ngModel",scope:{countryCode:"="},link:function(n,r,a,o){function s(e){var t=!0;if(e&&""!=e.trim()&&i&&i.phoneNumberRegex){t=new RegExp(i.phoneNumberRegex).test(e)}return o.$setValidity("phoneNumber",t),t?e:void 0}var i=null;n.$watch("countryCode",function(){if("string"!=typeof n.countryCode||0===n.countryCode.trim().length)return i=null,!0;e.get(n.countryCode).then(function(e){i=e,s(r.val())}).catch(function(e){
return t.traceError("PhoneNumber vaidator failed fetching country information. Country code: "+n.countryCode+". Error: "+e),i=null,!0})}),o.$parsers.unshift(function(e){return s(e)})}}}angular.module("common").directive("phoneNumberValidator",e),e.$inject=["countryInformationSvc","tracingSvc"]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.PostalCodeInputTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{model:"=",callback:"=",valid:"=",countryCode:"=",isDisabled:"=",maxLength:"="}}}function t(e,t){var n=this;n.validationParameters={},n.postalCodeText=t.get("localizedResources.AllView_PostalCodeLabel")}angular.module("common").controller("postalCodeInputController",t).directive("postalCodeInput",e),e.$inject=["Constants"],t.$inject=["$scope","resxSvc"]}(),function(){function e(e,t){return{restrict:"A",require:"ngModel",scope:{countryCode:"=",validationParameters:"=",validateModel:"="},link:function(n,r,a,o){function s(e){var t=!0;if(e&&""!=e.trim()){if(i&&i.postalCodeRegex){var r=new RegExp(i.postalCodeRegex);t=r.test(e)}}else i&&i.isPostalCodeRequired&&(t=!1);return n.validationParameters&&i&&(n.validationParameters.isPostalCodeRequired=i.isPostalCodeRequired,n.validationParameters.postalCodeRegex=i.postalCodeRegex),o.$setValidity("postalCode",t),t?e:void 0}var i=null;n.$watch("countryCode",function(){if("string"!=typeof n.countryCode||0===n.countryCode.trim().length)return!0;e.get(n.countryCode).then(function(e){i=e,s(r.val())}).catch(function(e){return t.traceError("PostalCode vaidator failed fetching country information. Country code: "+n.countryCode+". Error: "+e),!0})}),n.$watch("validateModel",function(){return s(n.validateModel)}),o.$parsers.unshift(function(e){return s(e)})}}}angular.module("common").directive("postalCodeValidator",e),e.$inject=["countryInformationSvc","tracingSvc"]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.ProgressTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{block:"=",message:"="}}}function t(){var e=this;e.indicators=[];for(var t=0;t<5;++t)e.indicators.push("indicator-"+(t+1))}angular.module("common").controller("progressCircleController",t).directive("progressCircle",e),e.$inject=["Constants"],t.$inject=[]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.SearchBarTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{compactSearchBar:"=",searchCriteriaOnChange:"=",isSkipLocation:"="}}}function t(e,t,n,r,a,o,s,i,l){function c(){function e(){l(function(){var e={maxResults:5};new Microsoft.Maps.AutosuggestManager(e).attachAutosuggest("#locationName","#searchBoxContainer",n)})}function t(){l(function(){m.showLocationProgress=!1})}function n(e){m.searchRequestUXModel.locationName=e.formattedSuggestion,m.searchRequestUXModel.latitude=e.location.latitude,m.searchRequestUXModel.longitude=e.location.longitude,m.locationOnChangeCallback()}Microsoft.Maps.loadModule("Microsoft.Maps.AutoSuggest",{callback:e,errorCallback:t,credentials:"AnbwFIOcJPbOc-pNYJOEiX3GfFjXmMg_EPZ3r8s6vuRQMhFR72gRE5FA8VqnLKPD"})}function u(){m.showLocationProgress=!0,navigator.geolocation&&navigator.geolocation.getCurrentPosition(g,d)}function g(e){m.searchRequestUXModel.geoRadius=m.locationDistanceList[0].id,m.searchRequestUXModel.latitude=e.coords.latitude,m.searchRequestUXModel.longitude=e.coords.longitude;var t="Auto detecting location ";m.cacheId&&(t+=m.cacheId),a.traceInfo(t),$.ajax({url:"https://dev.virtualearth.net/REST/v1/Locations/"+m.searchRequestUXModel.latitude+","+m.searchRequestUXModel.longitude,dataType:"jsonp",jsonp:"jsonp",data:{key:"AnbwFIOcJPbOc-pNYJOEiX3GfFjXmMg_EPZ3r8s6vuRQMhFR72gRE5FA8VqnLKPD",inclnb:1,include:"ciso2",includeEntityTypes:"Neighborhood"},success:function(e){e&&200!==e.statusCode?l(function(){a.traceWarning("error getting auto detect country information")}):e&&e.resourceSets&&e.resourceSets.length>0&&e.resourceSets[0].resources&&e.resourceSets[0].resources.length>0&&e.resourceSets[0].resources[0].address?(e.resourceSets[0].resources[0].address.neighborhood&&(m.searchRequestUXModel.locationName=e.resourceSets[0].resources[0].address.neighborhood),e.resourceSets[0].resources[0].address.locality&&(m.searchRequestUXModel.locationName?m.searchRequestUXModel.locationName=m.searchRequestUXModel.locationName.concat(", ").concat(e.resourceSets[0].resources[0].address.locality):m.searchRequestUXModel.locationName=e.resourceSets[0].resources[0].address.locality),e.resourceSets[0].resources[0].address.countryRegionIso2&&(m.searchRequestUXModel.selectedCountryCode.countryCode=e.resourceSets[0].resources[0].address.countryRegionIso2),e.resourceSets[0].resources[0].address.countryRegion&&(m.searchRequestUXModel.locationName?m.searchRequestUXModel.locationName=m.searchRequestUXModel.locationName.concat(", ").concat(e.resourceSets[0].resources[0].address.countryRegion):m.searchRequestUXModel.locationName=e.resourceSets[0].resources[0].address.countryRegion),e.resourceSets[0].resources[0].address.postalCode&&(m.searchRequestUXModel.locationName?m.searchRequestUXModel.locationName=m.searchRequestUXModel.locationName.concat(", ").concat(e.resourceSets[0].resources[0].address.postalCode):m.searchRequestUXModel.locationName=e.resourceSets[0].resources[0].address.postalCode),l(function(){m.locationOnChangeCallback()})):l(function(){d()})},error:function(){l(function(){d()})}})}function d(){l(function(){a.traceWarning("Unable to get auto detect country information")})}var m=this,p=n.get;m.isSkipLocation=!0,m.searchCriteriaText=p("localizedResources.SearchBar_SearchCriteriaText"),m.countrySearchText=p("localizedResources.SearchBar_CountrySearchText"),m.organizationSearchText=p("localizedResources.SearchBar_OrganizationSearchText"),m.organizationSizeDefault=p("localizedResources.OrganizationSize_DefaultText"),m.keywordPlaceholder=p("localizedResources.SearchBar_keywordDefaultPlaceholder"),m.searchRequestUXModel=o.getSearchRequestUXModel(),m.keyEvent=null,m.SearchBarButtonText=p("localizedResources.SearchBarButtonText"),m.isSearchButtonEnabled=!1,m.isAddKeyword=!1,m.isBingMapControlDownloaded=!1,$(document).ready(function(){$(".searchBarSeparator").css("height",$(".searchBar").css("height"))}),$("#Search_div").bind("change",function(){var e=parseInt(jQuery("#locationDivID").css("margin-left"),10)+parseInt(jQuery("#locationDivID").css("margin-right"),10)+parseInt(jQuery("#locationDivID").css("margin-top"),10)+parseInt(jQuery("#locationDivID").css("margin-bottom"),10),t=parseInt(jQuery("#suggestionDivID").css("margin-left"),10)+parseInt(jQuery("#suggestionDivID").css("margin-right"),10)+parseInt(jQuery("#suggestionDivID").css("margin-top"),10)+parseInt(jQuery("#suggestionDivID").css("margin-bottom"),10);locationDivID.offsetHeight+e>suggestionDivID.offsetHeight+t?($(".searchBarSeparator").css("height",locationDivID.offsetHeight+e),$(".GoCompact").css("height",locationDivID.offsetHeight+e),$(".GoCompactEnabled").css("height",locationDivID.offsetHeight+e)):($(".searchBarSeparator").css("height",suggestionDivID.offsetHeight+t),$(".GoCompact").css("height",suggestionDivID.offsetHeight+t),$(".GoCompactEnabled").css("height",suggestionDivID.offsetHeight+t))}),e.$watch("vm.searchRequestUXModel.displayTags",function(){m.setPlaceHolderText(),setTimeout(function(){try{$("#Search_div").trigger("change")}catch(e){}},0)}),e.$watch("vm.isSkipLocation",function(){m.isSkipLocation||u()}),null==m.searchRequestUXModel.showCountryCodeFilter&&(m.searchRequestUXModel.showCountryCodeFilter=!0),m.searchRequestUXModel&&m.searchRequestUXModel.organizationSize&&(m.organizationSize=m.searchRequestUXModel.organizationSize);var f=t.KeyCodes,h=r.ParametersManager;m.paramManager=new h,m.paramManager.readAllDebugFlags(),m.includeTestParam=m.paramManager.get("includeTest").value(),m.testOnlyParam=m.paramManager.get("testOnly").value(),m.prodData=m.paramManager.get("prodResults").value(),m.searchRequestReference={};var v=r.Parameter,S=new v("cacheId");new h([S]).read(),m.cacheId=S.value(),m.locationDistanceList=[{id:"1000",name:p("localizedResources.AllView_1000")+" "+p("localizedResources.FindPartner_Miles")},{id:"500",name:p("localizedResources.AllView_500")+" "+p("localizedResources.FindPartner_Miles")},{id:"100",name:p("localizedResources.AllView_100")+" "+p("localizedResources.FindPartner_Miles")}],m.default_Dropdown_Radius=p("localizedResources.Partner_Default_Dropdown_Radius"),m.locationOptionList=[{id:!0,name:p("localizedResources.SearchBar_CountrySearchText")},{id:!1,name:p("localizedResources.FindPartner_SearchByDistance_Title")}],m.keyword="",m.hasFocus=!1;var y=[new SuggestionCategory(t.SuggestionsConstants.CategorySearchProduct,"2","",p(t.SuggestionsConstants.ProductLabel)),new SuggestionCategory(t.SuggestionsConstants.CategorySearchServiceType,"2","",p(t.SuggestionsConstants.ServiceTypeLabel)),new SuggestionCategory(t.SuggestionsConstants.CategorySearchIndustryFocus,"1","",p(t.SuggestionsConstants.IndustryFocusLabel)),new SuggestionCategory(t.SuggestionsConstants.CategorySearchPartnerTag,"4","",p(t.SuggestionsConstants.PartnerTagLabel))];s.getGlobalDomainData(t.DomainDataKeys.OrganizationSize).then(function(e){m.OrganizationSizeOptions=e}).finally(function(){m.OrganizationSizeOptions||a.traceWarning("Unable to load company size data")});var R=new SuggestionCategory(t.SuggestionsConstants.CategoryDefaultSuggestion,"",p(t.SuggestionsConstants.DefaultPreLabel),p(t.SuggestionsConstants.DefaultPostLabel));m.suggestionsInput=new SuggestionsInput(y,R),m.handleSuggestionsOnClick=function(e,t){m.keyword="",o.handlePartnerSearchSuggestionsOnClick(e,t),m.evaluateSearchCall(),setTimeout(function(){try{$("#Search_div").trigger("change")}catch(e){}},0)},m.onSearchFocus=function(){m.hasFocus=!0},m.onLostSearchFocus=function(){m.keyword="",m.hasFocus=!1},m.removeSearchItem=function(e){delete m.searchRequestUXModel.displayTags[e],m.evaluateSearchCall(),setTimeout(function(){try{$("#Search_div").trigger("change")}catch(e){}},0)},m.disableSearch=function(){return 0===Object.keys(m.searchRequestReference).length},m.onKeyDown=function(e){switch(e.keyCode){case f.UPARROW:case f.DOWNARROW:case f.RETURNKEY:return m.keyEvent=e,e.preventDefault(),!1;default:return!0}},m.onCountryChange=function(e){m.searchRequestUXModel.selectedCountryCode.countryCode=null!=e?e.key:"",m.evaluateSearchCall()},m.onOrganizationSizeChanged=function(e){m.evaluateSearchCall()},m.locationOptionsOnChangeCallback=function(){m.isBingMapControlDownloaded||(i.downloadMapControl(),m.isBingMapControlDownloaded=!0),m.locationOnChangeCallback()},m.locationOnChangeCallback=function(){m.evaluateSearchCall(),$("#Search_div").trigger("change")},m.locationOnChangeKeyEvent=function(e){e&&13===e.which&&m.evaluateSearchCall()},m.clearSearchLocationName=function(){m.searchRequestUXModel.locationName=null,m.evaluateSearchCall()},m.evaluateSearchCall=function(){if(m.setPlaceHolderText(),m.compactSearchBar)m.searchCriteriaOnChange();else{var e=m.searchRequestUXModel.showCountryCodeFilter&&""!=m.searchRequestUXModel.selectedCountryCode.countryCode;Object.keys(m.searchRequestUXModel.displayTags).length>0&&e&&m.searchRequestUXModel.organizationSize?m.isSearchButtonEnabled=!0:m.isSearchButtonEnabled=!1}},m.setPlaceHolderText=function(){0!=Object.keys(m.searchRequestUXModel.displayTags).length?(m.isAddKeyword=!0,m.keywordPlaceholder=p("localizedResources.SearchBar_keywordPlaceholder"),$(".suggestionInputCompact").css("width","150px")):(m.isAddKeyword=!1,m.keywordPlaceholder=p("localizedResources.SearchBar_keywordDefaultPlaceholder"),$(".suggestionInputCompact").css("width","100%"))},m.goSearchPartners=function(){m.searchCriteriaOnChange()},bingGlobalCallback=c}angular.module("common").controller("searchBarController",t).directive("searchBar",e),e.$inject=["Constants"],t.$inject=["$scope","Constants","resxSvc","queryParametersSvc","tracingSvc","globalSearchRequestSvc","globalDomainDataSvc","bingMapsSvc","$timeout"]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.StateSelectorTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{model:"=",callback:"=",valid:"=",countryCode:"=",isDisabled:"=",maxLength:"="}}}function t(e,t,n,r){function a(){if(s.selectedItem={key:s.model},s.stateOptions=[],s.fetchingCountryData=!0,"string"!=typeof s.countryCode||0===s.countryCode.trim().length)return void(s.fetchingCountryData=!1);o(),n.get(s.countryCode).then(function(e){if(e){s.isStateRequired=e.isStateRequired;var t=e.statesFullNames?e.statesFullNames:n.getStatesFullNames(e);s.isStateRequired&&t&&t.length>0&&(r.traceInfo("Number of states for country code "+s.countryCode+" is returned from svc is "+t.length),s.stateOptions=s.stateOptions.concat(t))}}).catch(function(e){return r.traceError("State-selector failed fetching country information. Country code: "+s.countryCode+". Error: "+e),countryInformation=null,!0}).finally(function(){s.fetchingCountryData=!1,r.traceInfo("State selected value "+s.model)})}function o(){i[s.countryCode]=s.model}var s=this,i={};s.stateText=t.get("localizedResources.AllView_State"),s.stateRequired=t.get("localizedResources.AllView_SelectOption"),s.isStateRequired=!1,e.$watch("vm.countryCode",function(e,t){e!=t&&(s.model="string"==typeof e?i[e]||s.model:""),a()}),e.$watch("vm.model",function(){s.selectedItem={key:s.model}}),s.onChange=function(e){e&&(s.model=e.key),o(),s.callback&&s.callback(e)},a()}angular.module("common").controller("stateSelectorController",t).directive("stateSelector",e),e.$inject=["Constants"],t.$inject=["$scope","resxSvc","countryInformationSvc","tracingSvc"]}(),function(){function e(e){return{restrict:"E",templateUrl:e.Routes.SuggestionTemplate,controller:t,controllerAs:"vm",bindToController:!0,scope:{searchRequestKeyword:"=",hasFocus:"=",handleSuggestionsOnClick:"=",suggestionsInput:"=",includeTest:"=",testOnly:"=",keyEvent:"=",prodData:"="}}}function t(e,t,n,r){var a=this;a.searchSuggestions={},a.searchSuggestions.keyword="",a.searchSuggestions.results={},a.searchSuggestions.resultKeys=[],a.searchSuggestions.resultPreLabels={},a.searchSuggestions.resultPostLabels={},a.searchSuggestions.defaultPreLabel="",a.searchSuggestions.defaultPostLabel="",a.searchSuggestions.hasDefaultSuggestion=!1,a.searchSuggestions.defaultSuggestionCategory="",a.selected=0,a.highlightPreTag="<b>",a.highlightPostTag="</b>";var o=n.KeyCodes;e.$watch("vm.searchRequestKeyword",function(){if(a.suggestionsInput&&a.suggestionsInput.suggestionsCategories){if(0==a.searchSuggestions.resultKeys.length){for(var e=0;e<a.suggestionsInput.suggestionsCategories.length;e++){var t=a.suggestionsInput.suggestionsCategories[e],n=t.categoryName,r=t.preLabel,o=t.postLabel;a.searchSuggestions.resultKeys.push(n),a.searchSuggestions.resultPreLabels[n]=r,a.searchSuggestions.resultPostLabels[n]=o}null!=a.suggestionsInput.defaultSuggestionCategory&&(a.searchSuggestions.hasDefaultSuggestion=!0,a.searchSuggestions.defaultPreLabel=a.suggestionsInput.defaultSuggestionCategory.preLabel,a.searchSuggestions.defaultPostLabel=a.suggestionsInput.defaultSuggestionCategory.postLabel,a.searchSuggestions.defaultSuggestionCategory=a.suggestionsInput.defaultSuggestionCategory.categoryName)}if(a.searchSuggestions.keyword=a.searchRequestKeyword,a.ready=!1,a.timer&&clearTimeout(a.timer),a.timer=setTimeout(delayedSuggestion,100),""==a.searchSuggestions.keyword||!a.searchSuggestions.keyword)for(var e=0;e<a.suggestionsInput.suggestionsCategories.length;e++){var t=a.suggestionsInput.suggestionsCategories[e],n=t.categoryName;a.searchSuggestions.results[n]=[]}}}),e.$watch("vm.keyEvent",function(){if(null!=a.keyEvent&&a.ready)switch(a.keyEvent.keyCode){case o.UPARROW:a.selected=a.selected-1,a.selected<0&&(a.selected=0);break;case o.DOWNARROW:a.selected=a.selected+1,a.selected>a.totalResultSize()-1&&(a.selected=a.totalResultSize()-1);break;case o.RETURNKEY:a.searchSuggestions.hasDefaultSuggestion&&a.selected==a.totalResultSize()-1?a.handleSuggestionsOnClickDirectiveDefault():a.handleSuggestionsOnClickDirective(a.getSuggestionByTruePosition(a.selected));break;default:return}}),delayedSuggestion=function(){a.selected=0,a.getSuggestions(a.searchSuggestions.keyword)},a.getSuggestions=function(e){if(null!=e&&""!=e)for(var o=0;o<a.suggestionsInput.suggestionsCategories.length;o++){var s=a.suggestionsInput.suggestionsCategories[o],i=s.categoryName,l=s.numberResults;t.getSuggestions(e,i,l,a.includeTest,a.testOnly,r.locale,a.prodData).then(function(e){e&&e.originalKeyword==a.searchSuggestions.keyword&&(a.searchSuggestions.results[e.originalCategory]=convertSuggestions(e)),e.originalCategory==n.SuggestionsConstants.CategorySearchProduct&&(a.ready=!0)})}},convertSuggestions=function(e){var t=e.value,r=[];for(i=0;i<t.length;i++){var a=new SuggestionResult(getHighlightedText(t[i][n.SuggestionsConstants.SearchSuggestionsText],e.originalKeyword),t[i][n.SuggestionsConstants.Category],t[i][n.SuggestionsConstants.Key],e.originalKeyword,t[i][n.SuggestionsConstants.SearchSuggestionsText]);r.push(a)}return r},getHighlightedText=function(e,t){for(var n=getNormalizedString(t).trim(),r=e.split(" "),o=n.split(" "),s=!0,i=0;i<r.length;i++)if(""!==getNormalizedString(r[i])){var l=insertHighlightMiddleTag(r,o,i,0);if(l){0!=i&&(s=!1,r[i]=a.highlightPreTag+r[i]);break}}var c="";s&&(c+=a.highlightPreTag);for(var u=0;u<r.length;u++)c+=r[u],u!=r.length-1&&(c+=" ");return c},insertHighlightMiddleTag=function(e,t,n,r){var o=e[n],s=getNormalizedString(o),i=t[r],l=getNormalizedString(i);if(r>=t.length)return!0;if(n>=e.length)return!1;if(""===s)return insertHighlightMiddleTag(e,t,n+1,r);if(""===l)return insertHighlightMiddleTag(e,t,n,r+1);if(0==s.indexOf(l)){if(s===l&&r+1<t.length)return insertHighlightMiddleTag(e,t,n+1,r+1);var c=o.toUpperCase().indexOf(s),u="";return 0!=c&&(u=u+a.highlightPostTag+o.substring(0,c)+a.highlightPreTag),u=u+o.substring(c,c+l.length)+a.highlightPostTag+o.substring(c+l.length),e[n]=u,!0}return!1},getNormalizedString=function(e){return e.replace(n.Regex.SpecialCharacters,"").toUpperCase()},a.showOrHide=function(e){if(null!=e){var t=document.getElementById(e);if(null!=t&&t.offsetWidth<t.scrollWidth)return e}},a.handleSuggestionsOnClickDirective=function(e){for(var t=[],n=0;n<a.searchSuggestions.resultKeys.length;n++)for(var r=a.searchSuggestions.resultKeys[n],o=0;o<a.searchSuggestions.results[r].length;o++)t.push(a.searchSuggestions.results[r][o]);a.handleSuggestionsOnClick(e,t);for(var n=0;n<a.searchSuggestions.resultKeys.length;n++){var r=a.searchSuggestions.resultKeys[n];a.searchSuggestions.results[r]=[]}a.selected=-1},a.handleSuggestionsOnClickDirectiveDefault=function(){var e=new SuggestionResult(a.searchRequestKeyword,a.searchSuggestions.defaultSuggestionCategory,a.searchRequestKeyword,a.searchRequestKeyword,a.searchRequestKeyword);a.handleSuggestionsOnClickDirective(e)},a.truePosition=function(e,t){for(var n=0,r=0;r<e;r++)n+=a.searchSuggestions.results[a.searchSuggestions.resultKeys[r]].length;return n+=t},a.getSuggestionByTruePosition=function(e){for(var t=e,n=0;n<a.searchSuggestions.resultKeys.length;n++)for(var r=0;r<a.searchSuggestions.results[a.searchSuggestions.resultKeys[n]].length;r++){if(0==t)return a.searchSuggestions.results[a.searchSuggestions.resultKeys[n]][r];t-=1}return null},a.totalResultSize=function(){for(var e=0,t=0;t<a.searchSuggestions.resultKeys.length;t++)e+=a.searchSuggestions.results[a.searchSuggestions.resultKeys[t]].length;return a.searchSuggestions.hasDefaultSuggestion&&(e+=1),e}}angular.module("common").controller("suggestionsController",t).directive("suggestions",e),e.$inject=["Constants"],t.$inject=["$scope","suggestionsSvc","Constants","settings"]}(),function(){function e(e,t){function n(n,r,a){var o=e;if(n==t.InstrumentationConstants.TraceTypes.Information&&o.info(t.InstrumentationConstants.TraceTypes.Information+": "+r),n==t.InstrumentationConstants.TraceTypes.Warning&&o.warn(t.InstrumentationConstants.TraceTypes.Warning+": "+r),n==t.InstrumentationConstants.TraceTypes.Error){var s={id:a,type:n,entry:r};o.error(angular.toJson(s))}}return{traceToConsole:n}}angular.module("common").factory("consoleTraceDisplaySvc",e),e.$inject=["$log","Constants"]}(),function(){function e(e){function t(e,t,n,r,a){this.type=e,this.title=t,this.content=n,this.showIcon=r,this.timeout=a}function n(){return s}function r(t){t.id=++i,s.push(t),parseInt(t.timeout)&&e(function(){a(t.id)},t.timeout)}function a(t){$("#alert-stack #alert-"+t).alert("close"),e(function(){s=$.grep(s,function(e,n){return e.id!==t})},200)}function o(){var t=i;$("#alert-stack .alert").alert("close"),e(function(){s=$.grep(s,function(e,n){return e.id>t})},200)}var s=[],i=0;return{Alert:t,AlertTypes:{Info:"Info",Warning:"Warning",Error:"Error"},getAlerts:n,addAlert:r,removeAlert:a,clear:o}}angular.module("common").factory("alertStackSvc",e),e.$inject=["$timeout"]}(),function(){function e(e){return function(t,n,r,a){return e.getCurrency(n,t,r,a)}}function t(e){return function(t,n,r,a){return e.getDate(n,t,r,a)}}function n(e){return function(t,n,r){return e.getNumber(n,t,r)}}function r(e,t,n,r,a){function o(t){var n=e.defer();return t=t.toLowerCase(),$.getScript(a.ContentPrefix+"/js/bundled/angular-i18n/angular-locale_"+t+".js").done(function(e,r){var a=angular.injector(["app"]);c(a.get("$locale")),g(a,t,m),g(a,t,p),g(a,t,f),n.resolve()}).fail(function(){n.reject()}),n.promise}function s(e,t,n,r){return d(m,e,t,n,r)}function i(e,t,n,r){return d(p,e,t,n,r)}function l(e,t,n){return d(f,e,t,n)}function c(e){e.id}function u(e){var a=n(e),o=t(e);a.put(r.id.toLowerCase().trim(),o)}function g(e,t,r){var a=e.get(r+"Filter");n.get(r).put(t,a)}function d(a,s,i,l,c){var u={value:""};if(angular.isDefined(i)){s=s||r.id,s=s.toLowerCase().trim(),"string"==typeof i&&(i=i.trim());var g=n.get(a),d=g.get(s);d?u.value=d(i,l,c):(u.promise=o(s).then(function(){return g.get(s)(i,l,c)}).catch(function(){return t(a)(i,l,c)}),u.promise.then(function(e){u.value=e}).catch(function(e){u.value=e}))}if(!u.promise){var m=e.defer();m.resolve(u.value),u.promise=m.promise}return u}var m="currency",p="date",f="number";return c(r),u(m),u(p),u(f),{initializeFilters:o,getCurrency:s,getDate:i,getNumber:l}}angular.module("common").factory("alternateLocaleSvc",r).filter("locCurrency",e).filter("locDate",t).filter("locNumber",n),e.$inject=["alternateLocaleSvc"],t.$inject=["alternateLocaleSvc"],n.$inject=["alternateLocaleSvc"],r.$inject=["$q","$filter","$cacheFactory","$locale","Constants"]}(),function(){function e(e,t,n,r,a){function o(e,a){if(e){var o={};o.EventName=e,o.RequestId=t.getRequestId(),o.CorrelationId=t.getCorrelationId(),o.SessionId=t.getSessionId(),o.Locale=r.locale,o.CurrentPageTitle=n.path(),o.InstrumentationKey=l.config.instrumentationKey,c&&c.addEventProperties(o);if(null!=a){for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];o[s]=i}l.trackEvent("CustomEvent: {0}".replace("{0}",e),o)}}}function s(e,t){if(t){l.trackTrace("CustomTrace: Type: {0}. Details: {1}.".replace("{0}",e).replace("{1}",t))}}function i(e,t){if(e){l.trackException("CustomError: Details: {0}. ErrorId: {1}".replace("{0}",e).replace("{1}",t))}}var l=e.appInsights;if(a.has("appInsightsInstrumentationSvcExtensions"))var c=a.get("appInsightsInstrumentationSvcExtensions");var u={startTrackPage:angular.noop,stopTrackPage:angular.noop,trackPageView:angular.noop,startTrackEvent:angular.noop,stopTrackEvent:angular.noop,trackEvent:angular.noop,trackDependency:angular.noop,trackException:angular.noop,trackMetric:angular.noop,trackTrace:angular.noop,flush:angular.noop,trackCustomEvent:angular.noop,trackCustomTrace:angular.noop,trackCustomException:angular.noop};if(l){try{!function(){l.context.addTelemetryInitializer(function(e){try{var n=e.data.baseData;n.properties=n.properties||{},l.context.session.id=t.getSessionId(),n.properties.SessionId=t.getSessionId(),n.properties.CorrelationId=t.getCorrelationId(),n.properties.RequestId=t.getRequestId(),n.properties.Locale=r.locale,n.properties.InstrumentationKey=l.config.instrumentationKey,n.properties.Referer=document.referrer,c&&c.addTelemetryInitializerToEnvelope(n)}catch(e){}})}()}catch(e){}return l.trackCustomEvent=o,l.trackCustomTrace=s,l.trackCustomException=i,l}return u}angular.module("app").factory("appInsightsInstrumentationSvc",e),e.$inject=["$window","sessionContextSvc","$location","settings","$injector"]}(),function(){function e(){function e(){$.getScript("https://www.bing.com/api/maps/mapcontrol?branch=frozen&callback=bingLocationAutosuggestGlobalCallback").fail(function(){vm.showLocationProgress=!1})}return{downloadBingAutoSuggestScript:e}}angular.module("app").factory("bingAutoSuggestScriptSvc",e)}(),function(){function e(e,t,n){function r(){if(null==Microsoft||null==Microsoft.Maps){var e="en",t="en-US",r="US",a=n.locale.split("-");2==a.length&&(e=a[0].toLowerCase(),r=a[1].toUpperCase(),t=e+"-"+r),$.getScript("https://www.bing.com/api/maps/mapcontrol?setLang="+e+"&setMkt="+t+"&UR="+r+"&callback=bingGlobalCallback").fail(function(){vm.showLocationProgress=!1})}else bingGlobalCallback()}function a(n){var r=e.defer();return $.ajax({url:t.GetBingMapsDetails.Url,dataType:"jsonp",jsonp:"jsonp",data:{q:n,key:t.GetBingMapsDetails.Key},success:function(e){e&&e.resourceSets&&e.resourceSets.length>0&&e.resourceSets[0].resources&&e.resourceSets[0].resources.length>0&&e.resourceSets[0].resources[0].point&&r.resolve(e.resourceSets[0].resources[0].point)},error:function(){r.resolve()}}),r.promise}return{getLatitudeLongitudeByAddress:a,downloadMapControl:r}}angular.module("app").factory("bingMapsSvc",e),e.$inject=["$q","Constants","settings"]}(),function(){function e(e,t,n,r,a,o){function s(e){var t=h[e];return t||e}function i(e){var t=v[e];return t||e}function l(e){var n=a.defer();return e in t.CountryInformation?n.resolve(t.CountryInformation[e]):n.reject("Invalid country code"),n.promise}function c(e,t){return t.countryRegionFullName=r.get("localizedResources."+e.iso2Code),t.stateFullName=g(t.country,t.state),t}function u(e){var t=[],n=e.supportedStatesList,r=d(e.iso2Code);return r&&r.length>0&&$.each(n,function(e,n){$.each(r,function(e,r){if(r.key==n)return t.push(r),!1})}),t}function g(e,t){var n="",r=d(e);return $.each(r,function(e,r){if(r.key==t)return n=r.value,!1}),n}function d(e){var t=[];return $.each(f,function(n,r){if(r.countryCode==e)return t=r.states,!1}),t}function m(e){if(e){var t=r.get("localizedResources."+e);if(t)return t}return e}function p(){return[{key:"AD",value:r.get("localizedResources.AD")},{key:"AE",value:r.get("localizedResources.AE")},{key:"AF",value:r.get("localizedResources.AF")},{key:"AG",value:r.get("localizedResources.AG")},{key:"AI",value:r.get("localizedResources.AI")},{key:"AL",value:r.get("localizedResources.AL")},{key:"AM",value:r.get("localizedResources.AM")},{key:"AO",value:r.get("localizedResources.AO")},{key:"AQ",value:r.get("localizedResources.AQ")},{key:"AR",value:r.get("localizedResources.AR")},{key:"AS",value:r.get("localizedResources.AS")},{key:"AT",value:r.get("localizedResources.AT")},{key:"AU",value:r.get("localizedResources.AU")},{key:"AW",value:r.get("localizedResources.AW")},{key:"AX",value:r.get("localizedResources.AX")},{key:"AZ",value:r.get("localizedResources.AZ")},{key:"BA",value:r.get("localizedResources.BA")},{key:"BB",value:r.get("localizedResources.BB")},{key:"BD",value:r.get("localizedResources.BD")},{key:"BE",value:r.get("localizedResources.BE")},{key:"BF",value:r.get("localizedResources.BF")},{key:"BG",value:r.get("localizedResources.BG")},{key:"BH",value:r.get("localizedResources.BH")},{key:"BI",value:r.get("localizedResources.BI")},{key:"BJ",value:r.get("localizedResources.BJ")},{key:"BL",value:r.get("localizedResources.BL")},{key:"BM",value:r.get("localizedResources.BM")},{key:"BN",value:r.get("localizedResources.BN")},{key:"BO",value:r.get("localizedResources.BO")},{key:"BQ",value:r.get("localizedResources.BQ")},{key:"BR",value:r.get("localizedResources.BR")},{key:"BS",value:r.get("localizedResources.BS")},{key:"BT",value:r.get("localizedResources.BT")},{key:"BV",value:r.get("localizedResources.BV")},{key:"BW",value:r.get("localizedResources.BW")},{key:"BY",value:r.get("localizedResources.BY")},{key:"BZ",value:r.get("localizedResources.BZ")},{key:"CA",value:r.get("localizedResources.CA")},{key:"CC",value:r.get("localizedResources.CC")},{key:"CD",value:r.get("localizedResources.CD")},{key:"CF",value:r.get("localizedResources.CF")},{key:"CG",value:r.get("localizedResources.CG")},{key:"CH",value:r.get("localizedResources.CH")},{key:"CI",value:r.get("localizedResources.CI")},{key:"CK",value:r.get("localizedResources.CK")},{key:"CL",value:r.get("localizedResources.CL")},{key:"CM",value:r.get("localizedResources.CM")},{key:"CN",value:r.get("localizedResources.CN")},{key:"CO",value:r.get("localizedResources.CO")},{key:"CR",value:r.get("localizedResources.CR")},{key:"CV",value:r.get("localizedResources.CV")},{key:"CW",value:r.get("localizedResources.CW")},{key:"CX",value:r.get("localizedResources.CX")},{key:"CY",value:r.get("localizedResources.CY")},{key:"CZ",value:r.get("localizedResources.CZ")},{key:"DE",value:r.get("localizedResources.DE")},{key:"DJ",value:r.get("localizedResources.DJ")},{key:"DK",value:r.get("localizedResources.DK")},{key:"DM",value:r.get("localizedResources.DM")},{key:"DO",value:r.get("localizedResources.DO")},{key:"DZ",value:r.get("localizedResources.DZ")},{key:"EC",value:r.get("localizedResources.EC")},{key:"EE",value:r.get("localizedResources.EE")},{key:"EG",value:r.get("localizedResources.EG")},{key:"ER",value:r.get("localizedResources.ER")},{key:"ES",value:r.get("localizedResources.ES")},{key:"ET",value:r.get("localizedResources.ET")},{key:"FI",value:r.get("localizedResources.FI")},{key:"FJ",value:r.get("localizedResources.FJ")},{key:"FK",value:r.get("localizedResources.FK")},{key:"FM",value:r.get("localizedResources.FM")},{key:"FO",value:r.get("localizedResources.FO")},{key:"FR",value:r.get("localizedResources.FR")},{key:"GA",value:r.get("localizedResources.GA")},{key:"GB",value:r.get("localizedResources.GB")},{key:"GD",value:r.get("localizedResources.GD")},{key:"GE",value:r.get("localizedResources.GE")},{key:"GF",value:r.get("localizedResources.GF")},{key:"GG",value:r.get("localizedResources.GG")},{key:"GH",value:r.get("localizedResources.GH")},{key:"GI",value:r.get("localizedResources.GI")},{key:"GL",value:r.get("localizedResources.GL")},{key:"GM",value:r.get("localizedResources.GM")},{key:"GN",value:r.get("localizedResources.GN")},{key:"GP",value:r.get("localizedResources.GP")},{key:"GQ",value:r.get("localizedResources.GQ")},{key:"GR",value:r.get("localizedResources.GR")},{key:"GS",value:r.get("localizedResources.GS")},{key:"GT",value:r.get("localizedResources.GT")},{key:"GU",value:r.get("localizedResources.GU")},{key:"GW",value:r.get("localizedResources.GW")},{key:"GY",value:r.get("localizedResources.GY")},{key:"HK",value:r.get("localizedResources.HK")},{key:"HM",value:r.get("localizedResources.HM")},{key:"HN",value:r.get("localizedResources.HN")},{key:"HR",value:r.get("localizedResources.HR")},{key:"HT",value:r.get("localizedResources.HT")},{key:"HU",value:r.get("localizedResources.HU")},{key:"ID",value:r.get("localizedResources.ID")},{key:"IE",value:r.get("localizedResources.IE")},{key:"IL",value:r.get("localizedResources.IL")},{key:"IM",value:r.get("localizedResources.IM")},{key:"IN",value:r.get("localizedResources.IN")},{key:"IO",value:r.get("localizedResources.IO")},{key:"IQ",value:r.get("localizedResources.IQ")},{key:"IS",value:r.get("localizedResources.IS")},{key:"IT",value:r.get("localizedResources.IT")},{key:"JE",value:r.get("localizedResources.JE")},{key:"JM",value:r.get("localizedResources.JM")},{key:"JO",value:r.get("localizedResources.JO")},{key:"JP",value:r.get("localizedResources.JP")},{key:"KE",value:r.get("localizedResources.KE")},{key:"KG",value:r.get("localizedResources.KG")},{key:"KH",value:r.get("localizedResources.KH")},{key:"KI",value:r.get("localizedResources.KI")},{key:"KM",
value:r.get("localizedResources.KM")},{key:"KN",value:r.get("localizedResources.KN")},{key:"KR",value:r.get("localizedResources.KR")},{key:"KW",value:r.get("localizedResources.KW")},{key:"KY",value:r.get("localizedResources.KY")},{key:"KZ",value:r.get("localizedResources.KZ")},{key:"LA",value:r.get("localizedResources.LA")},{key:"LB",value:r.get("localizedResources.LB")},{key:"LC",value:r.get("localizedResources.LC")},{key:"LI",value:r.get("localizedResources.LI")},{key:"LK",value:r.get("localizedResources.LK")},{key:"LR",value:r.get("localizedResources.LR")},{key:"LS",value:r.get("localizedResources.LS")},{key:"LT",value:r.get("localizedResources.LT")},{key:"LU",value:r.get("localizedResources.LU")},{key:"LV",value:r.get("localizedResources.LV")},{key:"LY",value:r.get("localizedResources.LY")},{key:"MA",value:r.get("localizedResources.MA")},{key:"MC",value:r.get("localizedResources.MC")},{key:"MD",value:r.get("localizedResources.MD")},{key:"ME",value:r.get("localizedResources.ME")},{key:"MF",value:r.get("localizedResources.MF")},{key:"MG",value:r.get("localizedResources.MG")},{key:"MH",value:r.get("localizedResources.MH")},{key:"MK",value:r.get("localizedResources.MK")},{key:"ML",value:r.get("localizedResources.ML")},{key:"MM",value:r.get("localizedResources.MM")},{key:"MN",value:r.get("localizedResources.MN")},{key:"MO",value:r.get("localizedResources.MO")},{key:"MP",value:r.get("localizedResources.MP")},{key:"MQ",value:r.get("localizedResources.MQ")},{key:"MR",value:r.get("localizedResources.MR")},{key:"MS",value:r.get("localizedResources.MS")},{key:"MT",value:r.get("localizedResources.MT")},{key:"MU",value:r.get("localizedResources.MU")},{key:"MV",value:r.get("localizedResources.MV")},{key:"MW",value:r.get("localizedResources.MW")},{key:"MX",value:r.get("localizedResources.MX")},{key:"MY",value:r.get("localizedResources.MY")},{key:"MZ",value:r.get("localizedResources.MZ")},{key:"NA",value:r.get("localizedResources.NA")},{key:"NC",value:r.get("localizedResources.NC")},{key:"NE",value:r.get("localizedResources.NE")},{key:"NF",value:r.get("localizedResources.NF")},{key:"NG",value:r.get("localizedResources.NG")},{key:"NI",value:r.get("localizedResources.NI")},{key:"NL",value:r.get("localizedResources.NL")},{key:"NO",value:r.get("localizedResources.NO")},{key:"NP",value:r.get("localizedResources.NP")},{key:"NR",value:r.get("localizedResources.NR")},{key:"NU",value:r.get("localizedResources.NU")},{key:"NZ",value:r.get("localizedResources.NZ")},{key:"OM",value:r.get("localizedResources.OM")},{key:"PA",value:r.get("localizedResources.PA")},{key:"PE",value:r.get("localizedResources.PE")},{key:"PF",value:r.get("localizedResources.PF")},{key:"PG",value:r.get("localizedResources.PG")},{key:"PH",value:r.get("localizedResources.PH")},{key:"PK",value:r.get("localizedResources.PK")},{key:"PL",value:r.get("localizedResources.PL")},{key:"PM",value:r.get("localizedResources.PM")},{key:"PN",value:r.get("localizedResources.PN")},{key:"PR",value:r.get("localizedResources.PR")},{key:"PS",value:r.get("localizedResources.PS")},{key:"PT",value:r.get("localizedResources.PT")},{key:"PW",value:r.get("localizedResources.PW")},{key:"PY",value:r.get("localizedResources.PY")},{key:"QA",value:r.get("localizedResources.QA")},{key:"RE",value:r.get("localizedResources.RE")},{key:"RO",value:r.get("localizedResources.RO")},{key:"RS",value:r.get("localizedResources.RS")},{key:"RU",value:r.get("localizedResources.RU")},{key:"RW",value:r.get("localizedResources.RW")},{key:"SA",value:r.get("localizedResources.SA")},{key:"SB",value:r.get("localizedResources.SB")},{key:"SC",value:r.get("localizedResources.SC")},{key:"SE",value:r.get("localizedResources.SE")},{key:"SG",value:r.get("localizedResources.SG")},{key:"SH",value:r.get("localizedResources.SH")},{key:"SI",value:r.get("localizedResources.SI")},{key:"SJ",value:r.get("localizedResources.SJ")},{key:"SK",value:r.get("localizedResources.SK")},{key:"SL",value:r.get("localizedResources.SL")},{key:"SM",value:r.get("localizedResources.SM")},{key:"SN",value:r.get("localizedResources.SN")},{key:"SO",value:r.get("localizedResources.SO")},{key:"SR",value:r.get("localizedResources.SR")},{key:"SS",value:r.get("localizedResources.SS")},{key:"ST",value:r.get("localizedResources.ST")},{key:"SV",value:r.get("localizedResources.SV")},{key:"SX",value:r.get("localizedResources.SX")},{key:"SZ",value:r.get("localizedResources.SZ")},{key:"TC",value:r.get("localizedResources.TC")},{key:"TD",value:r.get("localizedResources.TD")},{key:"TF",value:r.get("localizedResources.TF")},{key:"TG",value:r.get("localizedResources.TG")},{key:"TH",value:r.get("localizedResources.TH")},{key:"TJ",value:r.get("localizedResources.TJ")},{key:"TK",value:r.get("localizedResources.TK")},{key:"TL",value:r.get("localizedResources.TL")},{key:"TM",value:r.get("localizedResources.TM")},{key:"TN",value:r.get("localizedResources.TN")},{key:"TO",value:r.get("localizedResources.TO")},{key:"TR",value:r.get("localizedResources.TR")},{key:"TT",value:r.get("localizedResources.TT")},{key:"TV",value:r.get("localizedResources.TV")},{key:"TW",value:r.get("localizedResources.TW")},{key:"TZ",value:r.get("localizedResources.TZ")},{key:"UA",value:r.get("localizedResources.UA")},{key:"UG",value:r.get("localizedResources.UG")},{key:"UM",value:r.get("localizedResources.UM")},{key:"US",value:r.get("localizedResources.US")},{key:"UY",value:r.get("localizedResources.UY")},{key:"UZ",value:r.get("localizedResources.UZ")},{key:"VA",value:r.get("localizedResources.VA")},{key:"VC",value:r.get("localizedResources.VC")},{key:"VE",value:r.get("localizedResources.VE")},{key:"VG",value:r.get("localizedResources.VG")},{key:"VN",value:r.get("localizedResources.VN")},{key:"VI",value:r.get("localizedResources.VI")},{key:"VU",value:r.get("localizedResources.VU")},{key:"WF",value:r.get("localizedResources.WF")},{key:"WS",value:r.get("localizedResources.WS")},{key:"XE",value:r.get("localizedResources.XE")},{key:"XK",value:r.get("localizedResources.XK")},{key:"XS",value:r.get("localizedResources.XS")},{key:"YE",value:r.get("localizedResources.YE")},{key:"YT",value:r.get("localizedResources.YT")},{key:"ZA",value:r.get("localizedResources.ZA")},{key:"ZM",value:r.get("localizedResources.ZM")},{key:"ZW",value:r.get("localizedResources.ZW")}]}"US"in t.CountryInformation&&null!=t.CountryInformation.US.statesFullNames&&o.traceInfo("Number of states for country code US on app load is "+t.CountryInformation.US.statesFullNames.length),"CA"in t.CountryInformation&&null!=t.CountryInformation.CA.statesFullNames&&o.traceInfo("Number of states for country code CA on app load is "+t.CountryInformation.CA.statesFullNames.length);var f=[{countryCode:"US",states:[{key:"AK",value:"Alaska"},{key:"AL",value:"Alabama"},{key:"AR",value:"Arkansas"},{key:"AZ",value:"Arizona"},{key:"CA",value:"California"},{key:"CO",value:"Colorado"},{key:"CT",value:"Connecticut"},{key:"DC",value:"District of Columbia"},{key:"DE",value:"Delaware"},{key:"FL",value:"Florida"},{key:"GA",value:"Georgia"},{key:"HI",value:"Hawaii"},{key:"IA",value:"Iowa"},{key:"ID",value:"Idaho"},{key:"IL",value:"Illinois"},{key:"IN",value:"Indiana"},{key:"KS",value:"Kansas"},{key:"KY",value:"Kentucky"},{key:"LA",value:"Louisiana"},{key:"MA",value:"Massachusetts"},{key:"MD",value:"Maryland"},{key:"ME",value:"Maine"},{key:"MI",value:"Michigan"},{key:"MN",value:"Minnesota"},{key:"MO",value:"Missouri"},{key:"MS",value:"Mississippi"},{key:"MT",value:"Montana"},{key:"NC",value:"North Carolina"},{key:"ND",value:"North Dakota"},{key:"NE",value:"Nebraska"},{key:"NH",value:"New Hampshire"},{key:"NJ",value:"New Jersey"},{key:"NM",value:"New Mexico"},{key:"NV",value:"Nevada"},{key:"NY",value:"New York"},{key:"OH",value:"Ohio"},{key:"OK",value:"Oklahoma"},{key:"OR",value:"Oregon"},{key:"PA",value:"Pennsylvania"},{key:"RI",value:"Rhode Island"},{key:"SC",value:"South Carolina"},{key:"SD",value:"South Dakota"},{key:"TN",value:"Tennessee"},{key:"TX",value:"Texas"},{key:"UT",value:"Utah"},{key:"VA",value:"Virginia"},{key:"VT",value:"Vermont"},{key:"WA",value:"Washington"},{key:"WI",value:"Wisconsin"},{key:"WV",value:"West Virginia"},{key:"WY",value:"Wyoming"}]},{countryCode:"CA",states:[{key:"AB",value:"Alberta"},{key:"BC",value:"British Columbia"},{key:"MB",value:"Manitoba"},{key:"NB",value:"New Brunswick"},{key:"NL",value:"Newfoundland and Labrador"},{key:"NS",value:"Nova Scotia"},{key:"NT",value:"Northwest Territories"},{key:"NU",value:"Nunavut"},{key:"ON",value:"Ontario"},{key:"PE",value:"Prince Edward Island"},{key:"QC",value:"Quebec"},{key:"SK",value:"Saskatchewan"},{key:"YT",value:"Yukon"}]}],h={BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BA:"BIH",BB:"BRB",WF:"WLF",BL:"BLM",BM:"BMU",BN:"BRN",BO:"BOL",BH:"BHR",BI:"BDI",BJ:"BEN",BT:"BTN",JM:"JAM",BV:"BVT",BW:"BWA",WS:"WSM",BQ:"BES",BR:"BRA",BS:"BHS",JE:"JEY",BY:"BLR",BZ:"BLZ",RU:"RUS",RW:"RWA",RS:"SRB",TL:"TLS",RE:"REU",TM:"TKM",TJ:"TJK",RO:"ROU",TK:"TKL",GW:"GNB",GU:"GUM",GT:"GTM",GS:"SGS",GR:"GRC",GQ:"GNQ",GP:"GLP",JP:"JPN",GY:"GUY",GG:"GGY",GF:"GUF",GE:"GEO",GD:"GRD",GB:"GBR",GA:"GAB",SV:"SLV",GN:"GIN",GM:"GMB",GL:"GRL",GI:"GIB",GH:"GHA",OM:"OMN",TN:"TUN",JO:"JOR",HR:"HRV",HT:"HTI",HU:"HUN",HK:"HKG",HN:"HND",HM:"HMD",VE:"VEN",PR:"PRI",PS:"PSE",PW:"PLW",PT:"PRT",SJ:"SJM",PY:"PRY",IQ:"IRQ",PA:"PAN",PF:"PYF",PG:"PNG",PE:"PER",PK:"PAK",PH:"PHL",PN:"PCN",PL:"POL",PM:"SPM",ZM:"ZMB",EH:"ESH",EE:"EST",EG:"EGY",ZA:"ZAF",EC:"ECU",IT:"ITA",VN:"VNM",SB:"SLB",ET:"ETH",SO:"SOM",ZW:"ZWE",SA:"SAU",ES:"ESP",ER:"ERI",ME:"MNE",MD:"MDA",MG:"MDG",MF:"MAF",MA:"MAR",MC:"MCO",UZ:"UZB",MM:"MMR",ML:"MLI",MO:"MAC",MN:"MNG",MH:"MHL",MK:"MKD",MU:"MUS",MT:"MLT",MW:"MWI",MV:"MDV",MQ:"MTQ",MP:"MNP",MS:"MSR",MR:"MRT",IM:"IMN",UG:"UGA",TZ:"TZA",MY:"MYS",MX:"MEX",IL:"ISR",FR:"FRA",IO:"IOT",SH:"SHN",FI:"FIN",FJ:"FJI",FK:"FLK",FM:"FSM",FO:"FRO",NI:"NIC",NL:"NLD",NO:"NOR",NA:"NAM",VU:"VUT",NC:"NCL",NE:"NER",NF:"NFK",NG:"NGA",NZ:"NZL",NP:"NPL",NR:"NRU",NU:"NIU",CK:"COK",XK:"XKX",CI:"CIV",CH:"CHE",CO:"COL",CN:"CHN",CM:"CMR",CL:"CHL",CC:"CCK",CA:"CAN",CG:"COG",CF:"CAF",CD:"COD",CZ:"CZE",CY:"CYP",CX:"CXR",CR:"CRI",CW:"CUW",CV:"CPV",CU:"CUB",SZ:"SWZ",SY:"SYR",SX:"SXM",KG:"KGZ",KE:"KEN",SS:"SSD",SR:"SUR",KI:"KIR",KH:"KHM",KN:"KNA",KM:"COM",ST:"STP",SK:"SVK",KR:"KOR",SI:"SVN",KP:"PRK",KW:"KWT",SN:"SEN",SM:"SMR",SL:"SLE",SC:"SYC",KZ:"KAZ",KY:"CYM",SG:"SGP",SE:"SWE",SD:"SDN",DO:"DOM",DM:"DMA",DJ:"DJI",DK:"DNK",VG:"VGB",DE:"DEU",YE:"YEM",DZ:"DZA",US:"USA",UY:"URY",YT:"MYT",UM:"UMI",LB:"LBN",LC:"LCA",LA:"LAO",TV:"TUV",TW:"TWN",TT:"TTO",TR:"TUR",LK:"LKA",LI:"LIE",LV:"LVA",TO:"TON",LT:"LTU",LU:"LUX",LR:"LBR",LS:"LSO",TH:"THA",TF:"ATF",TG:"TGO",TD:"TCD",TC:"TCA",LY:"LBY",VA:"VAT",VC:"VCT",AE:"ARE",AD:"AND",AG:"ATG",AF:"AFG",AI:"AIA",VI:"VIR",IS:"ISL",IR:"IRN",AM:"ARM",AL:"ALB",AO:"AGO",AQ:"ATA",AS:"ASM",AR:"ARG",AU:"AUS",AT:"AUT",AW:"ABW",IN:"IND",AX:"ALA",AZ:"AZE",IE:"IRL",ID:"IDN",UA:"UKR",QA:"QAT",MZ:"MOZ",XE:"XSE",XS:"XSA"},v={BGD:"BD",BEL:"BE",BFA:"BF",BGR:"BG",BIH:"BA",BRB:"BB",WLF:"WF",BLM:"BL",BMU:"BM",BRN:"BN",BOL:"BL",BHR:"BH",BDI:"BI",BEN:"BJ",BTN:"BT",JAM:"JM",BVT:"BV",BWA:"BW",WSM:"WS",BES:"BQ",BRA:"BR",BHS:"BS",JEY:"JE",BLR:"BY",BLZ:"BZ",RUS:"RU",RWA:"RW",SRB:"RS",TLS:"TL",REU:"RE",TKM:"TM",TJK:"TJ",ROU:"RO",TKL:"TK",GNB:"GW",GUM:"GU",GTM:"GT",SGS:"GS",GRC:"GR",GNQ:"GQ",GLP:"GP",JPN:"JP",GUY:"GY",GGY:"GG",GUF:"GF",GEO:"GE",GRD:"GD",GBR:"GB",GAB:"GA",SLV:"SV",GIN:"GN",GMB:"GM",GRL:"GL",GIB:"GI",GHA:"GH",OMN:"OM",TUN:"TN",JOR:"JO",HRV:"HR",HTI:"HT",HUN:"HU",HKG:"HK",HND:"HN",HMD:"HM",VEN:"VE",PRI:"PR",PSE:"PS",PLW:"PW",PRT:"PT",SJM:"SJ",PRY:"PY",IRQ:"IQ",PAN:"PA",PYF:"PF",PNG:"PG",PER:"PE",PAK:"PK",PHL:"PH",PCN:"PN",POL:"PL",SPM:"PM",ZMB:"ZB",ESH:"EH",EST:"EE",EGY:"EG",ZAF:"ZA",ECU:"EC",ITA:"IT",VNM:"VN",SLB:"SL",ETH:"ET",SOM:"SO",ZWE:"ZW",SAU:"SA",ESP:"ES",ERI:"ER",MNE:"ME",MDA:"MD",MDG:"MG",MAF:"MF",MAR:"MA",MCO:"MC",UZB:"UZ",MMR:"MM",MLI:"ML",MAC:"MO",MNG:"MN",MHL:"MH",MKD:"MK",MUS:"MU",MLT:"ML",MWI:"MW",MDV:"MV",MTQ:"MQ",MNP:"MP",MSR:"MS",MRT:"MR",IMN:"IM",UGA:"UG",TZA:"TZ",MYS:"MY",MEX:"MX",ISR:"IL",FRA:"FR",IOT:"IO",SHN:"SH",FIN:"FI",FJI:"FJ",FLK:"FK",FSM:"FM",FRO:"FO",NIC:"NI",NLD:"NL",NOR:"NO",NAM:"NA",VUT:"VU",NCL:"NC",NER:"NE",NFK:"NF",NGA:"NG",NZL:"NZ",NPL:"NP",NRU:"NR",NIU:"NI",COK:"CK",XKX:"XK",CIV:"CI",CHE:"CH",COL:"CO",CHN:"CN",CMR:"CM",CHL:"CL",CCK:"CC",CAN:"CA",COG:"CG",CAF:"CF",COD:"CD",CZE:"CZ",CYP:"CY",CXR:"CX",CRI:"CR",CUW:"CW",CPV:"CV",CUB:"CU",SWZ:"SZ",SYR:"SY",SXM:"SX",KGZ:"KG",KEN:"KE",SSD:"SS",SUR:"SR",KIR:"KI",KHM:"KH",KNA:"KN",COM:"KM",STP:"ST",SVK:"SK",KOR:"KR",SVN:"SI",PRK:"KP",KWT:"KW",SEN:"SN",SMR:"SM",SLE:"SL",SYC:"SC",KAZ:"KZ",CYM:"KY",SGP:"SG",SWE:"SE",SDN:"SD",DOM:"DO",DMA:"DM",DJI:"DJ",DNK:"DK",VGB:"VG",DEU:"DE",YEM:"YE",DZA:"DZ",USA:"US",URY:"UY",MYT:"YT",UMI:"UM",LBN:"LB",LCA:"LC",LAO:"LA",TUV:"TV",TWN:"TW",TTO:"TT",TUR:"TR",LKA:"LK",LIE:"LI",LVA:"LV",TON:"TO",LTU:"LT",LUX:"LU",LBR:"LR",LSO:"LS",THA:"TH",ATF:"TF",TGO:"TG",TCD:"TD",TCA:"TC",LBY:"LY",VAT:"VA",VCT:"VC",ARE:"AE",AND:"AD",ATG:"AG",AFG:"AG",AIA:"AI",VIR:"VI",ISL:"IS",IRN:"IR",ARM:"AM",ALB:"AL",AGO:"AO",ATA:"AQ",ASM:"AS",ARG:"AR",AUS:"AU",AUT:"AT",ABW:"AW",IND:"IN",ALA:"AX",AZE:"AZ",IRL:"IE",IDN:"ID",UKR:"UA",QAT:"QA",MOZ:"MZ",XSE:"XE",XSA:"XS"};return{get:l,augmentAddress:c,getStatesFullNames:u,getStateFullName:g,getStatesByCountry:d,getCountryName:m,getCountryList:p,getIso3Code:s,getIso2Code:i}}angular.module("common").factory("countryInformationSvc",e),e.$inject=["sessionContextSvc","Constants","$resource","resxSvc","$q","tracingSvc"]}(),function(){function e(e,t,n){return function(e,r){var a={cause:r};e&&"object"==typeof e?a.exception=e.message+" Stack "+e.stack:e&&e.message?a.exception=e.message:a.exception=e,t.get("tracingSvc").traceError(a,n.InstrumentationConstants.Error)}}angular.module("common").factory("$exceptionHandler",e),e.$inject=["$log","$injector","Constants"]}(),function(){function e(e,t,n,r){function a(e,t){s(e,new Blob([t],{type:"text/html;charset=utf-8;"}))}function o(e,n,a){var o=t.defer(),i={txtDelim:'"',decimalSep:".",fieldSep:",",header:n,addByteOrderMarker:!0};return t.when(a(),function(t){r.stringify(t,i).then(function(t){var n=new Blob([t],{type:"text/csv;charset=utf-8;"});s(e,n),o.resolve()})}),o.promise}function s(t,r){if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(r,t);else{var a=angular.element('<div data-tap-disabled="true"><a></a></div>'),o=angular.element(a.children()[0]);o.attr("href",window.URL.createObjectURL(r)),o.attr("download",t),o.attr("target","_blank"),n.find("body").append(a),e(function(){o[0].click(),o.remove()},null)}}return{saveAsTextFile:a,saveAsCsvFile:o}}angular.module("common").factory("fileGenerationSvc",e),e.$inject=["$timeout","$q","$document","CSV"]}(),function(){function e(e,t,n){function r(e){return{"Agriculture, Forestry, & Fishing":g("localizedResources.IndustryFoucs_Agriculture"),"Communications & Media":g("localizedResources.IndustryFoucs_CommunicationsMedia"),Education:g("localizedResources.IndustryFoucs_Education"),"Financial Services":g("localizedResources.IndustryFoucs_FinancialServices"),Government:g("localizedResources.IndustryFoucs_Government"),Healthcare:g("localizedResources.IndustryFoucs_Healthcare"),Hospitality:g("localizedResources.IndustryFoucs_Hospitality"),Manufacturing:g("localizedResources.IndustryFoucs_Manufacturing"),"Power & Utilities":g("localizedResources.IndustryFoucs_PowerUtilities"),"Public Safety and National Security":g("localizedResources.IndustryFoucs_PublicSafety"),"Retail & Consumer Goods":g("localizedResources.IndustryFoucs_RetailConsumer"),Services:g("localizedResources.IndustryFoucs_Services"),"Travel & Transportation":g("localizedResources.IndustryFoucs_TravelTransportation"),"Wholesale & Distribution":g("localizedResources.IndustryFoucs_WholesaleDistribution"),"1to9employees":g("localizedResources.OrganizationSize_CompanySizeLessThan10Text"),"10to50employees":g("localizedResources.OrganizationSize_CompanySize10To50Text"),"51to250employees":g("localizedResources.OrganizationSize_CompanySize51To250Text"),"251to1000employees":g("localizedResources.OrganizationSize_CompanySize251To1000Text"),"1001to5000employees":g("localizedResources.OrganizationSize_CompanySize1001To5000Text"),"5001to10000employees":g("localizedResources.OrganizationSize_CompanySize5001To10000Text"),"10001to20000employees":g("localizedResources.OrganizationSize_CompanySize10001To20000Text"),Morethan20000employees:g("localizedResources.OrganizationSize_CompanyMoreThan20000Text"),Azure:g("localizedResources.Products_Azure"),EnterpriseMobilityAndSecurity:g("localizedResources.Products_EnterpriseMobilityAndSecurity"),Exchange:g("localizedResources.Products_Exchange"),DeveloperTools:g("localizedResources.Products_DeveloperTools"),Dynamics365Business:g("localizedResources.Products_Dynamics365Business"),Dynamics365Enterprise:g("localizedResources.Products_Dynamics365Enterprise"),"DynamicsAX,GP,NAV,SL":g("localizedResources.Products_DynamicsAX_GP_NAV_SL"),Office:g("localizedResources.Products_Office"),PowerBI:g("localizedResources.Products_PowerBI"),Project:g("localizedResources.Products_Project"),SharePoint:g("localizedResources.Products_SharePoint"),SkypeForBusiness:g("localizedResources.Products_SkypeForBusiness"),Surface:g("localizedResources.Products_Surface"),Visio:g("localizedResources.Products_Visio"),Windows:g("localizedResources.Products_Windows"),Yammer:g("localizedResources.Products_Yammer"),Sql:g("localizedResources.Products_Sql"),DeploymentOrMigration:g("localizedResources.ServiceType_DeploymentOrMigration"),Licensing:g("localizedResources.ServiceType_Licensing"),"CustomSolution(ISV)":g("localizedResources.ServiceType_Customsolution"),"IPServices(ISV)":g("localizedResources.ServiceType_IPservices"),ManagedServices:g("localizedResources.ServiceType_Managedservices"),ProjectServices:g("localizedResources.ServiceType_Projectservices"),Hardware:g("localizedResources.ServiceType_Hardware"),LearningAndCertification:g("localizedResources.ServiceType_LearningAndCertification"),SIZE_1:g("localizedResources.LinkedIn_SIZE_1"),SIZE_2_TO_10:g("localizedResources.LinkedIn_SIZE_2_TO_10"),SIZE_11_TO_50:g("localizedResources.LinkedIn_SIZE_11_TO_50"),SIZE_51_TO_200:g("localizedResources.LinkedIn_SIZE_51_TO_200"),SIZE_201_TO_500:g("localizedResources.LinkedIn_SIZE_201_TO_500"),SIZE_501_TO_1000:g("localizedResources.LinkedIn_SIZE_501_TO_1000"),SIZE_1001_TO_5000:g("localizedResources.LinkedIn_SIZE_1001_TO_5000"),SIZE_5001_TO_10000:g("localizedResources.LinkedIn_SIZE_5001_TO_10000"),SIZE_10001_OR_MORE:g("localizedResources.LinkedIn_SIZE_10001_OR_MORE")}[e]}function a(){return d.query().$promise}function o(e){return r(e)}function s(e){switch(e){case t.TagCategories.Product:return g("localizedResources.Tags_ProductLabel");case t.TagCategories.ServiceType:return g("localizedResources.Tags_ServiceTypeLabel");case t.TagCategories.PartnerTag:return g("localizedResources.Tags_PartnerTagLabel");case t.TagCategories.IndustryFocus:return g("localizedResources.Tags_IndustryFocusLabel");case t.TagCategories.Default:return""}}function i(e){return d.get({domainKey:e}).$promise.then(function(t){return l(e,t)})}function l(e,t){for(var n=[],a=0;a<t.length;a++){var o=r(t[a].id),s=t[a].id;o&&n.push({key:s,value:o})}return n}function c(e){for(var t=0;t<e.length;t++)"1to50employees"==e[t]?(e.splice(t,1,"1to9employees"),e.splice(t,0,"10to50employees")):"51to500employees"==e[t]?e.splice(t,1,"51to250employees"):"Morethan500employees"==e[t]&&(e.splice(t,1,"251to1000employees"),e.splice(t,0,"1001to5000employees"),e.splice(t,0,"5001to10000employees"),e.splice(t,0,"10001to20000employees"),e.splice(t,0,"Morethan20000employees"));return e}var u=t.PartnerFinderapiPathRoot+"domaindata",g=n.get,d=e(u+"/:domainKey",null,{get:{method:"GET",isArray:!0,cache:!0}});return{getDomainData:i,getDomainKeys:a,getDomainDataValueByKeyId:o,getDomainDataTagByCategory:s,mapOrganizationSizeKeys:c}}angular.module("app").factory("finderDomainDataSvc",e),e.$inject=["$resource","Constants","resxSvc"]}(),function(){function e(e,t){var n={},r=t.applicableFlights,a=[],o=t.isCorpNet;return n.checkQueryParameterFlights=function(){if(o){r=t.applicableFlights,a=[];var n=e.ParametersManager,s=e.Parameter,i=new s("setFlights"),l=new s("unsetFlights");new n([i,l]).read();var c=i.value(),u=l.value();if(null!=c)for(var g=c.split(";"),d=0;d<g.length;d++)-1==r.indexOf(g[d])&&r.push(g[d]);if(null!=u)for(var m=u.split(";"),p=0;p<m.length;p++)a.push(m[p])}},n.isFlightEnabled=function(e){return-1==a.indexOf(e)&&!(!r||-1==r.indexOf(e))},n.isCorpNet=function(){return o},n.checkQueryParameterFlights(),n}angular.module("common").factory("flightingSvc",e),e.$inject=["queryParametersSvc","sessionContext"]}(),function(){function e(e,t,n,r,a,o,s,i){function l(){var a=e.location.origin+n.LinkedInSignInUriSegment,o=n.LinkedInAuthorizationEndpointFormat.replace("{0}",r.linkedInSettings.ClientId).replace("{1}",a).replace("{2}",t.getSessionId());e.location.replace(o)}function c(){var t=e.location.origin+n.LinkedInSignOutUriSegment;e.location.replace(t)}function u(r){var l=o.defer();return a(e.location.origin+"/"+t.getLocale()+n.LinkedInSignInUri+r,null,{get:{}}).get().$promise.then(function(e){s.setUserInfo(e.userInfo),e&&e.userInfo&&e.userInfo.linkedIn&&e.userInfo.linkedIn.userId?i.traceInfo("Linked In user info for user with Id is loaded: "+e.userInfo.linkedIn.userId.toString()):i.traceError("Linked In user info is missing"),l.resolve(e)}).catch(function(e){l.reject()}),l.promise}function g(){var e=o.defer();return d.get().$promise.then(function(t){userInfo&&userInfo.linkedIn&&userInfo.linkedIn.linkedInContext&&(userInfo.linkedIn.linkedInContext.access_token=t.access_token,userInfo.linkedIn.linkedInContext.expiresOn=t.expiresOn),e.resolve()}).catch(function(t){e.reject()}),e.promise}var d=a(e.location.origin+"/"+t.getLocale()+n.LinkedInTokenUri,null,{get:{}});return{signIn:l,signOut:c,populateUserInfo:u,updateToken:g}}angular.module("common").factory("linkedInSvc",e),e.$inject=["$window","sessionContextSvc","Constants","settings","$resource","$q","linkedInUserInfoSvc","tracingSvc"]}(),function(){function e(e){function t(){return r&&r.linkedIn?r.linkedIn:null}function n(e){r=e}var r=null;return e&&e.linkedIn&&(r=e),{setUserInfo:n,getUserInfo:t}}angular.module("common").factory("linkedInUserInfoSvc",e),e.$inject=["userInfo"]}(),function(){function e(e){function t(t,n){if(a)if(null===n)delete e.sessionStorage[t];else{if(!n)return e.sessionStorage[t];e.sessionStorage[t]=n}}function n(e){return t(o,e)}function r(e){return t(s,e)}var a="undefined"!=typeof Storage,o="rpeReferrer",s="rpeRedirectTarget";return{storageSupported:a,referrer:n,redirectTarget:r}}angular.module("app").factory("localStorageSvc",e),e.$inject=["$window"]}(),function(){function e(){function e(e,t,n,r,a,o,s,i,l){this.title=e,this.message=t,this.primaryButtonText=n,this.primaryButtonCallback=r,this.secondaryButtonText=a,this.secondaryButtonCallback=o,this.selectedItemText=s,this.showSelectedItemId=l,this.items=i}function t(){return a}function n(e){a=e}function r(){a=null}var a=null;return{ModalConfiguration:e,getConfiguration:t,show:n,dispose:r}}angular.module("app").factory("modalSvc",e),e.$inject=[]}(),function(){function e(e){function t(e){return e&&(i=e),i}function n(t){return e.isNullOrUndefined(t)||(l=t),!0===l}function r(t,n,r){return e.isNullOrUndefined(t)||(c=t,a(n),o(r)),!0===c}function a(t){return e.isNullOrUndefined(t)||(u=t),!0===u}function o(t){e.isNullOrUndefined(t)?currentProgressRingMesage=null:currentProgressRingMesage=t}function s(){return currentProgressRingMesage}var i=null,l=null,c=null,u=null;return{title:t,hideHeaderFooter:n,showProgressRing:r,progressRingBlocks:a,getProgressRingMessage:s}}angular.module("app").factory("pageSvc",e),e.$inject=["Helpers"]}(),function(){function e(e){function t(e){return n(e,[])}function n(t,r){var a=e.defer();if(0===t.length)a.resolve(r);else{var o=t[0]();if(!o){var s=e.defer();null===o?(o=s.promise,s.resolve(void 0)):(o=s.promise,s.reject("Task did not return a promise. If this is intentional please return null explicitly from the task."))}o.then(function(e){r.push({succeeded:!0,response:e})}).catch(function(e){r.push({succeeded:!1,response:e})}).finally(function(){t.length>1?n(t.slice(1),r).then(function(e){a.resolve(e)}):a.resolve(r)})}return a.promise}function r(t){var n=e.defer();return $.each(t,function(e,n){t[e]=n.catch(function(e){return e.failed=!0,e})}),e.all(t).then(function(e){var t=!1;return $.each(e,function(e,n){if(n&&1==n.failed)return t=!0,!1}),t?n.reject(e):n.resolve(e),n.promise})}return{processTasksSequentially:t,waitForAll:r}}angular.module("common").factory("promisesSvc",e),e.$inject=["$q"]}(),function(){function e(e,t,n,r,a,o){function s(a){var s=new Array,l=new Array,c=o.getSearchRequestUXModel();null!=a&&void 0!==a&&(l=l.concat(a.slice()),l.forEach(function(e){s[e.name()]=e})),this.get=function(e){return s[e]},this.getAll=function(){return s},this.read=function(){var e=r.search();l.forEach(function(t){e.hasOwnProperty(t.name())?t.value(e[t.name()]):t.reset()})},this.readAllDebugFlags=function(){var e=new i("includeTest"),t=new i("testOnly"),n=new i("skipCheck"),a=new i("prodResults"),o=[e,t,n,a];l=l.concat(o.slice());var u=r.search();l.forEach(function(e){u.hasOwnProperty(e.name())?(e.value(u[e.name()]),c.debugFlags[e.name()]=e.value()):e.reset(),s[e.name()]=e})},this.apply=function(a){var o={};l.forEach(function(e){if(!e.hasDefaultValue()){var t=e.value();"boolean"==typeof t&&(t=t?"true":"false"),o[e.name()]=t}});var s=n.current,i=s.$$route.reloadOnSearch;s.$$route.reloadOnSearch=!1;var c=t.$on("$locationChangeSuccess",function(){s.$$route.reloadOnSearch=i,c()});e(function(){r.search(o),a||r.replace()})}}function i(e,t,n){t=void 0===t?null:t;var r=t;this.name=function(){return e},this.value=function(e){return void 0!==e&&(r=n&&"string"==typeof e?n(e):e),r},this.reset=function(){r=t},this.hasDefaultValue=function(){return r===t}}function l(e){return"true"===e}function c(e){return new Date(e)}function u(e){var t="";if(e)for(var n=0;n<e.length;++n)t+=e[n]+",";return t=a.String.trimTrailing(t,",")}return{ParametersManager:s,Parameter:i,toBool:l,ToDate:c,toCommaSeparatedString:u}}angular.module("common").factory("queryParametersSvc",e),e.$inject=["$timeout","$rootScope","$route","$location","Helpers","globalSearchRequestSvc"]}(),function(){function e(e){function t(e){if(!e)throw"Missing value for required parameter 'key'.";return n(r,e.split("."))}function n(e,t){var r=null;if(e&&t&&t.length>0){var a=t[0];if(e.hasOwnProperty(a)){var o=e[a];"string"==typeof o?r=e[a]:"object"==typeof o&&(r=n(o,t.slice(1)))}}return r}var r=e;return{get:t}}angular.module("common").factory("resxSvc",e),e.$inject=["resourceContext"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c,u,g,d,m){function p(){!h()&&a.context&&a.context.referrer&&a.context.referrer.indexOf(g.ServerRoutePathRoot)<0&&c.referrer(a.context.referrer)}function f(t){d.String.endsWith("/"+g.Routes.Redirect,t.$$route.originalPath)||(h()?e.referrer=y.$$route.originalPath:(e.referrer=c.referrer()||a.context?a.context.referrer:null,c.referrer(null)),u.traceInfo(e.referrer,"Referrer"))}function h(){return null!==y}var v="Microsoft Partner Center",S=!1,y=null;return function(){s.title(v),s.hideHeaderFooter(S),e.$on("$routeChangeStart",function(e,t){p(),t.redirectTo||l.interceptOnRouteChangeStart(e,t)||(u.interceptOnRouteChangeStart(t),s.showProgressRing(!0,!1),f(t))}),e.$on("$routeChangeSuccess",function(e,t){t.redirectTo||(t.title?s.title(i.get(t.title)):s.title(v),d.isNullOrUndefined(t.hideHeaderFooter)?s.hideHeaderFooter(S):s.hideHeaderFooter(t.hideHeaderFooter),s.showProgressRing(!1),d.String.endsWith("/"+g.Routes.Redirect,t.$$route.originalPath)||(c.redirectTarget(o.url()),y=t))})}(),{firstRouteSucceeded:h}}angular.module("app").factory("routeTransitionSvc",e),e.$inject=["$rootScope","$route","$q","$window","$document","$location","pageSvc","resxSvc","viewAuthSvc","localStorageSvc","tracingSvc","Constants","Helpers","appInsightsInstrumentationSvc"]}(),function(){function e(e,t,n,r,a){function o(){return e.requestContext.sessionId}function s(){return e.debugInfo&&e.debugInfo.correlationId?e.debugInfo.correlationId:a.generateGuid()}function i(){return e.debugInfo&&e.requestContext.requestId?e.requestContext.requestId:a.generateGuid()}function l(){return e.locale}function c(){return e.debugInfo.buildId}function u(){return e.claims?e.claims.sort():null}function g(){return e.token}function d(){return e.tenantId}function m(){return e.partnerInfo?e.partnerInfo.accountRoles:[]}function p(){return e.partnerInfo?e.partnerInfo.aadPartnerType:""}function f(){return e.partnerInfo?e.partnerInfo.agentRole:""}function h(){return e.partnerInfo?e.partnerInfo.administratorRole:""}function v(){return e.applicableFlights?e.applicableFlights.sort():null}return{getSessionId:o,getCorrelationId:s,getRequestId:i,getLocale:l,getAgentRoleName:f,getAdministratorRoleName:h,getActiveClaims:u,getTenantId:d,getAadPartnerType:p,getAccountRoles:m,getToken:g,getBuildId:c,getFlights:v}}angular.module("app").factory("sessionContextSvc",e),e.$inject=["sessionContext","$rootScope","settings","$window","Helpers"]}(),function(){function e(e,t,n,r,a){function o(e){return e.url=n.url(),c.save({},e).$promise}function s(){return u}function i(){u=null}function l(e){u=e}var c=t(a.location.origin+"/"+r.locale+e.SessionStorageUri,null,{save:{method:"POST"}}),u=null;return{storeContext:o,getContext:s,deleteContext:i,setContext:l}}angular.module("common").factory("sessionStorageSvc",e),e.$inject=["Constants","$resource","$location","sessionContext","$window"]}(),function(){function e(e,t,n,r,a,o,s,i,l){function c(){return P}function u(){return I}function g(e){if(e.$$route&&e.$$route.originalPath==="/"+n.Routes.Debug)try{I={clientWidth:$(window).width(),clientHeight:$(window).height(),contentWidth:$(document).width(),contentHeight:$(document).height(),source:d(!0)}}catch(e){f("Could not capture the page snapshot: "+e)}else P=[],I=null,p({path:e.$$route.originalPath,params:e.params},"IncomingRoute")}function d(t){var n=$("html")[0].outerHTML;n=n.replace(/<script/g,"\x3c!--<script").replace(/<\/script>/g,"<\/script>--\x3e"),n=n.replace(/<!--<!--/g,"\x3c!--").replace(/-->-->/g,"--\x3e");var r=e.location.origin+"/";return n=n.replace(/href="\//g,'href="'+r),n=n.replace(/src="\//g,'src="'+r),n=n.replace(/id="shell-header"/,'id="shell-header" style="display: none;"'),n=n.replace(/id="footerWrapper"/,'id="footerWrapper" style="display: none;"'),t&&(n=n.replace(/<body/,'<body style="pointer-events: none;"')),n}function m(e,t){e&&t&&a.trackMetric(e,t)}function p(e,t){S(n.InstrumentationConstants.TraceTypes.Information,e,null,t),a.trackCustomTrace(n.InstrumentationConstants.TraceTypes.Information,e)}function f(e,t){S(n.InstrumentationConstants.TraceTypes.Warning,e,null,t),a.trackCustomTrace(n.InstrumentationConstants.TraceTypes.Warning,e)}function h(e,t){e=angular.toJson(e);var o=r.generateGuid();S(n.InstrumentationConstants.TraceTypes.Error,e,o,t),a.trackCustomException(e,o)}function v(e,t){a.trackCustomEvent(e,t)}function S(e,t,n,r){P.push({id:++k,time:(new Date).getTime(),type:e,entry:"object"==typeof t?angular.toJson(t):t,tags:r}),o.traceToConsole(e,t,n)}function y(e){var t={method:e.method,url:e.url,params:e.params,headers:$.extend({},e.headers),data:e.data,correlationId:e.correlationId};t.headers&&t.headers.Authorization&&$.extend(!0,t.headers,{Authorization:"[removed]"}),p(t,"HttpRequest")}function R(e){var t={method:e.config.method,url:e.config.url,params:e.config.params,headers:$.extend({},e.headers),data:e.data,status:e.status,correlationId:e.config.correlationId};t.headers&&t.headers.Authorization&&$.extend(!0,t.headers,{Authorization:"[removed]"});var r=n.InstrumentationConstants.TraceTypes.Information;(e.status<=0||e.status>=400)&&(r=n.InstrumentationConstants.TraceTypes.Error),S(r,t,null,"HttpResponse")}function C(){var e=i.getAlerts();if(!($.grep(e,function(e,t){return e.isDebugLinkAlert}).length>0)){
var t=l.get("localizedResources.SharedView_DebugLinkAlertMessage").replace("{0}",n.Routes.Debug),r=new i.Alert(i.AlertTypes.Warning,null,t,!0,1e4);r.isDebugLinkAlert=!0,i.addAlert(r)}}var P=[],I=null,k=0;return{getTraces:c,traceInfo:p,traceWarning:f,traceError:h,traceEvent:v,traceMetric:m,traceHttpRequest:y,traceHttpResponse:R,showDebugLinkAlert:C,captureMarkup:d,interceptOnRouteChangeStart:g,getPreviousPageSnapshot:u}}angular.module("common").factory("tracingSvc",e),e.$inject=["$window","$q","Constants","Helpers","appInsightsInstrumentationSvc","consoleTraceDisplaySvc","$rootScope","alertStackSvc","resxSvc"]}(),function(){function e(e,t,n,r){function a(n){n||(n=e.url());var a={authenticate:!0,redirect:n},o=r.Routes.Redirect+t.buildQueryString(a);e.url(o)}function o(){return!t.isNullOrUndefined(n.getActiveClaims())}function s(e,r){if(o()){var a=!1;return!e||0===e.length||($.each(e,function(e,o){if(t.Array.contains(n.getActiveClaims(),o)){if(a=!0,r)return!1}else if(!r)return a=!1,!1}),a)}return!1}function i(t,n){if(!n.redirectTo&&n.claims){if(!o())return t.preventDefault(),a(l(n)),!0;if(!s(n.claims,n.any))return t.preventDefault(),e.url(r.Routes.Unauthorized),!0}return!1}function l(e){var n=e.$$route.originalPath,r={};for(var a in e.params){var o=":"+a;n.indexOf(o)<0?r[a]=e.params[a]:n=n.replace(o,e.params[a])}return n+t.buildQueryString(r)}return{authenticate:a,userHasClaims:o,isAuthorized:s,interceptOnRouteChangeStart:i}}angular.module("common").factory("viewAuthSvc",e),e.$inject=["$location","Helpers","sessionContextSvc","Constants"]}(),function(){function e(e,t,n,r){var a,o,s,i,l={};return l.getGlobalDomainData=function(l){var c=e.defer();return l==t.DomainDataKeys.IndustryFocus&&(a?c.resolve(a):n.getDomainData(t.DomainDataKeys.IndustryFocus).then(function(e){a=e}).catch(function(e){r.traceWarning("Unable to load industry focus data. Error: "+e)}).finally(function(){c.resolve(a)})),l==t.DomainDataKeys.OrganizationSize&&(o?c.resolve(o):n.getDomainData(t.DomainDataKeys.OrganizationSize).then(function(e){o=e}).catch(function(e){r.traceWarning("Unable to load organization size data. Error: "+e)}).finally(function(){c.resolve(o)})),l==t.DomainDataKeys.Products&&(s?c.resolve(s):n.getDomainData(t.DomainDataKeys.Products).then(function(e){s=e}).catch(function(e){r.traceWarning("Unable to load products data. Error: "+e)}).finally(function(){c.resolve(s)})),l==t.DomainDataKeys.ServiceType&&(i?c.resolve(i):n.getDomainData(t.DomainDataKeys.ServiceType).then(function(e){i=e}).catch(function(e){r.traceWarning("Unable to load service type data. Error: "+e)}).finally(function(){c.resolve(i)})),c.promise},l}angular.module("common").factory("globalDomainDataSvc",e),e.$inject=["$q","Constants","finderDomainDataSvc","tracingSvc"]}(),function(){function e(e){function t(t){if(this.globalEngagementData={},t)try{var n=t,r=new EngagementUiModel;return n&&n.partnerSearchCriteria&&n.partnerSearchCriteria.serviceCategory&&(n.title=n.partnerSearchCriteria.serviceCategory,r.title=n.partnerSearchCriteria.serviceCategory),r.notesToPartner=n.notesToPartner,r.estimatedValue=n.estimatedValue,r.targetClosingDate=n.targetClosingDate,r.externalReferenceId=n.externalReferenceId,r.customerProfile=new CustomerProfileApiV2Model,n.customerProfile&&(r.customerProfile.name=n.customerProfile.name,r.customerProfile.size=n.customerProfile.organizationSize,r.customerProfile.address=new AddressApiModel,n.customerProfile.address&&(r.customerProfile.address.addressLine1=n.customerProfile.address.addressLine1,r.customerProfile.address.addressLine2=n.customerProfile.address.addressLine2,r.customerProfile.address.city=n.customerProfile.address.city,r.customerProfile.address.state=n.customerProfile.address.state,r.customerProfile.address.country=n.customerProfile.address.country,r.customerProfile.address.postalCode=n.customerProfile.address.postalCode),r.customerProfile.contact=new ContactV2ApiModel,n.customerProfile.contact&&(r.customerProfile.contact.firstName=n.customerProfile.contact.firstName,r.customerProfile.contact.lastName=n.customerProfile.contact.lastName,r.customerProfile.contact.phoneNumber=n.customerProfile.contact.phone,r.customerProfile.contact.email=n.customerProfile.contact.email)),this.globalEngagementData=r,!0}catch(n){e.traceWarning("Error in setEngagementContextFromV1Model with input : "+t+". Error: "+n)}return!1}function n(t){if(this.globalEngagementData={},t)try{var n=new EngagementUiModel;return n.title=t.title,n.notesToPartner=t.notesToPartner,n.id=t.id,n.estimatedValue=t.estimatedValue,n.targetClosingDate=t.targetClosingDate,n.externalReferenceId=t.externalReferenceId,n.customerProfile=new CustomerProfileApiV2Model,t.customerProfile&&(n.customerProfile.name=t.customerProfile.name,n.customerProfile.size=t.customerProfile.size,n.customerProfile.address=new AddressApiModel,t.customerProfile.address&&(n.customerProfile.address.addressLine1=t.customerProfile.address.addressLine1,n.customerProfile.address.addressLine2=t.customerProfile.address.addressLine2,n.customerProfile.address.city=t.customerProfile.address.city,n.customerProfile.address.state=t.customerProfile.address.state,n.customerProfile.address.country=t.customerProfile.address.country,n.customerProfile.address.postalCode=t.customerProfile.address.postalCode),n.customerProfile.contact=new ContactV2ApiModel,t.customerProfile.contact&&(n.customerProfile.contact.firstName=t.customerProfile.contact.firstName,n.customerProfile.contact.lastName=t.customerProfile.contact.lastName,n.customerProfile.contact.phoneNumber=t.customerProfile.contact.phoneNumber,n.customerProfile.contact.email=t.customerProfile.contact.email)),this.globalEngagementData=n,!0}catch(n){e.traceWarning("Error in setEngagementContextFromEngagement with input : "+t+". Error: "+n)}return!1}function r(){return this.globalEngagementData}return this.globalEngagementData={},{setEngagementContextFromV1Model:t,setEngagementContextFromEngagement:n,getEngagementData:r}}angular.module("common").factory("globalEngagementsSvc",e),e.$inject=["tracingSvc"]}(),function(){function e(e,t,n,r){var a={},o=new SearchRequestUXModel,s=!1;return a.clearSearchRequestUXModel=function(){o=new SearchRequestUXModel},a.setSearchRequestUXModelFromEngagementQueryString=function(e){try{var n=JSON.parse(decodeURIComponent(e));if(a.setSearchRequestUXModelFromEngagementV1Model(n))return!0}catch(n){t.traceWarning("Error in setSearchRequestUXModelFromEngagementQueryString with input : "+e+". Error: "+n)}return!1},a.setSearchRequestUXModelFromEngagementV1Model=function(a){var i={};try{var l=a;if(s=!0,l&&l.partnerSearchCriteria){if(l.partnerSearchCriteria.industryFocus){var c=n.getDomainDataValueByKeyId(l.partnerSearchCriteria.industryFocus);if(c){var u=c+"-"+e.TagCategories.IndustryFocus,g=new UXTagModel(l.partnerSearchCriteria.industryFocus,c,e.TagCategories.IndustryFocus);i[u]=g}else t.traceWarning("Unknown/invalid industry focus value: "+l.partnerSearchCriteria.industryFocus+".")}if(l.partnerSearchCriteria.products&&Array.isArray(l.partnerSearchCriteria.products)&&l.partnerSearchCriteria.products.length>0&&angular.forEach(l.partnerSearchCriteria.products,function(r){if(r.length>0){var a=n.getDomainDataValueByKeyId(r);if(a){var o=a+"-"+e.TagCategories.Product,s=new UXTagModel(r,a,e.TagCategories.Product);i[o]=s}else t.traceWarning("Unknown/invalid product value: "+r+".")}}),l.partnerSearchCriteria.serviceTypes&&Array.isArray(l.partnerSearchCriteria.serviceTypes)&&l.partnerSearchCriteria.serviceTypes.length>0&&angular.forEach(l.partnerSearchCriteria.serviceTypes,function(r){if(r.length>0){var a=n.getDomainDataValueByKeyId(r);if(a){var o=a+"-"+e.TagCategories.ServiceType,s=new UXTagModel(r,a,e.TagCategories.ServiceType);i[o]=s}else t.traceWarning("Unknown/invalid service type value: "+r+".")}}),l.partnerSearchCriteria.companyName){var u=l.partnerSearchCriteria.keyword+"-"+e.TagCategories.Default,g=new UXTagModel(l.partnerSearchCriteria.companyName,l.partnerSearchCriteria.companyName,e.TagCategories.Default);i[u]=g}else if(l.partnerSearchCriteria.keyword){var u=l.partnerSearchCriteria.keyword+"-"+e.TagCategories.Default,g=new UXTagModel(l.partnerSearchCriteria.keyword,l.partnerSearchCriteria.keyword,e.TagCategories.Default);i[u]=g}if(l.partnerSearchCriteria.skills&&Array.isArray(l.partnerSearchCriteria.skills)&&l.partnerSearchCriteria.skills.length>0&&angular.forEach(l.partnerSearchCriteria.skills,function(t){if(t.length>0){var n=t+"-"+e.TagCategories.PartnerTag,r=new UXTagModel(t.toLowerCase(),t,e.TagCategories.PartnerTag);i[n]=r}}),o.displayTags=i,l.customerProfile){if(n.getDomainDataValueByKeyId(l.customerProfile.organizationSize)?o.organizationSize=l.customerProfile.organizationSize:t.traceWarning("Unknown/invalid organization size value: "+l.customerProfile.organizationSize+"."),l.customerProfile.address&&l.customerProfile.address.country){r.getCountryName(l.customerProfile.address.country.toUpperCase())!=l.customerProfile.address.country.toUpperCase()?o.selectedCountryCode.countryCode=l.customerProfile.address.country.toUpperCase():t.traceWarning("Unknown/invalid country value: "+l.customerProfile.address.country+".")}}return!0}}catch(e){t.traceWarning("Error in setSearchRequestUXModelFromEngagementV1Model with input : "+a+". Error: "+e)}return!1},a.setSearchRequestUXModelFromEngagement=function(a){var i={};try{if(s=!0,a){if(a.partnerSearchCriteria.industryFocus){var l=n.getDomainDataValueByKeyId(a.partnerSearchCriteria.industryFocus);if(l){var c=l+"-"+e.TagCategories.IndustryFocus,u=new UXTagModel(a.partnerSearchCriteria.industryFocus,l,e.TagCategories.IndustryFocus);i[c]=u}else t.traceWarning("Unknown/invalid industry focus value: "+a.partnerSearchCriteria.industryFocus+".")}if(a.partnerSearchCriteria.product&&Array.isArray(a.partnerSearchCriteria.product)&&a.partnerSearchCriteria.product.length>0&&angular.forEach(a.partnerSearchCriteria.product,function(r){if(r.length>0){var a=n.getDomainDataValueByKeyId(r);if(a){var o=a+"-"+e.TagCategories.Product,s=new UXTagModel(r,a,e.TagCategories.Product);i[o]=s}else t.traceWarning("Unknown/invalid product value: "+r+".")}}),a.partnerSearchCriteria.serviceType&&Array.isArray(a.partnerSearchCriteria.serviceType)&&a.partnerSearchCriteria.serviceType.length>0&&angular.forEach(a.partnerSearchCriteria.serviceType,function(r){if(r.length>0){var a=n.getDomainDataValueByKeyId(r);if(a){var o=a+"-"+e.TagCategories.ServiceType,s=new UXTagModel(r,a,e.TagCategories.ServiceType);i[o]=s}else t.traceWarning("Unknown/invalid service type value: "+r+".")}}),a.partnerSearchCriteria.keyword){var c=a.partnerSearchCriteria.keyword+"-"+e.TagCategories.Default,u=new UXTagModel(a.partnerSearchCriteria.keyword,a.partnerSearchCriteria.keyword,e.TagCategories.Default);i[c]=u}if(o.displayTags=i,a.customerProfile){if(n.getDomainDataValueByKeyId(a.customerProfile.size)?o.organizationSize=a.customerProfile.size:t.traceWarning("Unknown/invalid organization size value: "+a.customerProfile.size+"."),a.customerProfile.address&&a.customerProfile.address.country){r.getCountryName(a.customerProfile.address.country.toUpperCase())!=a.customerProfile.address.country.toUpperCase()?o.selectedCountryCode.countryCode=a.customerProfile.address.country.toUpperCase():t.traceWarning("Unknown/invalid country value: "+a.customerProfile.address.country+".")}}return!0}}catch(e){t.traceWarning("Error in setSearchRequestUXModelFromEngagement with input : "+a+". Error: "+e)}return!1},a.setCustomFilters=function(e){o.customFilters={};try{if(e){customFiltersQueryValueList=e.split(";");for(var n=0;n<customFiltersQueryValueList.length;n++){for(var r=customFiltersQueryValueList[n].split(","),a=r[0],i=[],l=1;l<r.length;l++)i.push(r[l]);o.customFilters[a]=i}return s=!0,!0}t.traceWarning("No customFiltersQueryValue input was passed in.")}catch(n){t.traceWarning("Error in setCustomFilters with input : "+e+". Error: "+n)}return!1},a.getSearchRequestUXModel=function(){return o},a.setSearchRequestUXModel=function(e){o=e},a.isSearchRequestUXModelInitializedWithEngagementDataOrCustomerFilters=function(){return s},a.getAPIRequestModel=function(){var t=new SearchRequestAPIModel;return Object.keys(o.displayTags).forEach(function(n){var r=o.displayTags[n].category,a=o.displayTags[n].key;switch(r){case e.TagCategories.Product:t.product.push(a);break;case e.TagCategories.ServiceType:t.serviceType.push(a);break;case e.TagCategories.IndustryFocus:t.industryFocus=a;break;case e.TagCategories.PartnerTag:t.partnerTags.push(a);break;case e.TagCategories.Default:t.keyword=a}}),o.showCountryCodeFilter?(t.countryCode=o.selectedCountryCode.countryCode,t.longitude=null,t.latitude=null,t.geoRadius=null):(t.countryCode=null,t.longitude=o.longitude,t.latitude=o.latitude,t.geoRadius=o.geoRadius),t.customFilters=o.customFilters,t.rankingContext=e.RankingContext.DefaultRankingContext,t.organizationSize=o.organizationSize,t.size=20,t},a.handlePartnerSearchSuggestionsOnClick=function(n,r){if(""!==n.cleanValue.trim()){var a;if("object"==typeof JSON&&"function"==typeof JSON.stringify){for(var s=[],i=0;i<r.length;i++){var l={};l.key=r[i].key,l.value=r[i].cleanValue,s.push(l)}a=JSON.stringify(s)}else a="unsupported browser";var c=new SuggestionEventData(e.InstrumentationConstants.ClientControlIds.SuggestionsClicked,n.originalKeyword,n.key,n.cleanValue,n.category,a);t.traceEvent(e.InstrumentationConstants.ClientEvents.SuggestionsClicked,c);var u=null;switch(n.category){case e.SuggestionsConstants.CategorySearchProduct:n.cleanValue in o.displayTags||(key=n.cleanValue+"-"+e.TagCategories.Product,u=new UXTagModel(n.key,n.cleanValue,e.TagCategories.Product));break;case e.SuggestionsConstants.CategorySearchServiceType:n.cleanValue in o.displayTags||(key=n.cleanValue+"-"+e.TagCategories.ServiceType,u=new UXTagModel(n.key,n.cleanValue,e.TagCategories.ServiceType));break;case e.SuggestionsConstants.CategorySearchPartnerTag:n.cleanValue in o.displayTags||(key=n.cleanValue+"-"+e.TagCategories.PartnerTag,u=new UXTagModel(n.key,n.cleanValue,e.TagCategories.PartnerTag));break;case e.SuggestionsConstants.CategorySearchIndustryFocus:n.cleanValue in o.displayTags||(key=n.cleanValue+"-"+e.TagCategories.IndustryFocus,u=new UXTagModel(n.key,n.cleanValue,e.TagCategories.IndustryFocus),angular.forEach(o.displayTags,function(t,n){t.category==e.TagCategories.IndustryFocus&&delete o.displayTags[n]}));break;case e.SuggestionsConstants.CategoryDefaultSuggestion:n.cleanValue in o.displayTags||(key=n.cleanValue+"-"+e.TagCategories.Default,u=new UXTagModel(n.key,n.cleanValue,e.TagCategories.Default),angular.forEach(o.displayTags,function(t,n){t.category==e.TagCategories.Default&&delete o.displayTags[n]}))}return null!==key&&(o.displayTags[key]=u),o.displayTags}},a}angular.module("common").factory("globalSearchRequestSvc",e),e.$inject=["Constants","tracingSvc","finderDomainDataSvc","countryInformationSvc"]}(),function(){function e(){var e={},t=[];return e.clearPartners=function(){t=[]},e.addPartner=function(e){t.push(e)},e.getPartners=function(){return t},e.setPartners=function(e){t=e},e}angular.module("common").factory("partnersToSendEngagementsSvc",e)}(),function(){function e(){var e={},t=!1,n=null;return e.hasSearchExecuted=function(){return t},e.setSearchExecutedToFalse=function(){t=!1},e.setSearchExecutedToTrue=function(){return t=!0,!0},e.resetLoadMoreCount=function(){return loadMoreCount=0,!0},e.browsePosition=function(){return n},e.setBrowsePosition=function(e){return n=e,!0},e}angular.module("common").factory("searchPageSearchExecutionState",e)}(),function(){function e(){var e={},t=[];return e.clearPartners=function(){t.length=0},e.addPartner=function(e){t.push(e)},e.removePartner=function(e){for(var n=0;n<t.length;n++)if(t[n].partnerId==e.partnerId){t.splice(n,1);break}},e.getSelectedPartners=function(){return t},e}angular.module("common").factory("selectedPartnersInSearchSvc",e)}(),function(){function e(e,t,n,r,a){var o=this;o.onKeyDown=function(n){"body"===n.currentTarget.nodeName.toLowerCase()&&n.altKey&&n.ctrlKey&&68===n.keyCode&&(n.preventDefault(),e.path(t.Routes.Debug))},o.frameworkInitialized=function(){return a.firstRouteSucceeded()},o.leftMenuConfigured=function(){return!n.isNullOrUndefined(leftMenuSvc.currentConfiguration())},o.hideHeaderFooter=function(){return r.hideHeaderFooter()},o.showProgressRing=function(){return r.showProgressRing()},o.getContentOpacity=function(){return o.progressRingBlocks()&&o.showProgressRing()?.5:1},o.progressRingBlocks=function(){return r.progressRingBlocks()},o.getProgressRingMessage=function(){return r.getProgressRingMessage()},o.title=function(){return r.title()}}angular.module("app").controller("appRootController",e),e.$inject=["$location","Constants","Helpers","pageSvc","routeTransitionSvc"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c){var u=this,g=n.get;if(u.persona=c.getPersona(),u.isAgent=u.persona==a.Personas.AgentUser,u.isLinkedInUser=u.persona==a.Personas.LinkedInUser,u.isAuthenticated=!0===u.isAgent||!0===u.isLinkedInUser,u.isAuthenticated){u.engagementsText=g("localizedResources.Engagement_Details_Engagements"),u.pageTitle=g("localizedResources.Engagement_Details_Engagement_For"),u.referralTrackingText=g("localizedResources.Engagement_Details_Referral_Tracking"),u.dateSubmittedText=g("localizedResources.Engagement_Details_Date_Submitted"),u.customerOrganizationNameText=g("localizedResources.Engagement_Details_Customer_Organization_Name"),u.partnerNameText=g("localizedResources.Engagement_Details_Partner_Name"),u.statusText=g("localizedResources.Engagement_Details_Status"),u.referralTrackingMessage=g("localizedResources.Engagement_Details_Referral_Tracking_Message"),u.contactInformation=g("localizedResources.Engagement_Details_Contact_Information"),u.organizationText=g("localizedResources.Engagement_Details_Organization"),u.employeeCountText=g("localizedResources.Engagement_Details_Employee_Count"),u.customerContactText=g("localizedResources.Engagement_Details_Customer_Contact"),u.customerContactMessage=g("localizedResources.Engagement_Details_Customer_Contact_Message"),u.estimatedValueText=g("localizedResources.Engagement_Details_Estimated_Value"),u.targetClosingDateText=g("localizedResources.Engagement_Details_Target_Closing_Date"),u.customerNeedsText=g("localizedResources.Engagement_Details_Customer_Needs"),u.lookingForText=g("localizedResources.Engagement_Details_Looking_For"),u.productText=g("localizedResources.Engagement_Details_Product"),u.serviceTypeText=g("localizedResources.Engagement_Details_Service_Type"),u.numberOfSeatsText=g("localizedResources.Engagement_Details_Number_Of_Seats"),u.industryFocusText=g("localizedResources.Engagement_Details_Industry_Focus"),u.engagementLinkText=g("localizedResources.Engagement_Details_Engagement_Link"),u.agentText=g("localizedResources.Engagement_Details_Agent"),u.engagementIdText=g("localizedResources.Engagement_Details_Engagement_Id"),u.dateCreatedText=g("localizedResources.Engagement_Details_Date_Created"),u.notesToPartnerText=g("localizedResources.Engagement_Details_Notes_To_Partner"),u.productList=[],u.serviceTypeList=[];var d=o.getLocale();u.engagementId=t.engagementId,u.engagementSearchUrl=a.CutomerFacingBaseUrl+"solution-providers/search?engagementId="+u.engagementId,u.engagementListUrl=a.Routes.EngagementList.replace(/\//g,""),u.showAlert=!1,u.showProgress=!0,u.engagementId&&r.getEngagementDetails(u.engagementId).then(function(e){u.engagementDetails=e,u.engagementReferrals=e.referral,u.engagementDetails&&(u.engagementDetails.customerProfile&&u.engagementDetails.customerProfile.size&&(u.organizationSize=i.getDomainDataValueByKeyId(u.engagementDetails.customerProfile.size)),u.engagementDetails.partnerSearchCriteria&&(u.engagementDetails.partnerSearchCriteria.industryFocus&&(u.industryFocus=i.getDomainDataValueByKeyId(u.engagementDetails.partnerSearchCriteria.industryFocus)),u.engagementDetails.partnerSearchCriteria.product&&u.engagementDetails.partnerSearchCriteria.product.length>0&&angular.forEach(u.engagementDetails.partnerSearchCriteria.product,function(e){e.length>0&&u.productList.push(i.getDomainDataValueByKeyId(e))}),u.engagementDetails.partnerSearchCriteria.serviceType&&u.engagementDetails.partnerSearchCriteria.serviceType.length>0&&angular.forEach(u.engagementDetails.partnerSearchCriteria.serviceType,function(e){e.length>0&&u.serviceTypeList.push(i.getDomainDataValueByKeyId(e))})))}).catch(function(e){u.alert=g("localizedResources.AllView_ErrorMessage"),l.traceError("EngagementDetails: getEngagementDetails failed. Error: "+e),u.showAlert=!0}).finally(function(e){u.showProgress=!1}),u.predicate="assignmentDate",u.reverseValue=!1,u.setSortValues=function(e,t){u.predicate===e?u.reverseValue=!t:u.reverseValue=!1,u.predicate=e},u.convertToLocaleDate=function(e){return s.DateTime.convertDateToLocaleFormat(d,e)}}}angular.module("app").controller("EngagementDetailsController",e),e.$inject=["$location","$routeParams","resxSvc","engagementsSvc","Constants","sessionContextSvc","Helpers","finderDomainDataSvc","tracingSvc","userPersonaSvc"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c){function u(t){var n=e.defer();return a.getEngagementsSeek(t,g.isLinkedInUser).then(function(e){g.showEngagements=e.items,p=e.links.next,f=e.links.previous,n.resolve({isOnFirstPage:e.isFirstPage,isOnLastPage:e.isLastPage})}).catch(function(e){g.alert=d("localizedResources.AllView_ErrorMessage"),l.traceError("EngagementList: getEngagementsSeek failed. Error: "+e),g.showAlert=!0,n.reject()}).finally(function(){g.showProgress=!1}),n.promise}var g=this,d=r.get;if(g.persona=c.getPersona(),g.isAgent=g.persona==o.Personas.AgentUser,g.isLinkedInUser=g.persona==o.Personas.LinkedInUser,g.isAuthenticated=!0===g.isAgent||!0===g.isLinkedInUser,g.isAuthenticated){g.pageTitle=d("localizedResources.Engagement_List_Engagement_List_Title"),g.addEngagement=d("localizedResources.Engagement_List_Add_Engagement"),g.dateCreated=d("localizedResources.Engagement_List_Date_Created"),g.patnerEngagementId=d("localizedResources.Engagement_List_Engagement_Id"),g.customerOrganizationName=d("localizedResources.Engagement_List_Customer_Organization_Name");var m=s.getLocale(),p="",f="";g.showAlert=!1,g.showProgress=!0,g.createEngagement=function(){t.path(o.Routes.CreateEngagement)},g.enterKeyOncreateEngagement=function(e){i.isEnterKey(e)&&(g.createEngagement(),e.preventDefault())},g.fetchFirstPage=function(){var t=e.defer();return a.getEngagements(20,g.isLinkedInUser).then(function(e){g.showEngagements=e.items,e.links&&(p=e.links.next,f=e.links.previous),t.resolve({isOnFirstPage:e.isFirstPage,isOnLastPage:e.isLastPage})}).catch(function(e){g.alert=d("localizedResources.AllView_ErrorMessage"),l.traceError("EngagementList: getEngagements failed. Error: "+e),g.showAlert=!0,t.reject()}).finally(function(){g.showProgress=!1}),t.promise},g.fetchPreviousPage=function(){return u(f)},g.fetchNextPage=function(){return u(p)},g.navigateToEngagementDetailsPage=function(e){!0===g.isAgent&&t.path(o.Routes.EngagementDetails.replace(":engagementId",e)),!0===g.isLinkedInUser&&t.path("/myengagements/:engagementId".replace(":engagementId",e))},g.convertToLocaleDate=function(e){return i.DateTime.convertDateToLocaleFormat(m,e)}}}angular.module("app").controller("EngagementListController",e),e.$inject=["$q","$location","$routeParams","resxSvc","engagementsSvc","Constants","sessionContextSvc","Helpers","tracingSvc","userPersonaSvc"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c,u,g,d,m,p,f,h,v,S,y,R,C,P,I,k){function T(){angular.forEach(z.createReferralForm,function(e,t){t.startsWith("$")||e.$viewValue&&(e.$setDirty(),e.$setTouched(),e.$validate())})}var z=this,D=e.get;if(z.engagement={},z.engagement.customerProfile={address:{},contact:{}},z.engagement.partnerSearchCriteria={},z.engagement.partnerSearchCriteria.product=[],z.engagement.partnerSearchCriteria.serviceType=[],z.engagement.partnerSearchCriteria.partnerTags=[],z.persona=I.getPersona(),z.isAgent=z.persona==t.Personas.AgentUser,z.isLinkedInUser=z.persona==t.Personas.LinkedInUser,z.linkedInFlight=S.isFlightEnabled(t.Flights.LinkedInFlight),z.linkedInLoading=!1,z.isLinkedInUser){var E=v.getContext();null!=E&&(v.deleteContext(),c.setSearchRequestUXModel(E.searchUXModel),a.setPartners(E.partners));var M=k.getUserInfo();z.engagement.customerProfile.contact.firstName=M.firstName,z.engagement.customerProfile.contact.lastName=M.lastName,z.engagement.customerProfile.contact.email=M.email,z.linkedInImage=null,null!=M.image&&""!=M.image&&(z.linkedInImage=M.image),z.linkedInLoading=!0,C.getPartnerDetails("li_"+M.organization,null).then(function(e){if(e.length>0){l.traceMetric(t.MetricNames.SuccessfulLinkedInRFIPopulation,1);var n=e[0];z.engagement.customerProfile.address.addressLine1=n.location.address.addressLine1,z.engagement.customerProfile.address.addressLine2=n.location.address.addressLine2,z.engagement.customerProfile.address.city=n.location.address.city,z.engagement.customerProfile.address.state=n.location.address.state,z.engagement.customerProfile.address.country=n.location.address.country,z.engagement.customerProfile.address.postalCode=n.location.address.postalCode,z.engagement.customerProfile.name=n.name,z.createReferralForm&&z.createReferralForm.$setDirty()}else l.traceMetric(t.MetricNames.FailedLinkedInRFIPopulation,1);z.linkedInLoading=!1}).catch(function(e){z.linkedInLoading=!1,l.traceMetric(t.MetricNames.FailedLinkedInRFIPopulation,1)})}z.searchRequestUXModel=c.getSearchRequestUXModel(),z.partners=a.getPartners();var L=t.SearchTrackingIdKeyforCache,_=r.get("partnerFinderSearchKeywords")||r("partnerFinderSearchKeywords");_.get(L)?z.searchTrackingId=_.get(L):z.searchTrackingId="",z.serviceDescriptionTextLength=4e3,z.pageTitle=D("localizedResources.RFI_Page_Title"),z.selectedPartnersLabel=D("localizedResources.RFI_Page_SelectedPartnersLabel"),z.customerNeedsTitleLabel=D("localizedResources.RFI_Page_CustomerNeedsTitleLabel"),z.customerDetailsLabel=D("localizedResources.RFI_Page_CustomerDetailsLabel"),z.firstNameLabelText=D("localizedResources.RFI_Page_FirstNameLabel"),z.lastNameLabelText=D("localizedResources.RFI_Page_LastNameLabel"),z.industryCategoryLabelText=D("localizedResources.RFI_Page_AgentIndustryFocusLabel"),z.countryText=D("localizedResources.AllView_CountryOrRegion"),z.isAgent?(z.newBusinessNeedsTitle=D("localizedResources.RFI_Page_NewUX_BusinessNeedsTitle"),z.organizationNameLabel=D("localizedResources.RFI_Page_OrganizationNameLabel"),z.organizationSizeLabel=D("localizedResources.RFI_Page_OrganizationSizeLabel"),z.agentCustomerDetails=D("localizedResources.RFI_Page_AgentCustomerDetails"),z.createEngagementTitle=D("localizedResources.RFI_Page_CreateEngagementTitle"),z.newAgentLabel=D("localizedResources.RFI_Page_NewUX_AgentLabel"),z.estimatedValue=D("localizedResources.RFI_Page_EstimatedValueLabel"),z.currencyLabelText=D("localizedResources.RFI_Page_CurrencyLabel"),z.customersTargetClosingDateText=D("localizedResources.RFI_Page_ClosingDateText"),z.companyNameLabelText=D("localizedResources.RFI_Page_CompanyLabel"),z.companySizeLabelText=D("localizedResources.RFI_Page_AgentCompanySizeLabel"),z.referralInfoHeader=D("localizedResources.RFI_Page_AgentCustomer_Details"),z.agentLabel=D("localizedResources.RFI_Page_AgentLabel"),z.submitButtonText=D("localizedResources.RFI_Page_SaveButtonLabel")):(z.partners&&0!==z.partners.length||(l.traceWarning("Customer can't create referral without selecting any partners"),n.path(t.Routes.Search)),z.newBusinessNeedsTitle=D("localizedResources.RFI_Page_NewUX_CustomerUX_BusinessNeedsTitle"),z.organizationNameLabel=D("localizedResources.RFI_Page_CustomerUX_OrganizationNameLabel"),z.organizationSizeLabel=D("localizedResources.RFI_Page_CustomerUX_OrganizationSizeLabel"),z.searchTagsAndDetailsHeader=D("localizedResources.RFI_Page_SearchTagsAndDetailsHeader"),z.infoMessageForClientHeader=D("localizedResources.RFI_Page_InfoMessageForClientHeader"),z.infoMessageForClientContent=D("localizedResources.RFI_Page_InfoMessageForClientContent"),z.contactInfoHeader=D("localizedResources.RFI_Page_ContactInfoHeader"),z.organizationDetailsHeader=D("localizedResources.RFI_Page_OrganizationDetailsHeader"),z.businessNeedsTitle=D("localizedResources.RFI_Page_BusinessNeedsTitle"),z.companyNameLabelText=D("localizedResources.RFI_Page_CustomerUX_CompanyLabel"),z.companySizeLabelText=D("localizedResources.RFI_Page_CustomerCompanySizeLabel"),z.referralInfoHeader=D("localizedResources.RFI_Page_Customer_Details")),z.addressLine1LabelText=D("localizedResources.RFI_Page_Address1Label"),z.addressLine2LabelText=D("localizedResources.RFI_Page_Address2Label"),z.cityLabelText=D("localizedResources.RFI_Page_CityLabel"),z.stateLabelText=D("localizedResources.RFI_Page_StateLabel"),z.postalCodeLabelText=D("localizedResources.RFI_Page_PostalCodeLabel"),z.contactEmailLabelText=D("localizedResources.RFI_Page_EmailLabel"),z.phoneNumberLabelText=D("localizedResources.RFI_Page_PhoneLabel"),z.submitButtonText=D("localizedResources.RFI_Page_SubmitButtonLabel"),z.cancelButtonText=D("localizedResources.RFI_Page_CancelButtonLabel"),z.lengthValidationMessage=D("localizedResources.Validation_FieldLength").replace("{0}","1").replace("{1}","50"),z.descriptionLengthValidationMessage=D("localizedResources.Validation_FieldLength").replace("{0}","1").replace("{1}",z.serviceDescriptionTextLength),z.industryValidationMessage=D("localizedResources.RFI_Page_IndustryCategoryValidationText"),z.companySizeValidationMessage=D("localizedResources.RFI_Page_CompanySizeValidationText"),z.phoneNumberValidationMessage=D("localizedResources.Validation_PhoneNumberValid"),z.emailValidationMessage=D("localizedResources.RFI_Page_EmailAddressValidationMessage"),z.countryValidationMessage=D("localizedResources.Validation_CountryRequired"),z.stateValidationMessage=D("localizedResources.Validation_StateRequired"),z.postalCodeValidationMessage=D("localizedResources.Validation_ZipCodeValid"),z.selectAnOptionText=D("localizedResources.AllView_SelectOption"),z.currencyValidationMessage=D("localizedResources.Validation_CorrectValue"),z.industryFocusDefault=D("localizedResources.RFI_Page_IndustryFocusDefault"),z.organizationSizeDefault=D("localizedResources.RFI_Page_CompanySizeDefault"),z.isPrimaryContactPurchasingAuthorityHelpText=D("localizedResources.RFI_Page_PrimaryPurchasingHelpLabel"),z.isPrimaryContactPurchasingAuthorityHelpTextTitle=D("localizedResources.RFI_Page_PrimaryPurchasingHelpLabelTitle"),z.customerTitleLabel=D("localizedResources.RFI_Page_CustomerTitleLabel"),z.notesToPartner=D("localizedResources.RFI_Page_NotesToPartnerLabel"),z.consentToContactPartners=D("localizedResources.RFI_Page_ConsentToContactPartners"),z.consentToContactSpecificPartners=D("localizedResources.RFI_Page_ConsentToContactSpecificPartners"),z.WhatIsThisLabel=D("localizedResources.WhatIsThisText"),z.ConsentHelpText=D("localizedResources.RFI_Page_ConsentHelpText"),z.errorMessage=D("localizedResources.AllView_ErrorMessageToDisplay"),z.linkedInSignInLabelText=D("localizedResources.RFI_Page_LinkedInSignInLabel"),z.linkedInSignInDescription=D("localizedResources.RFI_Page_LinkedInSignInDescription"),z.selectedPartnerText=D("localizedResources.RFI_Page_SelectedPartnerText"),z.topImage=t.Routes.HeroImage,z.silverBadgeImage=t.Routes.SilverBadgeImage,z.goldBadgeImage=t.Routes.GoldBadgeImage,z.linkedinBadgeImage=t.Routes.LinkedinBadgeImage,z.linkedinSignInImage=t.Routes.LinkedinSignInImage,z.phoneNumberRegex=t.Regex.PhoneRegex,z.emailRegex=t.Regex.EmailRegex,z.partnerNoLogo=t.Routes.PartnerNoLogo,z.competencyNone=0,z.competencySilver=1,z.competencyGold=2,z.minDate=new Date,z.isProfileReadOnly=!1,z.submitRequestFailed=!1,z.promiseLoading=!0;var A=[];if(z.searchTagsExists=!1,z.searchRequestUXModel&&z.searchRequestUXModel.displayTags)for(var w in z.searchRequestUXModel.displayTags){z.searchTagsExist=!0;break}setTimeout(function(){z.fixOverflow(0)},0),p.getGlobalDomainData(t.DomainDataKeys.IndustryFocus).then(function(e){z.industryOptions=e}).finally(function(){
z.industryOptions||l.traceWarning("Unable to load Industry Focus data")}),p.getGlobalDomainData(t.DomainDataKeys.OrganizationSize).then(function(e){z.companySizeOptions=e}).finally(function(){z.companySizeOptions||l.traceWarning("Unable to load company size data")}),z.updateEngagementWithSearchCriteria=function(){var e=c.getAPIRequestModel();z.engagement.partnerSearchCriteria.serviceType=e.serviceType,z.engagement.partnerSearchCriteria.product=e.product,z.engagement.partnerSearchCriteria.industryFocus=e.industryFocus,z.engagement.partnerSearchCriteria.partnerTags=e.partnerTags,z.engagement.partnerSearchCriteria.keyword=e.keyword,z.isLinkedInUser||(z.engagement.customerProfile.address.country=e.countryCode),z.engagement.customerProfile.size=e.organizationSize,z.engagement.customerProfile.size&&(z.organizationSize=f.getDomainDataValueByKeyId(z.engagement.customerProfile.size)),z.engagement.partnerSearchCriteria.industryFocus&&(z.industryFocus=f.getDomainDataValueByKeyId(z.engagement.partnerSearchCriteria.industryFocus))},z.updateFormWithCustomerProfileInfo=function(){var e=u.getEngagementData();if(e&&e.customerProfile){if(z.engagement.customerProfile.name=e.customerProfile.name,z.engagement.title=e.title,z.engagement.notesToPartner=e.notesToPartner,z.engagement.externalReferenceId=e.externalReferenceId,z.engagement.estimatedValue=e.estimatedValue,!isNaN(Date.parse(e.targetClosingDate))){var t=new Date(e.targetClosingDate);if(t){var n=t.getUTCDate(),r=t.getUTCMonth()+1,a=t.getUTCFullYear();z.targetClosingDate=r+"/"+n+"/"+a}}e.customerProfile.address&&(z.engagement.customerProfile.address.addressLine1=e.customerProfile.address.addressLine1,z.engagement.customerProfile.address.addressLine2=e.customerProfile.address.addressLine2,z.engagement.customerProfile.address.city=e.customerProfile.address.city,z.engagement.customerProfile.address.state=e.customerProfile.address.state,z.isLinkedInUser||(z.engagement.customerProfile.address.country=e.customerProfile.address.country),z.engagement.customerProfile.address.postalCode=e.customerProfile.address.postalCode),e.customerProfile.contact&&(z.engagement.customerProfile.contact.firstName=e.customerProfile.contact.firstName,z.engagement.customerProfile.contact.lastName=e.customerProfile.contact.lastName,z.engagement.customerProfile.contact.email=e.customerProfile.contact.email,z.engagement.customerProfile.contact.phoneNumber=e.customerProfile.contact.phoneNumber),e.id&&(z.isProfileReadOnly=!0,z.engagementExists=!0,z.engagement.id=e.id),z.createReferralForm&&z.createReferralForm.$setDirty()}},m.waitForAll(A).then(function(){z.updateEngagementWithSearchCriteria(),z.updateFormWithCustomerProfileInfo()}).catch(function(e){z.errorMessage=D("localizedResources.AllView_ErrorMessageToDisplay")}).finally(function(){z.showProgress=!1,z.promiseLoading=!1}),z.createOrUpdateEngagement=function(){if(z.showProgress=!0,z.disabledSubmit=!0,z.createdEngagementId="",z.isAgent&&z.targetClosingDate){var e=z.targetClosingDate,r=new Date(e),a=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()));z.engagement.targetClosingDate=a.toISOString()}z.engagement.referral=[];for(var i=0;i<z.partners.length;i++){var u=z.partners[i],g={};g.partnerName=u.partnerName,g.partnerId=u.partnerId,g.locationId=u.locationId,g.locale=o.locale,g.details=z.engagement.notesToPartner,z.engagement.referral.push(g)}z.engagementExists?s.updateEngagement(z.engagement.id,z.engagement).then(function(e){z.isAgent?(n.path(t.Routes.EngagementList),z.showLoadingProgress=!0):(h.clearPartners(),z.showConfirmationModal())}).catch(function(){z.errorMessage=D("localizedResources.AllView_ErrorMessageToDisplay"),l.traceError("RFI: createOrUpdateEngagement failed on engagement scenario"),z.submitRequestFailed=!0}).finally(function(){z.showProgress=!1,z.disabledSubmit=!1;for(var e=0;e<z.engagement.referral.length;e++){var n=new EventData(t.InstrumentationConstants.ClientControlIds.RequestForInformationPageSubmit,z.searchTrackingId,z.engagement.referral[e].partnerId,z.engagement.referral[e].locationId,null,null,z.engagement.id);l.traceEvent(t.InstrumentationConstants.ClientEvents.RequestForInformationPageSubmit,n)}}):s.createEngagement(z.engagement).then(function(e){z.createdEngagementId=e.id,l.traceInfo("RFI submitted. Id: "+z.createdEngagementId),z.isLinkedInUser?(l.traceMetric(t.MetricNames.SuccessfulLinkedInRFICreate,1),R.createOrUpdatePersonalizationDetails(e.id).then(function(r){l.traceMetric(t.MetricNames.SuccessfulPersonalizationUpdate,1),z.showProgress=!1,z.disabledSubmit=!1,h.clearPartners(),c.clearSearchRequestUXModel(),P.setSearchExecutedToFalse(),P.resetLoadMoreCount(),n.path(t.Routes.PersonalizationEngagementDetails.replace(":engagementId",e.id))}).catch(function(){l.traceMetric(t.MetricNames.FailedPersonalizationUpdate,1),l.traceError("RFI: createOrUpdateEngagement failed on updating personalization"),z.showProgress=!1,z.disabledSubmit=!1,n.path(t.Routes.Search)})):z.isAgent?(n.path(t.Routes.EngagementList),z.showLoadingProgress=!0):(h.clearPartners(),z.showConfirmationModal())}).catch(function(){z.isLinkedInUser&&l.traceMetric(t.MetricNames.FailedLinkedInRFICreate,1),l.traceError("RFI: createOrUpdateEngagement failed on regular flow scenario"),z.submitRequestFailed=!0}).finally(function(){z.isLinkedInUser||(z.showProgress=!1,z.disabledSubmit=!1);for(var e=0;e<z.engagement.referral.length;e++){var n=new EventData(t.InstrumentationConstants.ClientControlIds.RequestForInformationPageSubmit,z.searchTrackingId,z.engagement.referral[e].partnerId,z.engagement.referral[e].locationId,null,null,z.createdEngagementId);l.traceEvent(t.InstrumentationConstants.ClientEvents.RequestForInformationPageSubmit,n)}})},z.signInToLinkedIn=function(){v.storeContext({partners:z.partners,searchUXModel:z.searchRequestUXModel}).then(function(e){y.signIn()})},z.showCancelModal=function(){z.cancelModalData={title:D("localizedResources.CancelPopupView_Title"),message:D("localizedResources.RFI_Page_CancelModalMessageText"),primaryButtonText:D("localizedResources.CancelPopupView_Yes"),secondaryButtonText:D("localizedResources.CancelPopupView_No"),primaryButtonCallback:z.displayPartnerFinderPage},i.show(z.cancelModalData)},z.showConfirmationModal=function(){z.confirmationModalData={title:D("localizedResources.RFI_Page_ConfirmationModalTitleText"),message:D("localizedResources.RFI_Page_ConfirmationModalMessageText"),primaryButtonText:D("localizedResources.AllView_Ok"),primaryButtonCallback:z.displayPartnerFinderPage},i.show(z.confirmationModalData)},z.cancelOnClick=function(e){for(var n=0;n<z.partners.length;n++){var r=new EventData(t.InstrumentationConstants.ClientControlIds.RequestForInformationPageCancel,z.searchTrackingId,z.partners[n].partnerId,z.partners[n].locationId,null,null);l.traceEvent(t.InstrumentationConstants.ClientEvents.RequestForInformationPageCancel,r)}e?z.displayPartnerFinderPage():z.showCancelModal()},z.displayPartnerFinderPage=function(){n.path(t.Routes.Search)},z.agentInvalidCheck=function(){if(z.isAgent&&z.partners.length>0){if(!z.engagement.consentToContactOnBehalfOfCustomer)return!0;if(z.partners.length<3&&!z.engagement.consentToContactSpecificPartners)return!0}return!1},z.trimAndAppendComma=function(e){return e&&e.trim()?e.trim()+", ":null},z.fixOverflow=function(e){$(".card-title").text(function(t,n){if(t>=e){var r=!1,a=parseInt($(this).css("max-height").replace(/[^0-9]+/,""));for($(this).height()>a&&($(this).attr("title",$(this).text()),r=!0,$(this).text().length>100&&$(this).text(function(e,t){return t.substring(0,100)}));parseInt($(this).height())>a;)$(this).text(function(e,t){return t.substring(0,t.length-5)});r&&$(this).text(function(e,t){return t.substring(0,t.length-3)+"..."})}}),$(".address-style").attr("title",function(t,n){if(t>=e){var r=this;if(r.offsetWidth<r.scrollWidth)return $(r).text().replace(/\n/g,"").replace(/ +/g," ").trim()}})},$(document).ready(setTimeout(T,0))}angular.module("app").controller("RequestForInformationController",e),e.$inject=["resxSvc","Constants","$location","$cacheFactory","partnersToSendEngagementsSvc","settings","engagementsSvc","modalSvc","tracingSvc","globalSearchRequestSvc","globalEngagementsSvc","sessionContextSvc","$window","promisesSvc","globalDomainDataSvc","finderDomainDataSvc","selectedPartnersInSearchSvc","sessionStorageSvc","flightingSvc","linkedInSvc","personalizationSvc","partnerSvc","searchPageSearchExecutionState","userPersonaSvc","linkedInUserInfoSvc"]}(),function(){function e(e,t,n,r,a,o){function s(e,t){var r=function(t){if(t){var n={IdToken:t},r={$headers:n,pagesize:e};return m.get(r).$promise.then(function(e){return l(e),e})}return a.reject()};if(!0===t){var o={pagesize:e};return m.get(o).$promise.then(function(e){return l(e),e})}return n.addIdTokenHeader(r)}function i(e,t){var r=function(t){return t?o.get(d+e.uri,{headers:{IdToken:t}}).then(function(e){return l(e.data),e.data}):a.reject()};return!0===t?o.get(d+e.uri).then(function(e){return l(e.data),e.data}):n.addIdTokenHeader(r)}function l(e){e.isFirstPage=null==e.links||null==e.links.previous||null==e.links.previous.uri,e.isLastPage=null==e.links||null==e.links.next||null==e.links.next.uri}function c(e){var t=function(t){var n={},r={$headers:n};return t&&(n={IdToken:t},r.$headers=n),m.create(r,e).$promise};return n.addIdTokenHeader(t)}function u(e){return m.get({engagementId:e}).$promise}function g(e,t){var n={engagementId:e};return m.update(n,t).$promise}var d=t.EngagementsApiEndpoint,m=e(d+"/engagements/:engagementId",null,{get:{},create:{method:"POST"},update:{method:"PATCH"}});return{getEngagements:s,getEngagementDetails:u,createEngagement:c,updateEngagement:g,getEngagementsSeek:i}}angular.module("app").factory("engagementsSvc",e),e.$inject=["$resource","Constants","authenticationSvc","tracingSvc","$q","$http"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c,u,g,d){function m(){p.map=new Microsoft.Maps.Map(document.getElementById("bingMap"),{credentials:a.GetBingMapsDetails.Key,showScalebar:!1,showMapTypeSelector:!1,showDashboard:!1,enableSearchLogo:!1,enableClickableLogo:!1}),p.map.setView({mapTypeId:Microsoft.Maps.MapTypeId.road}),p.resultLocations=[],p.otherLocations=[];for(var e,t,n,r=0;r<p.partnerLocationProfiles.length;r++)e=p.partnerLocationProfiles[r],t=new Microsoft.Maps.Location(e.location.latitude,e.location.longitude),e.location.address.country===p.partnerDetails.location.address.country?(p.resultLocations.push(t),n=new Microsoft.Maps.Pushpin(t,null),p.map.entities.push(n)):p.otherLocations.push(t);1==p.resultLocations.length?p.map.setView({center:p.resultLocations[0]}):p.map.setView({bounds:Microsoft.Maps.LocationRect.fromLocations(p.resultLocations)})}var p=this,f=t.get;p.backToSearchResultsText=f("localizedResources.Partner_BackToSearchResults"),p.contactPartner=f("localizedResources.Partner_ContactPartner"),p.contactPartner=p.contactPartner.toLocaleUpperCase(),p.backToProviders=f("localizedResources.PartnerDetail_backButtonText"),p.competencyText=f("localizedResources.PartnerDetails_competencyText"),p.endorsementsText=f("localizedResources.PartnerDetails_endorsementsText"),p.aboutUs=f("localizedResources.PartnerDetails_AboutUs"),p.expertiseListTitle=f("localizedResources.PartnerDetails_expertiseList"),p.endorsementsTitle=f("localizedResources.PartnerDetails_endorsements"),p.expertiseText=f("localizedResources.PartnerDetails_expertise"),p.locationsText=f("localizedResources.PartnerDetails_locations"),p.readMoreText=f("localizedResources.Partner_More"),p.foundedDateText=f("localizedResources.PartnerDetails_LinkedIn_Founded_Date"),p.topImage=a.Routes.HeroImage,p.linkedinBadgeImage=a.Routes.LinkedinBadgeImage,p.partnerNoLogo=a.Routes.PartnerNoLogo;var h=a.SearchTrackingIdKeyforCache,v=["industryFocus","product","serviceType"],S=["industryFocusEndorsements","productEndorsements","serviceTypeEndorsements"],y=s.get("partnerFinderSearchKeywords")||s("partnerFinderSearchKeywords");p.showProgress=!0,p.competencyNone=0,p.competencySilver=1,p.competencyGold=2,r.partner=r.partner||"",p.partnerName=r.partner.substring(0,r.partner.lastIndexOf("_")),p.partnerId=r.partner.substring(r.partner.lastIndexOf("_")+1),p.locationId=r.locationId;var R=d.ParametersManager;if(p.paramManager=new R,p.paramManager.readAllDebugFlags(),y.get(h))p.searchTrackingId=y.get(h);else{p.searchTrackingId="";var C=new EventData(a.InstrumentationConstants.ClientControlIds.PartnerDetailsPageDeepLink,p.searchTrackingId,p.partnerId,p.locationId,null,null);l.traceEvent(a.InstrumentationConstants.ClientEvents.PartnerDetailsPageDeepLink,C)}p.backToSearchResults=function(){var t=new EventData(a.InstrumentationConstants.ClientControlIds.PartnerDetailsPageBackButton,p.searchTrackingId,p.partnerId,p.locationId,p.partnerDetails.name,null);l.traceEvent(a.InstrumentationConstants.ClientEvents.PartnerDetailsPageBackButton,t),e.path(a.Routes.Search)},p.goToReferralPage=function(t,n){var r=new EventData(a.InstrumentationConstants.ClientControlIds.PartnerDetailsPageContactButton,p.searchTrackingId,p.partnerId,p.locationId,p.partnerDetails.name,null);if(l.traceEvent(a.InstrumentationConstants.ClientEvents.PartnerDetailsPageContactButton,r),c.clearPartners(),p.partnerDetails.industryFocusEndorsements&&p.partnerDetails.industryFocusEndorsements.length>0||p.partnerDetails.productEndorsements&&p.partnerDetails.productEndorsements.length>0||p.partnerDetails.serviceTypeEndorsements&&p.partnerDetails.serviceTypeEndorsements.length>0)var o=!0;var s=p.competencyNone;p.partnerDetails.competencies.gold&&p.partnerDetails.competencies.gold.length>0?s=p.competencyGold:p.partnerDetails.competencies.silver&&p.partnerDetails.competencies.silver.length>0&&(s=p.competencySilver),c.addPartner(new MarketingProfileModel(p.partnerDetails.name,p.partnerId,p.locationId,p.partnerDetails.location,p.partnerDetails.logo,s,o,p.partnerDetails.linkedInOrganizationProfile)),e.path(a.Routes.RequestForInformation)},p.openNew=function(e){var t=new EventData(a.InstrumentationConstants.ClientControlIds.PartnerDetailsPageLinkedInUrlClicked,p.searchTrackingId,p.partnerId,p.locationId,p.partnerDetails.name,p.partnerDetails.linkedInOrganizationProfile);l.traceEvent(a.InstrumentationConstants.ClientEvents.PartnerDetailsPageLinkedInUrlClicked,t),u.open(e,"_blank").focus()},p.externalWebsiteCallback=function(){var e=new EventData(a.InstrumentationConstants.ClientControlIds.PartnerDetailsPageWebsiteLink,p.searchTrackingId,p.partnerId,p.locationId,p.partnerDetails.name,null);l.traceEvent(a.InstrumentationConstants.ClientEvents.PartnerDetailsPageWebsiteLink,e)},p.partnerDetails=null,p.missingPartnerProfileAlert=null,p.expertiseList=[],p.missingPartnerProfileAlert=null,p.endorsements=[],p.endorsementsDisplayableText="",p.hasEndorsements=!1,p.hasExpertise,p.readMore=!0,p.formattedFoundedDate=null,p.formattedOrganizationSize=null,p.hasLinkedInProfileUrl=!1,p.moreLocations=!0,p.showMap=!1,n.getPartnerDetails(p.partnerId,p.paramManager.getAll()).then(function(e){p.partnerLocationProfiles=e;for(var t=0;t<p.partnerLocationProfiles.length;t++)if(p.locationId===p.partnerLocationProfiles[t].id){p.partnerDetails=p.partnerLocationProfiles[t];break}for(var n=0;n<p.partnerLocationProfiles.length;n++){p.partnerLocationProfiles[n].location.address.country!==p.partnerDetails.location.address.country&&(p.moreLocations=!1)}for(var r=0;r<v.length;r++){var a=v[r];if(p.partnerDetails&&p.partnerDetails[a]&&p.partnerDetails[a].length>0)for(var o=0;o<p.partnerDetails[a].length;o++){var s=i.getDomainDataValueByKeyId(p.partnerDetails[a][o]);s&&p.expertiseList.push(s)}}p.expertiseList.length>0&&(p.hasExpertise=!0);for(var r=0;r<S.length;r++){var a=S[r];if(p.partnerDetails&&p.partnerDetails[a]&&p.partnerDetails[a].length>0)for(var o=0;o<p.partnerDetails[a].length;o++){var l=i.getDomainDataValueByKeyId(p.partnerDetails[a][o]);l&&p.endorsements.push(l)}}if(null!=p.endorsements&&p.endorsements.length>0){p.endorsementsDisplayableText=p.endorsements[0];for(var o=1;o<p.endorsements.length;o++)p.endorsementsDisplayableText=p.endorsementsDisplayableText+", "+p.endorsements[o];p.hasEndorsements=!0}if(p.partnerDetails&&p.partnerDetails.skills&&p.partnerDetails.skills.length>0)for(var c=0;c<p.partnerDetails.skills.length;c++)-1==p.expertiseList.indexOf(p.partnerDetails.skills[c])&&p.expertiseList.push(p.partnerDetails.skills[c]);if(p.readMore=p.partnerDetails.description.length>500,p.partnerDetails.linkedInOrganizationProfile&&""!=p.partnerDetails.linkedInOrganizationProfile&&(p.hasLinkedInProfileUrl=!0),p.partnerDetails.organizationFoundedOnDate&&""!=p.partnerDetails.organizationFoundedOnDate){var u=new Date(p.partnerDetails.organizationFoundedOnDate+"Z");p.formattedFoundedDate=p.foundedDateText+u.getUTCFullYear()}if(p.partnerDetails.organizationSize&&""!=p.partnerDetails.organizationSize){var g=i.getDomainDataValueByKeyId(p.partnerDetails.organizationSize);g&&(p.formattedOrganizationSize=g)}p.partnerDetails||(p.missingPartnerProfileAlert=f("localizedResources.Partner_NotFound"))}).catch(function(e){p.missingPartnerProfileAlert=f("localizedResources.AllView_ErrorMessageToDisplay")}).finally(function(){p.showProgress=!1}),p.getMap=function(){null!=Microsoft&&null!=Microsoft.Maps&&(p.showMap=!0,m())},p.updateExpertiseBoolean=function(e){p.expertise=e},p.goToTop=function(){u.scrollTo(0,0)},p.showDescription=function(){p.readMore=!1},p.showAllLocations=function(){p.moreLocations=!0;for(var e=0;e<p.otherLocations.length;e++){p.resultLocations.push(p.otherLocations[e]);var t=new Microsoft.Maps.Pushpin(p.otherLocations[e],null);p.map.entities.push(t)}1==p.resultLocations.length?p.map.setView({center:p.resultLocations[0]}):p.map.setView({bounds:Microsoft.Maps.LocationRect.fromLocations(p.resultLocations)})},p.trimAndAppendComma=function(e){return e&&e.trim()?e.trim()+", ":""}}angular.module("app").controller("PartnerDetailsController",e),e.$inject=["$location","resxSvc","partnerSvc","$routeParams","Constants","sessionContextSvc","$cacheFactory","finderDomainDataSvc","tracingSvc","partnersToSendEngagementsSvc","$window","bingMapsSvc","queryParametersSvc"]}(),function(){function e(e,t,n,r,a,o){function s(e){return h.get({cacheId:e}).$promise.then(function(e){return o.updateSourceContext(e),e})}function i(e,t){var n={},r="";if(t&&(t.includeTest&&t.includeTest.value()?r+="includeTest,":t.testOnly&&t.testOnly.value()&&(r+="testOnly,"),t.prodResults&&t.prodResults.value()&&(r+="prodResults,")),e.partnerTags&&e.partnerTags.length>0){r+="partner_tags_standard_lucene_lower;eq;stringcollection;";for(var o=0;o<e.partnerTags.length;o++)r+=e.partnerTags[o]+";";r+=","}e.organizationSize&&(r+="target_customer_company_sizes;eq;stringcollection;"+e.organizationSize+";"),n={"x-additionalFilters":r},p.get(m)&&(n["x-searchTrackingId"]=p.get(m)),n["x-sessionId"]=a.getSessionId();var s={$headers:n};return f.save(s,e).$promise.then(function(e){return c(e),e})}function l(e){var t={};e.headers&&e.headers.forEach(function(e){t[e.key]=e.value}),p.get(m)&&(t["x-searchTrackingId"]=p.get(m)),t["x-sessionId"]=a.getSessionId();var n={$headers:t};return f.save(n,e.body).$promise.then(function(e){return c(e),e})}function c(e){e.isFirstPage=null==e.matchingPartners.links||null==e.matchingPartners.links.previous||null==e.matchingPartners.links.previous.uri,e.isLastPage=null==e.matchingPartners.links||null==e.matchingPartners.links.next||null==e.matchingPartners.links.next.uri}function u(e,t){var n={},r="";t&&t.prodResults&&t.prodResults.value()&&(r+="prodResults,"),n={"x-additionalFilters":r};var a={partnerId:e,$headers:n};return f.query(a).$promise}var g=t.PartnerFinderapiPathRoot+"marketingprofiles",d=t.PartnerDirectoryCacheUrl,m=t.SearchTrackingIdKeyforCache,p=r.get("partnerFinderSearchKeywords")||r("partnerFinderSearchKeywords"),f=e(g+"/:partnerId/:locationId",null,{get:{cache:!0},query:{isArray:!0},save:{method:"POST"}}),h=e(d+"/:cacheId",null,{get:{}});return{getPartners:i,getPartnerDetails:u,getPartnersSeek:l,getCachedData:s}}angular.module("app").factory("partnerSvc",e),e.$inject=["$resource","Constants","$q","$cacheFactory","sessionContextSvc","requestSourceContextSvc"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c,u,g,d,m,p,f,h){function v(e,r,a){var o=e,s=r,i=a;g.getPartnerDetails(o,null).then(function(e){for(var t=0;t<e.length;t++)if(s===e[t].location.id){i.profile=e[t],S();break}}).catch(function(e){n.path(t.Routes.Search)})}function S(){for(var e=!0,t=0;t<R.engagement.referral.length;t++)null==R.engagement.referral[t].profile&&(e=!1);R.profilesLoaded=e}function y(e){R.engagement=e,R.updatedTimeLabel=R.getUpdatedDateLabel(),R.localizedOrgSize=s.getDomainDataValueByKeyId(e.customerProfile.size),R.industryFocus=s.getDomainDataValueByKeyId(e.partnerSearchCriteria.industryFocus),R.uxTags.push(R.industryFocus);for(var n=0;n<e.partnerSearchCriteria.partnerTags.length;n++)R.uxTags.push(e.partnerSearchCriteria.partnerTags[n]);for(var r=0;r<e.partnerSearchCriteria.product.length;r++)R.uxTags.push(s.getDomainDataValueByKeyId(e.partnerSearchCriteria.product[r]));for(var a=0;a<e.partnerSearchCriteria.serviceType.length;a++)R.uxTags.push(s.getDomainDataValueByKeyId(e.partnerSearchCriteria.serviceType[a]));for(var o=0;o<e.referral.length;o++){var i=e.referral[o];i.status==t.EngagementStatuses.New?i.statusText=R.engagementSubmitted:i.status==t.EngagementStatuses.Acknowledged?i.statusText=R.engagementAcknowledged:i.status==t.EngagementStatuses.Accepted?i.statusText=R.engagementAccepted:i.status==t.EngagementStatuses.Won?i.statusText=R.engagementWon:i.statusText=R.engagementNotAvailable,v(i.partnerId,i.locationId,i)}}var R=this,C=e.get;R.getUpdatedDateLabel=function(){var e=new Date(R.engagement.updatedDateTime+"Z");try{var t=e.toLocaleString(h.getLocale());return R.updatedTimeLabel.replace("{0}",t)}catch(t){return R.updatedTimeLabel.replace("{0}",e.toLocaleString())}},R.goToProjects=function(){f.clearCacheData(),n.path(t.Routes.Search)},R.trimAndAppendComma=function(e){return e&&e.trim()?e.trim()+", ":null},R.engagementSubmitted=C("localizedResources.PersonalizedEngagementDetails_EngagementSubmitted"),R.engagementAcknowledged=C("localizedResources.PersonalizedEngagementDetails_EngagementAcknowledged"),R.engagementAccepted=C("localizedResources.PersonalizedEngagementDetails_EngagementAccept"),R.engagementNotAvailable=C("localizedResources.PersonalizedEngagementDetails_EngagementNotAvailable"),R.engagementWon=C("localizedResources.PersonalizedEngagementDetails_EngagementWon"),R.selectedPartnersLabel=C("localizedResources.RFI_Page_SelectedPartnersLabel"),R.updatedTimeLabel=C("localizedResources.PersonalizedEngagementDetails_UpdatedTimeLabel"),R.tagsLabel=C("localizedResources.PersonalizedEngagementDetails_TagsLabel"),R.contactInfoHeader=C("localizedResources.PersonalizedEngagementDetails_ContactInfoLabel"),R.organizationLabel=C("localizedResources.PersonalizedEngagementDetails_OrganizationLabel"),R.nextActionLabel=C("localizedResources.PersonalizedEngagementDetails_NextActionLabel"),R.viewProjectsText=C("localizedResources.PersonalizedEngagementDetails_ViewProjectsText"),R.pageTitle=C("localizedResources.RFI_Page_Title"),R.topImage=t.Routes.HeroImage,R.partnerNoLogo=t.Routes.PartnerNoLogo,d.engagementId=d.engagementId||"",R.linkedInFlight=l.isFlightEnabled(t.Flights.LinkedInFlight),R.linkedInFlight||n.path(t.Routes.Search),R.persona=m.getPersona(),R.isLinkedInUser=R.persona==t.Personas.LinkedInUser,R.uxTags=[],R.engagement={},R.isLinkedInUser||i.storeContext({}).then(function(e){c.signIn()}),null!=i.getContext()&&i.deleteContext();var P=p.getUserInfo();R.linkedInImage=null,null!=P.image&&""!=P.image&&(R.linkedInImage=P.image),R.profilesLoaded=!1;var I=f.getCacheData();null!=I?y(I):u.getPersonalizationDetails().then(function(e){-1==e.engagements.indexOf(d.engagementId)&&n.path(t.Routes.Search);var a=d.engagementId;r.getEngagementDetails(a).then(function(e){y(e)})}).catch(function(e){n.path(t.Routes.Search)})}angular.module("app").controller("PersonalizationEngagementDetailsController",e),e.$inject=["resxSvc","Constants","$location","engagementsSvc","tracingSvc","promisesSvc","finderDomainDataSvc","sessionStorageSvc","flightingSvc","linkedInSvc","personalizationSvc","partnerSvc","$routeParams","userPersonaSvc","linkedInUserInfoSvc","personalizationCacheSvc","sessionContextSvc"]}(),function(){function e(e,t,n,r,a,o,s){r.populateUserInfo(a.location.search).then(function(r){r.userContext&&r.userInfo||e.path(o.Routes.Search),r.userInfo.linkedIn&&r.userInfo.linkedIn.isUserSignedIn?s.traceMetric(o.MetricNames.SuccessfulLinkedInSignIn,1):s.traceMetric(o.MetricNames.FailedLinkedInSignIn,1);var a=r.userContext.url.split("?");t.setContext(r.userContext),e.path(a[0]),a.length>1?e.search(a[1]):e.search(""),n.checkQueryParameterFlights()}).catch(function(t){s.traceMetric(o.MetricNames.FailedLinkedInSignIn,1),e.path(o.Routes.Search)})}angular.module("app").controller("PersonalizationRedirectPageController",e),e.$inject=["$location","sessionStorageSvc","flightingSvc","linkedInSvc","$window","Constants","tracingSvc"]}(),function(){function e(){function e(){return r}function t(e){r=e}function n(){r=null}var r=null;return{setCacheData:t,getCacheData:e,clearCacheData:n}}angular.module("common").factory("personalizationCacheSvc",e),e.$inject=[]}(),function(){function e(e,t,n,r,a,o,s){function i(){var e=n.defer();return u().then(function(t){var n={$headers:t};d.get(n).$promise.then(function(t){e.resolve(t)}).catch(function(t){s.traceError(t),e.reject()})}).catch(function(t){s.traceError(t),e.reject()}),e.promise}function l(e){var t=n.defer();return i().then(function(n){var r=n.id,a=n.engagements;a.push(e);var o={engagements:a};u().then(function(e){var n={$headers:e,id:r};m.update(n,o).$promise.then(function(e){t.resolve(e)}).catch(function(e){s.traceError(e),t.reject()})}).catch(function(e){s.traceError(e),t.reject()})}).catch(function(n){u().then(function(n){var r={$headers:n};m.create(r,{engagements:[e]}).$promise.then(function(e){t.resolve(e)}).catch(function(e){s.traceError(e),t.reject()})}).catch(function(e){s.traceError(e),t.reject()})}),t.promise}function c(e){var t=n.defer();return i().then(function(n){var r=n.id,a=n.engagements,o=a.indexOf(e);if(-1!=o){a=a.slice(0,o).concat(a.slice(o+1));var i={engagements:a};u().then(function(e){var n={$headers:e,id:r};m.update(n,i).$promise.then(function(e){t.resolve(e)}).catch(function(e){s.traceError(e),t.reject()})}).catch(function(e){s.traceError(e),t.reject()})}}).catch(function(e){s.traceError(e),t.reject()}),t.promise}function u(){var e=n.defer(),t={},r=a.getUserInfo();return new Date(r.linkedInContext.expiresOn)<new Date?o.updateToken().then(function(n){t.Authorization="Bearer "+r.linkedInContext.access_token,e.resolve(t)}).catch(function(t){s.traceError(t),e.reject()}):(t.Authorization="Bearer "+r.linkedInContext.access_token,e.resolve(t)),e.promise}var g=t.PersonalizationEndpoint,d=e(g+"/my",null,{get:{}}),m=e(g+"/:id",null,{create:{method:"POST"},update:{method:"PUT"}});return{getPersonalizationDetails:i,createOrUpdatePersonalizationDetails:l,deleteFromPersonalizationDetails:c}}angular.module("app").factory("personalizationSvc",e),e.$inject=["$resource","Constants","$q","$http","linkedInUserInfoSvc","linkedInSvc","tracingSvc"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c,u,g,d){var m=this,p=e.get;m.PageHeader=p("localizedResources.Review_ReviewPageHeader"),m.EaseTitle=p("localizedResources.Review_EaseTitle"),m.EaseQuestion=p("localizedResources.Review_EaseQuestion"),m.ResponsivenessTitle=p("localizedResources.Review_ResponsivenesTitle"),m.ResponsivenessQuestion=p("localizedResources.Review_ResponsivenessQuestion"),m.ExpertiseTitle=p("localizedResources.Review_ExpertiseTitle"),m.ExpertiseQuestion=p("localizedResources.Review_ExpertiseQuestion"),m.QualityTitle=p("localizedResources.Review_QualityTitle"),m.QualityQuestion=p("localizedResources.Review_QualityQuestion"),m.ValueTitle=p("localizedResources.Review_ValueTitle"),m.ValueQuestion=p("localizedResources.Review_ValueQuestion"),m.ReuseQuestion=p("localizedResources.Review_ReuseQuestion"),m.RecommendQuestion=p("localizedResources.Review_RecommendQuestion"),m.ReviewHeadline=p("localizedResources.Review_ReviewHeadline"),m.ReviewDetails=p("localizedResources.Review_ReviewDetails"),m.WhoTitle=p("localizedResources.Review_WhoTitle"),m.submitButtonText=p("localizedResources.RFI_Page_SubmitButtonLabel"),m.linkedinSigninMessage=p("localizedResources.Review_LinkedinSigninMessage"),m.linkedInSignOutText=p("localizedResources.FindPartner_LinkedInSignOutText"),m.submitButtonDisabled=!0,m.reviewSubmitted=!1,m.isLinkedInUser=!1,m.persona=c.getPersona(),m.isLinkedInUser=m.persona==a.Personas.LinkedInUser,m.partnerNoLogo=a.Routes.PartnerNoLogo,m.topImage=a.Routes.HeroImage,m.linkedinBadgeImage=a.Routes.LinkedinBadgeImage,m.linkedinSignInImage=a.Routes.LinkedinSignInImage,m.showProgress=!0,m.missingPartnerProfileAlert=null,m.partnerDetails=null,m.maxRating=5,m.partnerId=r.partnerId,m.engagementId=r.engagementId;var f=new EventData(a.InstrumentationConstants.ClientEvents.ReviewPageLanded,null,m.partnerId,null,null,null,m.engagementId);d.traceEvent(a.InstrumentationConstants.ClientEvents.ReviewPageLanded,f);var h=o.ParametersManager;m.paramManager=new h,m.paramManager.readAllDebugFlags(),m.reviewModel=new ReviewModel,m.reviewModel.marketInfo.locale=s.locale,m.reviewModel.marketInfo.market="US",m.ratings=[{id:a.RatingKeys.EaseRating,text:"Ease",value:-1},{id:a.RatingKeys.ResponsivenessRating,text:"responsiveness",value:-1},{id:a.RatingKeys.ExpertiseRating,text:"Expertise",value:-1},{id:a.RatingKeys.QualityRating,text:"Quality",value:-1},{id:a.RatingKeys.ValueRating,text:"Value",value:-1},{id:a.RatingKeys.ReuseRating,text:"Reuse",value:-1},{id:a.RatingKeys.RecommendRating,text:"Recommend",value:-1}],m.reviewModel.ratings=m.ratings,n.getPartnerDetails(m.partnerId,m.paramManager.getAll()).then(function(e){m.partnerLocationProfiles=e,m.partnerDetails=m.partnerLocationProfiles[0],m.reviewModel.partnerInfo.name=m.partnerDetails.name,m.WriteReviewQuestion=p("localizedResources.Review_WriteReviewQuestion").replace("{0}",m.partnerDetails.name),m.RateExperience=p("localizedResources.Review_RateExperience").replace("{0}",m.partnerDetails.name),m.Discailmer=p("localizedResources.Review_Discailmer").replace("{0}",m.partnerDetails.name),m.partnerDetails.name=m.partnerDetails.name+"?",m.partnerDetails||(m.missingPartnerProfileAlert=p("localizedResources.AllView_ErrorMessageToDisplay"),d.traceWarning("PartnerReview: Partner not found"))}).catch(function(e){404==e.status?(m.missingPartnerProfileAlert=p("localizedResources.AllView_ErrorMessageToDisplay"),d.traceError("PartnerReview: Unable to get partner information. Error: "+e)):(m.missingPartnerProfileAlert=p("localizedResources.AllView_ErrorMessageToDisplay"),d.traceError("PartnerReview: Error: "+e))}).finally(function(){m.showProgress=!1}),m.onRatingChanged=function(){g(function(){m.submitButtonDisabled=!1;for(var e=0;e<m.ratings.length;e++)if(-1==m.ratings[e].value){m.submitButtonDisabled=!0;break}})},m.saveReview=function(){var e=new EventData(a.InstrumentationConstants.ClientEvents.ReviewPageSubmit,null,m.partnerId,null,null,null,m.engagementId);d.traceEvent(a.InstrumentationConstants.ClientEvents.ReviewPageSubmit,e),m.showProgress=!0,m.reviewModel.submittedDateTime=new Date,m.reviewModel.partnerInfo.id=m.partnerId,m.reviewModel.id=m.reviewModel.customerInfo.linkedInId+"_"+m.partnerId+"_"+m.engagementId,t.saveReview(m.reviewModel).then(function(){m.completionMessage=p("localizedResources.Review_CompletionMessage")}).catch(function(e){"Resource with specified id or name already exists."==e.data.description?(m.completionMessage=p("localizedResources.Review_ReviewAlreadyExistsMessage").replace("{0}",m.reviewModel.partnerInfo.name),d.traceWarning("PartnerReview: Duplicate review submitted for partner "+m.reviewModel.partnerInfo.name+" for engagement "+m.engagementId)):(m.completionMessage=p("localizedResources.AllView_ErrorMessageToDisplay"),
d.traceError("PartnerReview: error occured when submitting review: "+e.data.description))}).finally(function(){m.reviewSubmitted=!0,m.showProgress=!1})},m.signInToLinkedIn=function(){l.storeContext({}).then(function(e){i.signIn()})},m.signOutOfLinkedIn=function(){l.storeContext({}).then(function(e){i.signOut()})},m.getLinkedInUserInfo=function(){null!=l.getContext()&&l.deleteContext();var e=u.getUserInfo();m.reviewModel.customerInfo.linkedInId=e.userId,m.linkedInImage=null,null!=e.image&&""!=e.image&&(m.linkedInImage=e.image),m.linkedinPostedByLabel=p("localizedResources.Review_LinkedinPostedByLabel"),m.linkedinPostedByName=e.firstName+" "+e.lastName.substring(0,1)+"."},m.isLinkedInUser&&m.getLinkedInUserInfo()}angular.module("app").controller("ReviewController",e),e.$inject=["resxSvc","reviewSvc","partnerSvc","$routeParams","Constants","queryParametersSvc","settings","linkedInSvc","sessionStorageSvc","userPersonaSvc","linkedInUserInfoSvc","$timeout","tracingSvc"]}(),function(){function e(e,t,n,r){function a(e){var t={};t={"x-additionalFilters":""};var n={$headers:t};return s.save(n,e).$promise}var o=t.partnerFinderReviewApiPath,s=e(o+"/:partnerId/:engagementId",null,{save:{method:"POST"}});return{saveReview:a}}angular.module("app").factory("reviewSvc",e),e.$inject=["$resource","Constants","$q","sessionContextSvc"]}(),function(){function e(e){return{restrict:"A",template:'<ul class="rating"><li ng-repeat="star in stars" ng-class="star" ng-click="toggle($index)">  </li> </ul>',scope:{ratingValue:"=",max:"=",ratingDisabled:"=",onRatingSelected:"&"},link:function(e,t,n){var r=function(){e.stars=[];for(var t=0;t<e.max;t++)e.stars.push({filled:t<e.ratingValue})};e.toggle=function(t){e.ratingDisabled||(e.ratingValue=t+1,e.onRatingSelected({rating:t+1}))},e.$watch("ratingValue",function(e,t){t&&r()})}}}angular.module("app").directive("starRating",e),e.$inject=["Constants"]}(),function(){function e(e,t,n,r,a,o,s){var i=this,l=t.get;i.serviceTitle=l("localizedResources.Search_ServiceTitle"),i.apiEndPoint=e.PartnerApiPathRoot,i.alertTriggered=!1,i.keyEvent=null;var c=e.KeyCodes,u=n.ParametersManager,g=n.Parameter,d=new g("includeTest"),m=new g("testOnly"),p=new g("newExperience"),f=[d,m,p];i.paramManager=new u(f),i.paramManager.read(),p.value()&&r.path(e.Routes.newExperience),d=d.value(),m=m.value(),i.includeTestParam=d,i.testOnlyParam=m,i.searchRequestUXModel=o.getSearchRequestUXModel(),i.keyword="",i.hasFocus=!1;var h=[new SuggestionCategory(e.SuggestionsConstants.CategorySearchProduct,"2","",l(e.SuggestionsConstants.ProductLabel)),new SuggestionCategory(e.SuggestionsConstants.CategorySearchServiceType,"2","",l(e.SuggestionsConstants.ServiceTypeLabel)),new SuggestionCategory(e.SuggestionsConstants.CategorySearchIndustryFocus,"1","",l(e.SuggestionsConstants.IndustryFocusLabel)),new SuggestionCategory(e.SuggestionsConstants.CategorySearchPartnerTag,"4","",l(e.SuggestionsConstants.PartnerTagLabel))],v=new SuggestionCategory(e.SuggestionsConstants.CategoryDefaultSuggestion,"",l(e.SuggestionsConstants.DefaultPreLabel),l(e.SuggestionsConstants.DefaultPostLabel));i.suggestionsInput=new SuggestionsInput(h,v),i.closeAlert=function(){i.alertTriggered=!1},i.showAlert=function(){i.alertText="Service call not implemented, try again later",i.alertTriggered=!0},i.callSearchResult=function(){var t=s.createSearchTrackingIdInCache(),n=new EventData(e.InstrumentationConstants.ClientControlIds.LandingPageSearchButtonClicked,t,null,null,null,null);a.traceEvent(e.InstrumentationConstants.ClientEvents.LandingPageSearchButtonClicked,n),r.path(e.Routes.Search)},i.handleSuggestionsOnClick=function(e,t){i.keyword="",o.handlePartnerSearchSuggestionsOnClick(e,t)},i.onSearchFocus=function(){i.hasFocus=!0},i.onLostSearchFocus=function(){i.hasFocus=!1},i.removeSearchItem=function(e){delete i.searchRequestUXModel.displayTags[e]},i.disableSearch=function(){return 0===Object.keys(i.searchRequestUXModel.displayTags).length},i.onKeyDown=function(e){switch(e.keyCode){case c.UPARROW:case c.DOWNARROW:case c.RETURNKEY:return i.keyEvent=e,e.preventDefault(),!1;default:return!0}}}angular.module("app").controller("HomePageController",e),e.$inject=["Constants","resxSvc","queryParametersSvc","$location","tracingSvc","globalSearchRequestSvc","Helpers"]}(),function(){function e(e,t,n,r,a,o,s){var i=this,l=t.get;i.serviceTitle=l("localizedResources.Search_ServiceTitle"),i.apiEndPoint=e.PartnerApiPathRoot,i.someValue="Value from controller",i.alertTriggered=!1,i.keyEvent=null;var c=e.KeyCodes;i.comp=!1,i.searchRequestUXModel=o.getSearchRequestUXModel(),i.callSearchResult=function(){var t=s.createSearchTrackingIdInCache(),n=new EventData(e.InstrumentationConstants.ClientControlIds.LandingPageSearchButtonClicked,t,null,null,null,null);a.traceEvent(e.InstrumentationConstants.ClientEvents.LandingPageSearchButtonClicked,n),o.setSearchRequestReferenceGlobal(i.searchRequestReference),r.path(e.Routes.Search)},i.handleSuggestionsClick=function(e,t){o.handlePartnerSearchSuggestionsOnClick(e,t),i.keyword="",i.comp=!0},i.organizationSizeChanged=function(e){},i.countryChanged=function(e){},i.disableSearch=function(){return 0===Object.keys(i.searchRequestReference).length},i.removeSearchItem=function(e){delete i.searchRequestUXModel.displayTags[e]},i.onKeyDown=function(e){switch(e.keyCode){case c.UPARROW:case c.DOWNARROW:case c.RETURNKEY:return i.keyEvent=e,e.preventDefault(),!1;default:return!0}}}angular.module("app").controller("NewHomePageController",e),e.$inject=["Constants","resxSvc","queryParametersSvc","$location","tracingSvc","globalSearchRequestSvc","Helpers"]}(),function(){function e(e,t,n,r,a,o,s,l,c,u,g,d,m,p,f,h,v,S,y,R,C,P,I,k,T,z,D,E,M,L,_){function A(e,t,n,a){var o=e,s=t,i=n;r.getPartnerDetails(o,null).then(function(e){for(var t=0;t<e.length;t++)if(s===e[t].location.id){i.profile=e[t];break}}).finally(function(){i.loaded=!0,w(a)})}function w(e){for(var t=!0,n=0;n<e.referral.length;n++)e.referral[n].loaded||(t=!1);e.ready=t}function F(t){var n=e.defer();return B.showLoadMoreProgress=!0,B.next=null,r.getPartnersSeek(t).then(function(e){B.noResultsMessage=null,B.nextPartner=B.partners.length;var t=m.getAPIRequestModel();B.partners=B.partners.concat(x(b(e.matchingPartners.items),t)),B.next=e.matchingPartners.links.next,n.resolve({isOnFirstPage:e.isFirstPage,isOnLastPage:e.isLastPage})}).catch(function(e){B.noResultsMessage=null,e&&e.data&&2100===e.data.code?(f.traceWarning("Country code error from API: Error: "+e),B.noResultsMessage=q("localizedResources.FindPartner_EmptyRowText"),B.partners=null,n.resolve({isOnFirstPage:!0,isOnLastPage:!0})):(f.traceWarning("Error: "+e),B.noResultsMessage=q("localizedResources.AllView_ErrorMessageToDisplay"))}).finally(function(){B.showLoadMoreProgress=!1,setTimeout(function(){B.fixOverflow(B.nextPartner);try{$("#"+B.nextPartner)&&$("html,body").animate({scrollTop:$("#"+B.nextPartner).offset().top},800)}catch(e){}},0)}),n.promise}function b(e){return e=e.filter(function(e){return 0==B.partners.filter(function(t){return t.partnerId===e.partnerId}).length})}function x(e,t){for(var n=B.partnersSelected.map(function(e){return e.partnerId}),r=0;r<e.length;r++){if(n.indexOf(e[r].partnerId)>-1){var o=e[r].partnerId,s=B.partnersSelected.filter(function(e){return e.partnerId===o})[0];B.partnersSelected[B.partnersSelected.indexOf(s)]=e[r],e[r].partnerSelected=!0}else e[r].partnerSelected=!1;if(e[r].cardHoverEdit=!1,e[r].competencySummary)switch(e[r].competencySummary.competencyLevel){case 0:e[r].competency=a.CompetencyLevel.None;break;case 1:e[r].competency=a.CompetencyLevel.Silver;break;case 2:e[r].competency=a.CompetencyLevel.Gold}else e[r].competency=a.CompetencyLevel.None;e[r].hasEndorsements=U(e[r],t)}return e}function U(e,t){if(t.product&&t.product.length>0&&!e.hasEndorsements)for(var n=0;n<t.product.length;n++)if(e.productEndorsements&&e.productEndorsements.length>0&&e.productEndorsements.indexOf(t.product[n])>=0)return!0;if(t.serviceType&&t.serviceType.length>0&&!e.hasEndorsements)for(var n=0;n<t.serviceType.length;n++)if(e.serviceTypeEndorsements&&e.serviceTypeEndorsements.length>0&&e.serviceTypeEndorsements.indexOf(t.serviceType[n])>=0)return!0;return!!(t.industryFocus&&!e.hasEndorsements&&e.industryFocusEndorsements&&e.industryFocusEndorsements.length>0&&e.industryFocusEndorsements.indexOf(t.industryFocus)>=0)}function N(){var t=e.defer(),n=j.value();return n?r.getCachedData(n).then(function(e){h.setEngagementContextFromV1Model(e)?(m.setSearchRequestUXModelFromEngagementV1Model(e),Q=null,t.resolve()):t.reject()}).catch(function(e){f.traceWarning("Unable to get/set data from cache with Id: "+n+". Cached Data: "+cachedData+". Error: "+e),t.reject()}):Q?v.getEngagementDetails(Q).then(function(e){h.setEngagementContextFromEngagement(e),m.setSearchRequestUXModelFromEngagement(e),t.resolve()}).catch(function(e){f.traceWarning("Unable to get/set engagement from API with Id: "+Q+". Engagement Data: "+data+". Error: "+e),t.reject()}):t.resolve(),t.promise}var B=this;B.next=null,B.getLinkedInUserInfo=function(){null!=k.getContext()&&k.deleteContext();var e=M.getUserInfo();B.firstName=e.firstName,B.lastName=e.lastName,B.linkedInImage=null,null!=e.image&&""!=e.image&&(B.linkedInImage=e.image),z.getPersonalizationDetails().then(function(e){f.traceMetric(a.MetricNames.SuccessfulPersonalizationGet,1),B.showPersonalizationProgress=!1,e.engagements.length>0?B.personalizationLoaded=!0:B.personalizationLoaded=!1;var t=e.engagements;B.totalPersonalizationEngagementsLength=t.length;for(var n=0;n<t.length;n++){var r=t[n];v.getEngagementDetails(r).then(function(e){f.traceMetric(a.MetricNames.SuccessfulPersonalizationEngagementGet,1);var t=[];t.push(D.getDomainDataValueByKeyId(e.partnerSearchCriteria.industryFocus));for(var n=0;n<e.partnerSearchCriteria.partnerTags.length;n++)t.push(e.partnerSearchCriteria.partnerTags[n]);for(var r=0;r<e.partnerSearchCriteria.product.length;r++)t.push(D.getDomainDataValueByKeyId(e.partnerSearchCriteria.product[r]));for(var o=0;o<e.partnerSearchCriteria.serviceType.length;o++)t.push(D.getDomainDataValueByKeyId(e.partnerSearchCriteria.serviceType[o]));e.uxTags=t,e.overallStatus=B.personalizationEngagementArchived,e.statusImage=B.engagementArchived;for(var s=[],i=0;i<e.referral.length;i++){var l=e.referral[i];s.push(l.status),l.status==a.EngagementStatuses.New?l.statusText=B.engagementSubmitted:l.status==a.EngagementStatuses.Acknowledged?l.statusText=B.engagementAcknowledged:l.status==a.EngagementStatuses.Accepted?l.statusText=B.engagementAccepted:l.status==a.EngagementStatuses.Won?l.statusText=B.engagementWon:l.statusText=B.engagementNotAvailable,A(l.partnerId,l.locationId,l,e)}-1!=s.indexOf(a.EngagementStatuses.Won)?(e.overallStatus=B.personalizationEngagementArchived,e.statusImage=B.engagementArchived,e.angularOrdering=2):-1!=s.indexOf(a.EngagementStatuses.Accepted)?(e.overallStatus=B.personalizationEngagementEngaged,e.statusImage=B.engagementEngaged,e.angularOrdering=1):-1!=s.indexOf(a.EngagementStatuses.New)||-1!=s.indexOf(a.EngagementStatuses.Acknowledged)?(e.overallStatus=B.personalizationEngagementWaiting,e.statusImage=B.engagementWaiting,e.angularOrdering=0):(e.overallStatus=B.personalizationEngagementArchived,e.statusImage=B.engagementArchived,e.angularOrdering=2),B.personalizationEngagements.push(e)}).catch(function(e){f.traceMetric(a.MetricNames.FailedPersonalizationEngagementGet,1),f.traceError(e)})}}).catch(function(e){f.traceMetric(a.MetricNames.FailedPersonalizationGet,1),f.traceError(e),B.showPersonalizationProgress=!1,B.personalizationLoaded=!1,B.totalPersonalizationEngagementsLength=0})},B.deleteEngagementFromList=function(){B.deleteLoading=!0,z.deleteFromPersonalizationDetails(B.engagementToDelete.id).then(function(e){f.traceMetric(a.MetricNames.SuccessfulPersonalizationEngagementDelete,1),B.deleteLoading=!1;for(var t=[],n=0;n<B.personalizationEngagements.length;n++)B.personalizationEngagements[n].id!=B.engagementToDelete.id&&t.push(B.personalizationEngagements[n]);B.personalizationEngagements=t,B.totalPersonalizationEngagementsLength=B.personalizationEngagements.length}).catch(function(e){f.traceMetric(a.MetricNames.FailedPersonalizationEngagementDelete,1),B.deleteLoading=!1})},B.goToPersonalizationEngagementDetailsPage=function(e){for(var n=!0,r=0;r<e.referral.length;r++)null==e.referral[r].profile&&(n=!1);n&&_.setCacheData(e),t.path(a.Routes.PersonalizationEngagementDetails.replace(":engagementId",e.id))},B.convertToLocaleDate=function(e){return c.DateTime.convertDateToLocaleFormat(d.getLocale(),e)},B.signInToLinkedIn=function(){k.storeContext({}).then(function(e){I.signIn()})},B.signOutOfLinkedIn=function(){I.signOut()},B.redirectToEngagementCreatePage=function(){t.path(a.Routes.CreateEngagement)},B.fetchFirstPage=function(){var t=e.defer();B.showProgress=!0,B.partners=null,B.next=null;var n=m.getAPIRequestModel();return r.getPartners(n,B.paramManager.getAll()).then(function(e){B.noResultsMessage=null,B.partners=x(e.matchingPartners.items,n),B.next=e.matchingPartners.links.next,0===B.partners.length&&(B.noResultsMessage=q("localizedResources.FindPartner_EmptyRowText")),t.resolve({isOnFirstPage:e.isFirstPage,isOnLastPage:e.isLastPage})}).catch(function(e){B.noResultsMessage=null,e&&e.data&&2100===e.data.code?(f.traceWarning("Country code error from API: Error: "+e),B.noResultsMessage=q("localizedResources.FindPartner_EmptyRowText"),B.partners=null,t.resolve({isOnFirstPage:!0,isOnLastPage:!0})):(f.traceWarning("Error: "+e),B.noResultsMessage=q("localizedResources.AllView_ErrorMessageToDisplay"))}).finally(function(){C.hasSearchExecuted()?(B.showProgress=!1,setTimeout(function(){B.fixOverflow(0)},0)):setTimeout(function(){C.setSearchExecutedToTrue(),B.showProgress=!1,P.$digest(),B.fixOverflow(0)},1500)}),t.promise},B.getPartners=function(){J.get(G)&&(B.searchTrackingId=c.generateGuid(),J.put(G,B.searchTrackingId)),!B.searchRequestUXModel.showCountryCodeFilter&&B.searchRequestUXModel.locationName&&B.updateLatitudeLongitudeByAddress(B.searchRequestUXModel.locationName),B.fetchFirstPage()},B.fetchPartners=function(){var t=e.defer();return Q&&!B.isEngagementLoaded?B.getEngagamentDetail().then(function(){B.isEngagementLoaded=!0,t.resolve(B.fetchFirstPage())}):t.resolve(B.fetchFirstPage()),t.promise},B.onLoadMore=function(){F(B.next)},B.onPartnerClick=function(e){if(B.partnersSelected.length<B.partnerMultiSelectLimit||e.partnerSelected)if(e.partnerSelected=!e.partnerSelected,e.partnerSelected)B.partnersSelected.push(e);else for(var t=0;t<B.partnersSelected.length;t++)if(B.partnersSelected[t].partnerId===e.partnerId){B.partnersSelected.splice(t,1);break}},B.hoverIn=function(e){B.partnersSelected.length!=B.partnerMultiSelectLimit&&(e.cardHoverEdit=!0)},B.hoverOut=function(e){e.cardHoverEdit=!1},B.goToPartnerDetails=function(e,t,n){bingGlobalCallback=function(){},g.downloadMapControl();var r=new EventData(a.InstrumentationConstants.ClientControlIds.SearchPagePartnerDetailsLink,B.searchTrackingId,t,n,e,null);f.traceEvent(a.InstrumentationConstants.ClientEvents.SearchPagePartnerDetailsLink,r),partnerDetailsUrl=a.Routes.PartnerDetails.replace(":partner",angular.lowercase(e.replace(/\//g,"").replace(/\./g,"").replace(/\,/g,"").replace(/\&/g,"").replace(/ /g,"-"))+"_"+t).replace(":locationId",n),V(partnerDetailsUrl)},B.openNew=function(e,t){var n=new EventData(a.InstrumentationConstants.ClientControlIds.SearchPageLinkedInUrlClicked,B.searchTrackingId,t.partnerId,t.id,t.name,e);f.traceEvent(a.InstrumentationConstants.ClientEvents.SearchPageLinkedInUrlClicked,n),y.open(e,"_blank").focus()};var O=function(e,t){p.clearPartners();for(var n=0;n<e.length;n++){var r=e[n],o=t,s=a.InstrumentationConstants.ClientEvents.SearchPageContactPartnerButtonClicked;o===a.InstrumentationConstants.ClientControlIds.SearchPageContactPartnerContextMenuItemClicked&&(s=a.InstrumentationConstants.ClientEvents.SearchPageContactPartnerMenuItemClicked);var i=new EventData(o,B.searchTrackingId,B.partnersSelected[n].partnerId,B.partnersSelected[n].location,B.partnersSelected[n].name,null);f.traceEvent(s,i);var l=r.hasEndorsements;p.addPartner(new MarketingProfileModel(r.name,r.partnerId,r.id,r.location,r.logo,r.competencySummary.competencyLevel,l,r.linkedInOrganizationProfile))}V(a.Routes.RequestForInformation)},V=function(e){B.partners?ee.put(te,B.partners):ee.remove(te),B.next?ee.put(ne,B.next):ee.remove(ne),C.setBrowsePosition($(window).scrollTop()),t.path(e)};B.contactAllPartners=function(){O(B.partnersSelected,a.InstrumentationConstants.ClientControlIds.SearchPageContactPartnerButtonClicked)},B.contactPartner=function(e){O([e],a.InstrumentationConstants.ClientControlIds.SearchPageContactPartnerContextMenuItemClicked)},B.useLocationDistanceFilter=function(){B.searchRequestUXModel.showCountryCodeFilter=!1,B.getPartners()},B.useCountryFilter=function(){B.searchRequestUXModel.showCountryCodeFilter=!0,B.getPartners()},B.updateLatitudeLongitudeByAddress=function(e){g.getLatitudeLongitudeByAddress(e).then(function(e){e&&(B.searchRequestUXModel.latitude=e.coordinates[0],B.searchRequestUXModel.longitude=e.coordinates[1],B.searchRequestUXModel.geoRadius||(B.searchRequestUXModel.geoRadius=B.locationDistanceList[0].id))}).catch(function(t){f.traceWarning("Error geocoding address from bing. Address: "+e+". Error: "+ex)}).finally(function(){B.tableResetId=new Date})},B.clearSearchDetails=function(){J.put(G,c.generateGuid()),B.searchTrackingId=J.get(G),B.searchRequestUXModel.keyword=null,B.searchRequestUXModel.organizationSize=null,B.searchRequestUXModel.displayTags={},B.searchRequestUXModel.showCountryCodeFilter?B.searchRequestUXModel.selectedCountryCode.countryCode="":(B.searchRequestUXModel.geoRadius=null,B.searchRequestUXModel.locationName=null,B.searchRequestUXModel.latitude=null,B.searchRequestUXModel.longitude=null),B.partnersSelected=[],B.getPartners()},B.trimAndAppendComma=function(e){return e&&e.trim()?e.trim()+", ":null},B.closeAlert=function(){B.alertTriggered=!1},B.showAlert=function(){B.alertText="Service call not implemented, try again later",B.alertTriggered=!0},B.isContactPartnerButtonDisabled=function(){if(B.contact_SelectedPartner_Title=q("localizedResources.FindPartner_Contact_SelectedPartner_Title"),0===B.partnersSelected.length){if(!1===B.isAgent)return!0;B.contact_SelectedPartner_Title=q("localizedResources.FindPartner_Create_Engagement_title")}return B.contact_SelectedPartner_Title=B.contact_SelectedPartner_Title.toLocaleUpperCase(),!1},B.maxPartnerSelected=function(){return B.partnersSelected.length===B.partnerMultiSelectLimit?(B.contact_SelectedPartner_PartnerLimit_Message=q("localizedResources.FindPartner_Contact_SelectedPartner_MaxPartnerLimit_Message"),!0):(B.contact_SelectedPartner_PartnerLimit_Message=q("localizedResources.FindPartner_Contact_SelectedPartner_PartnerLimit_Message").replace("{0}",B.partnerMultiSelectLimit-B.partnersSelected.length),!1)},B.getSelectPartnerMessage=function(e){return q(e.partnerSelected?"localizedResources.FindPartner_SelectedProvider_Text":"localizedResources.FindPartner_SelectProvider_Text")},B.checkAllFieldsSelected=function(){var e=B.searchRequestUXModel.showCountryCodeFilter&&""!=B.searchRequestUXModel.selectedCountryCode.countryCode||!B.searchRequestUXModel.showCountryCodeFilter&&B.searchRequestUXModel.locationName&&B.searchRequestUXModel.geoRadius;return Object.keys(B.searchRequestUXModel.displayTags).length>0&&e&&B.searchRequestUXModel.organizationSize},B.tryGetPartners=function(e){B.showPartnerSearchResultSection()?(B.searchResultMode=!0,B.SearchQueryErrorMessage=null,B.homePageHeader=q("localizedResources.SearchExperience_Homepageheader_Result"),1!=e&&(C.setBrowsePosition(0),B.getPartners())):(B.noResultsMessage=null,B.partners=null,B.next=null,(C.hasSearchExecuted()||m.isSearchRequestUXModelInitializedWithEngagementDataOrCustomerFilters())&&(B.SearchQueryErrorMessage=q("localizedResources.SearchExperience_SearchQueryErrorMessage")))},B.showPartnerSearchResultSection=function(){return B.checkAllFieldsSelected()||B.skipCheckParam},B.organizationSizeChanged=function(e){B.searchRequestUXModel.organizationSize=e,B.tryGetPartners()},B.getSelectedPartnersMessage=function(){if(B.partnersSelected.length>0){return q("localizedResources.SearchExperience_PartnerSelectedMessage").replace("{0}",B.partnersSelected.length)}if(B.isAgent)return q("localizedResources.SearchExperience_SelectProvidersMessage")},B.clearPartnerSelection=function(){for(B.partnersSelected.length=0,i=0;i<B.partners.length;++i)B.partners[i].partnerSelected=!1},B.showContactProviderorCreateEngagementSection=function(){return B.partnersSelected.length>0||!0===B.isAgent&&B.partners&&B.partners.length>0&&!Q},B.fixOverflow=function(e){$(".card-title").text(function(t,n){if(t>=e){var r=!1,a=parseInt($(this).css("max-height").replace(/[^0-9]+/,""));for($(this).height()>a&&($(this).attr("title",$(this).text()),r=!0,$(this).text().length>100&&$(this).text(function(e,t){return t.substring(0,100)}));parseInt($(this).height())>a;)$(this).text(function(e,t){return t.substring(0,t.length-5)});r&&$(this).text(function(e,t){return t.substring(0,t.length-3)+"..."})}}),$(".description-style").text(function(t,n){if(t>=e){var r=!1,a=parseInt($(this).css("max-height").replace(/[^0-9]+/,""));for($(this).height()>a&&(r=!0,$(this).text().length>250&&$(this).text(function(e,t){return t.substring(0,250)}));parseInt($(this).height())>a;)$(this).text(function(e,t){return t.substring(0,t.length-5)});r&&$(this).text(function(e,t){return t.substring(0,t.length-3)+"..."})}}),$(".address-style").attr("title",function(t,n){if(t>=e){var r=this;if(r.offsetWidth<r.scrollWidth)return $(r).text().replace(/\n/g,"").replace(/ +/g," ").trim()}})},B.showDeleteConfirmation=function(e){B.engagementToDelete=e,B.modalData={title:q("localizedResources.FindPartner_PersonalizationDeleteTitle"),message:q("localizedResources.FindPartner_PersonalizationDeleteMessage"),primaryButtonText:q("localizedResources.FindPartner_PersonalizationDeleteConfirm"),secondaryButtonText:q("localizedResources.FindPartner_PersonalizationDeleteCancel"),primaryButtonCallback:B.deleteEngagementFromList},L.show(B.modalData)};B.searchRequestUXModel=m.getSearchRequestUXModel();var G=a.SearchTrackingIdKeyforCache,K=a.SearchCacheId;B.persona=E.getPersona(),B.isAgent=B.persona==a.Personas.AgentUser,B.isLinkedInUser=B.persona==a.Personas.LinkedInUser,B.partnerMultiSelectLimit=3,B.isEngagementLoaded=!1,B.hasFocus=!1,B.partnersSelected=R.getSelectedPartners(),B.cardSelectDisable=!1,B.skipLocation=!1,B.totalPartnersSelected=0,B.showLoadMoreProgress=!1,B.allFieldsSelected=!1,B.showPersonalizationProgress=!0,B.personalizationEngagements=[],B.totalPersonalizationEngagementsLength=0,B.isAgent?B.skipLocation=!0:B.isLinkedInUser&&B.getLinkedInUserInfo();var q=n.get;B.pageTitle=q("localizedResources.FindPartner_Title"),B.description=q("localizedResources.FindPartner_Description"),B.map=q("localizedResources.FindPartner_Map"),B.refine=q("localizedResources.FindPartner_Refine"),B.searchBox_Title=q("localizedResources.FindPartner_SearchBox_Title"),B.releatedSearches=q("localizedResources.FindPartner_ReleatedSearches"),B.businessSize_Title=q("localizedResources.FindPartner_BusinessSize_Title"),B.organizationSize_Title=q("localizedResources.FindPartner_OrganizationSize_Title"),B.location_Title=q("localizedResources.FindPartner_Location_Title"),B.searchByDistance_Title=q("localizedResources.FindPartner_SearchByDistance_Title"),B.clear=q("localizedResources.FindPartner_Clear"),B.default_Dropdown_Radius=q("localizedResources.Partner_Default_Dropdown_Radius"),B.clearLocationInformation=q("localizedResources.FindPartner_ClearLocationInformation"),B.searchBox_Description_Title=q("localizedResources.FindPartner_SearchBox_Description_Title"),B.organizationSizeDefault=q("localizedResources.OrganizationSize_DefaultText"),B.searchBox_Description_Title=q("localizedResources.FindPartner_SearchBox_Title"),B.contact_SelectedPartner_Message=q("localizedResources.FindPartner_Contact_SelectedPartner_Message"),B.contact_SelectedPartner_PartnerLimit_Message=q("localizedResources.FindPartner_Contact_SelectedPartner_PartnerLimit_Message").replace("{0}",B.partnerMultiSelectLimit),B.loadMoreText=q("localizedResources.FindPartner_LoadMoreText"),B.partnerSelectedMessage=q("localizedResources.FindPartner_SelectedPartner_Description"),B.partnerSelectMessage=q("localizedResources.FindPartner_SelectPartner_Description"),B.countryText=q("localizedResources.AllView_CountryOrRegion"),B.partnerEmptyMessage="-",B.linkedinSigninMessage=q("localizedResources.FindPartner_LinkedinSigninMessage"),B.linkedinWelcomeLabel=q("localizedResources.FindPartner_LinkedinWelcomeLabel").replace("{0}",B.firstName),B.connectWithPartnersHeader=q("localizedResources.SearchExperience_ContentConnectWithMSHeader"),B.connectWithPartnersDescription=q("localizedResources.SearchExperience_ContentConnectWithMSDescription"),B.saveTimeandMoneyDescription=q("localizedResources.SearchExperience_ContentSaveTimeAndMoneyDescription"),B.saveTimeandMoneyHeader=q("localizedResources.SearchExperience_ContentSaveTimeAndMoneyHeader"),B.accelerateBusinessDescription=q("localizedResources.SearchExperience_ContentGrowBusinessDescription"),B.accelerateBusinessHeader=q("localizedResources.SearchExperience_ContentGrowBusinessHeader"),B.unselectAllProviders=q("localizedResources.SearchExperience_UnselectAllProviders"),B.unselectProvider=q("localizedResources.SearchExperience_UnselectProvider"),B.contactProvider=q("localizedResources.SearchExperience_ContactProvider"),B.viewProviderDetails=q("localizedResources.SearchExperience_ViewProviderDetails"),B.selectProviderButtonText=q("localizedResources.SearchExperience_SelectProviderButtonText"),B.selectProviderButtonText=B.selectProviderButtonText.toLocaleUpperCase(),B.providerSelectedButtonText=q("localizedResources.SearchExperience_ProviderSelectedButtonText"),B.providerSelectedButtonText=B.providerSelectedButtonText.toLocaleUpperCase(),B.competencyTooltip=q("localizedResources.AllView_CompetencyTooltip"),B.endorsementTooltip=q("localizedResources.AllView_EndorsementTooltip"),B.dateCreated=q("localizedResources.Engagement_List_Date_Created"),B.patnerEngagementId=q("localizedResources.Engagement_List_Engagement_Id"),B.customerOrganizationName=q("localizedResources.Engagement_List_Customer_Organization_Name"),B.linkedInContentListLabel=q("localizedResources.FindPartner_LinkedInContentListLabel"),B.linkedInContentListDescription=q("localizedResources.FindPartner_LinkedInContentListDescription"),B.linkedInViewStatusLabel=q("localizedResources.FindPartner_LinkedInViewStatusLabel"),B.linkedInSignOutText=q("localizedResources.FindPartner_LinkedInSignOutText"),B.linkedInNoEngagementLabel=q("localizedResources.FindPartner_LinkedInNoEngagementLabel"),B.personalizationEngagementArchived=q("localizedResources.FindPartner_EngagementArchived"),B.personalizationEngagementEngaged=q("localizedResources.FindPartner_EngagementEngaged"),B.personalizationEngagementWaiting=q("localizedResources.FindPartner_EngagementWaiting"),B.engagementSubmitted=q("localizedResources.PersonalizedEngagementDetails_EngagementSubmitted"),B.engagementAcknowledged=q("localizedResources.PersonalizedEngagementDetails_EngagementAcknowledged"),B.engagementAccepted=q("localizedResources.PersonalizedEngagementDetails_EngagementAccept"),B.engagementNotAvailable=q("localizedResources.PersonalizedEngagementDetails_EngagementNotAvailable"),B.engagementWon=q("localizedResources.PersonalizedEngagementDetails_EngagementWon"),B.keyEvent=null,B.partnerNoLogo=a.Routes.PartnerNoLogo,B.silverBadgeImage=a.Routes.SilverBadgeImage,B.goldBadgeImage=a.Routes.GoldBadgeImage,B.linkedinBadgeImage=a.Routes.LinkedinBadgeImage,B.linkedinSignInImage=a.Routes.LinkedinSignInImage,B.homePageImageFull=a.Routes.HeroImage,B.connectWithPartnersImage=a.Routes.ConnectWithPartnersImage,B.saveTimeandMoneyImage=a.Routes.SaveTimeandMoneyImage,B.accelerateBusinessImage=a.Routes.AccelerateBusinessImage,B.engagementArchived=a.Routes.EngagementArchived,B.engagementEngaged=a.Routes.EngagementEngaged,B.engagementWaiting=a.Routes.EngagementWaiting,B.locationDistanceList=[{id:"1000",name:q("localizedResources.AllView_1000")+" "+q("localizedResources.FindPartner_Miles")},{id:"500",name:q("localizedResources.AllView_500")+" "+q("localizedResources.FindPartner_Miles")},{id:"100",name:q("localizedResources.AllView_100")+" "+q("localizedResources.FindPartner_Miles")}],B.correlationID=d.getCorrelationId(),B.sessionID=d.getSessionId();var H=o.ParametersManager,W=o.Parameter,X=new W("engagementId"),j=new W("cacheId"),Z=new W("customFilters"),Y=[X,Z,j];B.paramManager=new H(Y),B.paramManager.read(),B.paramManager.readAllDebugFlags(),customFiltersQueryValue=Z.value(),B.includeTestParam=B.paramManager.get("includeTest").value(),B.testOnlyParam=B.paramManager.get("testOnly").value(),B.prodResultsParam=B.paramManager.get("prodResults").value(),B.skipCheckParam=B.paramManager.get("skipCheck").value();var Q=X.value();B.linkedInFlight=T.isFlightEnabled(a.Flights.LinkedInFlight);var J=s.get(K)||s(K);J.get(G)?B.searchTrackingId=J.get(G):B.searchTrackingId=c.createSearchTrackingIdInCache(),_.clearCacheData();var ee=s.get(a.SearchResultIdForCache)||s(a.SearchResultIdForCache),te=a.PartnersListKeyInSearchResult,ne=a.NextLinkKeyInSearchResult;!function(){B.homePageHeader=q("localizedResources.SearchExperience_SearchbarHeader"),C.hasSearchExecuted()||Q||customFiltersQueryValue||j.value()?B.searchResultMode=!0:B.searchResultMode=!1,!0===B.searchResultMode&&(B.homePageHeader=q("localizedResources.SearchExperience_Homepageheader_Result"))}(),ee.get(te)?(B.skipLocation=!0,B.partners=ee.get(te),ee.get(ne)&&(B.next=ee.get(ne)),B.tryGetPartners(!0),B.partners&&0===B.partners.length&&(B.noResultsMessage=q("localizedResources.FindPartner_EmptyRowText")),setTimeout(function(){$("html,body").animate({scrollTop:C.browsePosition()},0)},0)):(S.getGlobalDomainData(a.DomainDataKeys.OrganizationSize).then(function(e){B.companySizeOptions=e}).finally(function(){B.companySizeOptions||(f.traceWarning("Unable to load company size data"),B.companySizeOptionsUnavailable=!0)}),function(){var t=e.defer();return m.isSearchRequestUXModelInitializedWithEngagementDataOrCustomerFilters()?t.resolve():N().then(function(){}).catch(function(e){f.traceWarning("Unable to load agent engagement data. Error: "+e)}).finally(function(){t.resolve()}),t.promise}().then(function(){B.noResultsMessage=null,m.setCustomFilters(customFiltersQueryValue),B.tryGetPartners()}).catch(function(e){B.showProgress=!1,B.noResultsMessage=q("localizedResources.AllView_ErrorMessageToDisplay"),f.traceWarning("Error loading engagement data and presenting search results. Error: "+e)}).finally(function(){B.partnerSearchExecuted=C.hasSearchExecuted()}))}angular.module("app").controller("NewSearchController",e),e.$inject=["$q","$location","resxSvc","partnerSvc","Constants","queryParametersSvc","$cacheFactory","$http","Helpers","countryInformationSvc","bingMapsSvc","sessionContextSvc","globalSearchRequestSvc","partnersToSendEngagementsSvc","tracingSvc","globalEngagementsSvc","engagementsSvc","globalDomainDataSvc","$window","selectedPartnersInSearchSvc","searchPageSearchExecutionState","$rootScope","linkedInSvc","sessionStorageSvc","flightingSvc","personalizationSvc","finderDomainDataSvc","userPersonaSvc","linkedInUserInfoSvc","modalSvc","personalizationCacheSvc"]}(),function(){function e(e){function t(t){return e&&e.requestSourceContext?e.requestSourceContext.userSecurityGroups:""}function n(t){t&&(e.requestSourceContext.userSecurityGroups=angular.toJson(t.userMembershipGroups))}function r(t){t&&t.cachedEntrySourceAppId&&(e.requestSourceContext.sourceApplicationId=t.cachedEntrySourceAppId)}function a(){return e.requestSourceContext.sourceApplicationId}return{getRequestSourceAppId:a,updateSourceContext:r,updateUserMembershipGroups:n,getUserMembershipGroups:t}}
angular.module("app").factory("requestSourceContextSvc",e),e.$inject=["sessionContext"]}(),function(){angular.module("meControl",[])}(),function(){function e(e,t,n){function r(r){var a=e.getPersona();r.properties.IsAgent=a==t.Personas.AgentUser,r.properties.IsLinkedInUser=a==t.Personas.LinkedInUser,n.getRequestSourceAppId()&&(r.properties["Request-SourceAppId"]=n.getRequestSourceAppId()),n.getUserMembershipGroups()&&(r.properties.UserMembershipGroups=n.getUserMembershipGroups())}function a(r){var a=e.getPersona();r.IsAgent=a==t.Personas.AgentUser,r.IsLinkedInUser=a==t.Personas.LinkedInUser,n.getRequestSourceAppId()&&(r["Request-SourceAppId"]=n.getRequestSourceAppId()),n.getUserMembershipGroups()&&(r.UserMembershipGroups=n.getUserMembershipGroups())}return{addTelemetryInitializerToEnvelope:r,addEventProperties:a}}angular.module("app").factory("appInsightsInstrumentationSvcExtensions",e),e.$inject=["userPersonaSvc","Constants","requestSourceContextSvc"]}(),function(){function e(e,t,n,r,a,o,s){function i(t){var a=n.defer(),i="";return s.getPersona()==o.Personas.AgentUser?e.acquireToken(r.aadSettings.ClientId).then(function(e){l&&l.trackEvent("Resolving the token for the logged in user"),i=e,a.resolve(t(i))}).catch(function(t){e.login(),l.trackEvent("Adal library could not login and could not get a token silently for "+$rootScope.userInfo.isAuthenticated+" user and profile "+$rootScope.userInfo.profile.given_name+$rootScope.userInfo.profile.family_name+$rootScope.userInfo.profile.userName),a.reject()}):a.resolve(t(i)),a.promise}var l=t.appInsights;return{addIdTokenHeader:i}}angular.module("common").factory("authenticationSvc",e),e.$inject=["adalAuthenticationService","$window","$q","settings","userInfo","Constants","userPersonaSvc"]}(),function(){function e(e,t,n,r,a,o,s,i,l,c,u){function g(e){e.headers.Pragma="no-cache",e.headers.Expires=-1,e.headers["Cache-Control"]="no-cache"}function d(t){var n=e.defer();if(t.headers||(t.headers={}),c.getCorrelationId()&&(t.headers["x-root-correlation-id"]=c.getCorrelationId()),t.requestTimeStamp=(new Date).getTime(),S(t)){if(a.isNullOrUndefined(t.remainingRetries)&&f(t),c.getRequestId()&&(t.headers["ms-requestid"]=c.getRequestId()),u.getRequestSourceAppId()&&(t.headers["x-requestsource-appid"]=u.getRequestSourceAppId()),g(t),t.params&&t.params.$headers){for(var r in t.params.$headers)t.headers[r]=t.params.$headers[r];delete t.params.$headers}if(t.params&&!a.isNullOrUndefined(t.params.$refreshCache))if(!0===t.params.$refreshCache){delete t.params.$refreshCache;var o=getConfigCache(t);if(o){var s=t.url+a.buildQueryString(t.params);o.remove(s)}}else delete t.params.$refreshCache;m().then(function(e){e["MS-RequestId"]=c.getRequestId(),e["MS-CorrelationId"]=c.getCorrelationId();for(var r in e)t.headers[r]||(t.headers[r]=e[r]);n.resolve(t)}).catch(function(e){l.traceError(e),n.reject(e)}),l.traceHttpRequest(t)}else n.resolve(t);return n.promise}function m(){var t=e.defer(),n=!0;return R&&R.expiresAt&&(n=p(R.expiresAt)),n?y().then(function(e){R=e,k.Authorization=T+e.token,t.resolve(k)}):(k.Authorization=T+R.token,t.resolve(k)),t.promise}function p(e){var t=new Date(e),n=new Date;return Math.floor((t-n)/1e3/60)<=2}function f(e){if(e.nonRetryableErrorCodes=I.slice(0),e.retryIntervals=P,e.remainingRetries=e.retryIntervals.length,e.params){if(e.params.$retryableErrorCodes){if(!$.isArray(e.params.$retryableErrorCodes))throw"Parameter $retryableErrorCodes must be an array of status codes that should be retried";angular.forEach(e.params.$retryableErrorCodes,function(t){var n=e.nonRetryableErrorCodes.indexOf(t);n>=0&&e.nonRetryableErrorCodes.splice(n,1)}),delete e.params.$retryableErrorCodes}if(e.params.$retryIntervals){if(!$.isArray(e.params.$retryIntervals))throw"Parameter $retryIntervals must be an array of millisecond intervals";e.retryIntervals=e.params.$retryIntervals,e.remainingRetries=e.retryIntervals.length,delete e.params.$retryIntervals}}}function h(e){return e.config&&S(e.config)&&l.traceHttpResponse(e),e}function v(t){return t&&t.data&&l.traceError(angular.toJson(t)),l.traceHttpResponse(t),e.reject(t)}function S(e){if(r.AppAuthenticatedEndpoints)for(var t=r.AppAuthenticatedEndpoints,n=0;n<t.length;n++){var a=t[n];if(e.url.indexOf(a)>=0)return!0}return!1}function y(e){var n=t.get("$resource");return C=n(z,null,{get:{}}),C.get().$promise}var R,C,P=(n.get("$http"),[100,300]),I=[400,401,403,404,405,409,0,412],k={Accept:"application/json","X-Locale":"en-us","ocp-apim-subscription-key":r.PartnerApiKey,PartnerCenterClient:"Partner Center Web",Authorization:""},T="Bearer ",z="/"+s.locale+"/"+s.websiteRoot+"/"+r.GenerateAppTokenRoot;return{request:d,response:h,responseError:v,getAppAuthenticationToken:y}}angular.module("app").factory("httpInterceptorSvc",e),e.$inject=["$q","$injector","$cacheFactory","Constants","Helpers","pageSvc","settings","adalAuthenticationService","tracingSvc","sessionContextSvc","requestSourceContextSvc"]}(),function(){function e(e,t,n,r,a,o,s,i,l){function c(){a.onAcquireTokenSuccess=function(){var e=a.userInfo;e&&e.isAuthenticated&&e.profile?i.getMembership().then(function(e){l.updateUserMembershipGroups(e)}):l.updateUserMembershipGroups("")},a.$on("$routeChangeSuccess",a.onAcquireTokenSuccess);var t=o.location.href,c=r.get,u={idp:"",firstName:"",lastName:"",memberName:""},g={meControlOptions:{containerId:"meControl",enabled:!0,headerHeight:48,custom:{chevHtml:'<i class="msame_chev_uhf shell-icon-dropdown"></i>'},market:n.locale,mobileBreakpoints:{shortHeader:1084},signInStr:c("Signin"),signOutStr:c("Signout"),rpData:{aadInfo:{accountSettingsUrl:null,signOutUrl:t,appId:n.aadSettings.ClientId,authenticatedState:!1},preferredIdp:"aad"},events:{onSignIn:function(){var t=window.msCommonShell;u.idp=t.SupportedAuthIdp.AAD,e.config.redirectUri=o.location.href,e.login(),s.traceInfo("UserLogin clicked")},onBeforeSignOut:function(){e.config.logOutUri=o.location.href,e.logOut()}}}};if(window.msCommonShell){var d=window.msCommonShell;u.idp=d.SupportedAuthIdp.AAD;var m=a.userInfo;m&&m.isAuthenticated&&m.profile&&(u.firstName=m.profile.given_name,u.lastName=m.profile.family_name,u.memberName=m.userName,u.authenticatedState=m.isAuthenticated,s.traceInfo("Configuring meControl authenticated user"),g.meControlOptions.userData=u),window.msCommonShell.load(g)}else window.onShellReadyToLoad=function(){window.onShellReadyToLoad=null,window.msCommonShell.load(g),s.traceInfo("Configuring meControl UnAuthenticated user")}}return{init:c}}angular.module("meControl").factory("meControlService",e),e.$inject=["adalAuthenticationService","$location","settings","resxSvc","$rootScope","$window","tracingSvc","userGroupMembershipSvc","requestSourceContextSvc"]}(),function(){function e(e,t,n,r){function a(e,r,a,i,c,u,g){var d=n.defer(),m=t.SuggestionsConstants.DefaultIndexName;return g&&(m=t.SuggestionsConstants.ProdDataIndexName),l.get({indexName:m,keyword:e,filterstring:o(r,i,c),numberResults:a,localestring:s(u)}).$promise.then(function(t){t.originalKeyword=e,t.originalCategory=r,d.resolve(t)}),d.promise}function o(e,t,n){return n?"&$filter=category eq '"+e+"' and metadata/any(t: t eq 'is_test:True')":t?"&$filter=category eq '"+e+"'":"&$filter=category eq '"+e+"' and metadata/any(t: t eq 'is_test:False')"}function s(e){return"&searchFields=value_"+(-1==c.indexOf(e.toLowerCase())?"en_us":e.toLowerCase().replace("-","_"))}var i=t.SuggestionsConstants.Endpoint+"/indexes/:indexName/docs/suggest?suggesterName=suggest:filterstring&$select=key,value_en_us,category:localestring&api-version=2015-02-28&api-key="+t.SuggestionsConstants.IndexKey+"&$top=:numberResults&search=:keyword",l=e(i),c=r.supportedLanguages;return{getSuggestions:a}}angular.module("common").factory("suggestionsSvc",e),e.$inject=["$resource","Constants","$q","settings"]}(),function(){function e(e,t,n){function r(){return o.get().$promise.then(function(e){return e})}var a=n.location.origin+"/api/membergroups",o=e(a,null,{get:{method:"GET"}});return{getMembership:r}}angular.module("app").factory("userGroupMembershipSvc",e),e.$inject=["$resource","Constants","$window"]}(),function(){function e(e,t,n){function r(){var r=n.getUserInfo();return r&&!0===r.isUserSignedIn?e.Personas.LinkedInUser:t.userInfo&&t.userInfo.profile?e.Personas.AgentUser:e.Personas.None}return{getPersona:r}}angular.module("common").factory("userPersonaSvc",e),e.$inject=["Constants","$rootScope","linkedInUserInfoSvc"]}();